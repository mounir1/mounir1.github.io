import{r as e,j as t,R as n,b as r,c as i,d as s}from"./index-rSfqJnTx.js";const o=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=e.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:c,iconNode:u,...l},h)=>e.createElement("svg",{ref:h,...a,width:n,height:n,stroke:t,strokeWidth:i?24*Number(r)/Number(n):r,className:o("lucide",s),...l},[...u.map(([t,n])=>e.createElement(t,n)),...Array.isArray(c)?c:[c]])),u=(t,n)=>{const r=e.forwardRef(({className:r,...i},s)=>{return e.createElement(c,{ref:s,iconNode:n,className:o(`lucide-${a=t,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i});var a});return r.displayName=`${t}`,r},l=u("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),h=u("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),d=u("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),f=u("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),p=u("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),m=u("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),g=u("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),y=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),v=u("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),w=u("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),b=u("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),_=u("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),E=u("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),I=u("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),T=u("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),S=u("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),C=u("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),k=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),A=u("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),x=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),R=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),N=u("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function D(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function P(...e){return t=>{let n=!1;const r=e.map(e=>{const r=D(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():D(e[t],null)}}}}function O(...t){return e.useCallback(P(...t),t)}function M(n){const r=U(n),i=e.forwardRef((n,i)=>{const{children:s,...o}=n,a=e.Children.toArray(s),c=a.find(j);if(c){const n=c.props.children,s=a.map(t=>t===c?e.Children.count(n)>1?e.Children.only(null):e.isValidElement(n)?n.props.children:null:t);return t.jsx(r,{...o,ref:i,children:e.isValidElement(n)?e.cloneElement(n,void 0,s):null})}return t.jsx(r,{...o,ref:i,children:s})});return i.displayName=`${n}.Slot`,i}var L=M("Slot");function U(t){const n=e.forwardRef((t,n)=>{const{children:r,...i}=t;if(e.isValidElement(r)){const t=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(i,r.props);return r.type!==e.Fragment&&(s.ref=n?P(n,t):t),e.cloneElement(r,s)}return e.Children.count(r)>1?e.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var F=Symbol("radix.slottable");function V(e){const n=({children:e})=>t.jsx(t.Fragment,{children:e});return n.displayName=`${e}.Slottable`,n.__radixId=F,n}function j(t){return e.isValidElement(t)&&"function"==typeof t.type&&"__radixId"in t.type&&t.type.__radixId===F}function B(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=B(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function z(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=B(e))&&(r&&(r+=" "),r+=t);return r}const $=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,q=z,H=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return q(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==s?void 0:s[e];if(null===t)return null;const o=$(t)||$(r);return i[e][o]}),a=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),c=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...a}[t]):{...s,...a}[t]===n})?[...e,n,r]:e},[]);return q(e,o,c,null==n?void 0:n.class,null==n?void 0:n.className)},K=e=>{const t=X(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),G(n,t)||Q(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},G=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?G(e.slice(1),r):void 0;if(i)return i;if(0===t.validators.length)return;const s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},W=/^\[(.+)\]$/,Q=e=>{if(W.test(e)){const t=W.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},X=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return ee(Object.entries(e.classGroups),n).forEach(([e,n])=>{Y(n,r,e,t)}),r},Y=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:J(t,e)).classGroupId=n)}if("function"==typeof e)return Z(e)?void Y(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,i])=>{Y(i,J(t,e),n,r)})})},J=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Z=e=>e.isThemeGetter,ee=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,te=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},ne=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],s=t.length,o=e=>{const n=[];let o,a=0,c=0;for(let h=0;h<e.length;h++){let u=e[h];if(0===a){if(u===i&&(r||e.slice(h,h+s)===t)){n.push(e.slice(c,h)),c=h+s;continue}if("/"===u){o=h;continue}}"["===u?a++:"]"===u&&a--}const u=0===n.length?e:e.substring(c),l=u.startsWith("!");return{modifiers:n,hasImportantModifier:l,baseClassName:l?u.substring(1):u,maybePostfixModifierPosition:o&&o>c?o-c:void 0}};return n?e=>n({className:e,parseClassName:o}):o},re=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},ie=/\s+/;function se(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=oe(e))&&(r&&(r+=" "),r+=t);return r}const oe=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=oe(e[r]))&&(n&&(n+=" "),n+=t);return n};function ae(e,...t){let n,r,i,s=function(a){const c=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:te(e.cacheSize),parseClassName:ne(e),...K(e)}))(c),r=n.cache.get,i=n.cache.set,s=o,o(a)};function o(e){const t=r(e);if(t)return t;const s=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(ie);let a="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{modifiers:t,hasImportantModifier:u,baseClassName:l,maybePostfixModifierPosition:h}=n(e);let d=Boolean(h),f=r(d?l.substring(0,h):l);if(!f){if(!d){a=e+(a.length>0?" "+a:a);continue}if(f=r(l),!f){a=e+(a.length>0?" "+a:a);continue}d=!1}const p=re(t).join(":"),m=u?p+"!":p,g=m+f;if(s.includes(g))continue;s.push(g);const y=i(f,d);for(let n=0;n<y.length;++n){const e=y[n];s.push(m+e)}a=e+(a.length>0?" "+a:a)}return a})(e,n);return i(e,s),s}return function(){return s(se.apply(null,arguments))}}const ce=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ue=/^\[(?:([a-z-]+):)?(.+)\]$/i,le=/^\d+\/\d+$/,he=new Set(["px","full","screen"]),de=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,me=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ye=e=>we(e)||he.has(e)||le.test(e),ve=e=>De(e,"length",Pe),we=e=>Boolean(e)&&!Number.isNaN(Number(e)),be=e=>De(e,"number",we),_e=e=>Boolean(e)&&Number.isInteger(Number(e)),Ee=e=>e.endsWith("%")&&we(e.slice(0,-1)),Ie=e=>ue.test(e),Te=e=>de.test(e),Se=new Set(["length","size","percentage"]),Ce=e=>De(e,Se,Oe),ke=e=>De(e,"position",Oe),Ae=new Set(["image","url"]),xe=e=>De(e,Ae,Le),Re=e=>De(e,"",Me),Ne=()=>!0,De=(e,t,n)=>{const r=ue.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},Pe=e=>fe.test(e)&&!pe.test(e),Oe=()=>!1,Me=e=>me.test(e),Le=e=>ge.test(e),Ue=ae(()=>{const e=ce("colors"),t=ce("spacing"),n=ce("blur"),r=ce("brightness"),i=ce("borderColor"),s=ce("borderRadius"),o=ce("borderSpacing"),a=ce("borderWidth"),c=ce("contrast"),u=ce("grayscale"),l=ce("hueRotate"),h=ce("invert"),d=ce("gap"),f=ce("gradientColorStops"),p=ce("gradientColorStopPositions"),m=ce("inset"),g=ce("margin"),y=ce("opacity"),v=ce("padding"),w=ce("saturate"),b=ce("scale"),_=ce("sepia"),E=ce("skew"),I=ce("space"),T=ce("translate"),S=()=>["auto",Ie,t],C=()=>[Ie,t],k=()=>["",ye,ve],A=()=>["auto",we,Ie],x=()=>["","0",Ie],R=()=>[we,Ie];return{cacheSize:500,separator:":",theme:{colors:[Ne],spacing:[ye,ve],blur:["none","",Te,Ie],brightness:R(),borderColor:[e],borderRadius:["none","","full",Te,Ie],borderSpacing:C(),borderWidth:k(),contrast:R(),grayscale:x(),hueRotate:R(),invert:x(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Ee,ve],inset:S(),margin:S(),opacity:R(),padding:C(),saturate:R(),scale:R(),sepia:x(),skew:R(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",Ie]}],container:["container"],columns:[{columns:[Te]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ie]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_e,Ie]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ie]}],grow:[{grow:x()}],shrink:[{shrink:x()}],order:[{order:["first","last","none",_e,Ie]}],"grid-cols":[{"grid-cols":[Ne]}],"col-start-end":[{col:["auto",{span:["full",_e,Ie]},Ie]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Ne]}],"row-start-end":[{row:["auto",{span:[_e,Ie]},Ie]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ie]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ie,t]}],"min-w":[{"min-w":[Ie,t,"min","max","fit"]}],"max-w":[{"max-w":[Ie,t,"none","full","min","max","fit","prose",{screen:[Te]},Te]}],h:[{h:[Ie,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ie,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ie,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ie,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Te,ve]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",be]}],"font-family":[{font:[Ne]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ie]}],"line-clamp":[{"line-clamp":["none",we,be]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ye,Ie]}],"list-image":[{"list-image":["none",Ie]}],"list-style-type":[{list:["none","disc","decimal",Ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ye,ve]}],"underline-offset":[{"underline-offset":["auto",ye,Ie]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ke]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ce]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[ye,Ie]}],"outline-w":[{outline:[ye,ve]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ye,ve]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Te,Re]}],"shadow-color":[{shadow:[Ne]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Te,Ie]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[l]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ie]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Ie]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[_e,Ie]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ye,ve,be]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Fe(...e){return Ue(z(e))}const Ve=H("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),je=e.forwardRef(({className:e,variant:n,size:r,asChild:i=!1,...s},o)=>{const a=i?L:"button";return t.jsx(a,{className:Fe(Ve({variant:n,size:r,className:e})),ref:o,...s})});function Be(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function ze(n,r){const i=e.createContext(r),s=n=>{const{children:r,...s}=n,o=e.useMemo(()=>s,Object.values(s));return t.jsx(i.Provider,{value:o,children:r})};return s.displayName=n+"Provider",[s,function(t){const s=e.useContext(i);if(s)return s;if(void 0!==r)return r;throw new Error(`\`${t}\` must be used within \`${n}\``)}]}function $e(n,r=[]){let i=[];const s=()=>{const t=i.map(t=>e.createContext(t));return function(r){const i=r?.[n]||t;return e.useMemo(()=>({[`__scope${n}`]:{...r,[n]:i}}),[r,i])}};return s.scopeName=n,[function(r,s){const o=e.createContext(s),a=i.length;i=[...i,s];const c=r=>{const{scope:i,children:s,...c}=r,u=i?.[n]?.[a]||o,l=e.useMemo(()=>c,Object.values(c));return t.jsx(u.Provider,{value:l,children:s})};return c.displayName=r+"Provider",[c,function(t,i){const c=i?.[n]?.[a]||o,u=e.useContext(c);if(u)return u;if(void 0!==s)return s;throw new Error(`\`${t}\` must be used within \`${r}\``)}]},qe(s,...r)]}function qe(...t){const n=t[0];if(1===t.length)return n;const r=()=>{const r=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const i=r.reduce((e,{useScope:n,scopeName:r})=>({...e,...n(t)[`__scope${r}`]}),{});return e.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return r.scopeName=n.scopeName,r}je.displayName="Button";var He=globalThis?.document?e.useLayoutEffect:()=>{},Ke=n[" useInsertionEffect ".trim().toString()]||He;function Ge({prop:t,defaultProp:n,onChange:r=()=>{},caller:i}){const[s,o,a]=function({defaultProp:t,onChange:n}){const[r,i]=e.useState(t),s=e.useRef(r),o=e.useRef(n);return Ke(()=>{o.current=n},[n]),e.useEffect(()=>{s.current!==r&&(o.current?.(r),s.current=r)},[r,s]),[r,i,o]}({defaultProp:n,onChange:r}),c=void 0!==t,u=c?t:s;{const n=e.useRef(void 0!==t);e.useEffect(()=>{const e=n.current;if(e!==c){}n.current=c},[c,i])}const l=e.useCallback(e=>{if(c){const n=function(e){return"function"==typeof e}(e)?e(t):e;n!==t&&a.current?.(n)}else o(e)},[c,t,o,a]);return[u,l]}var We=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((n,r)=>{const i=M(`Primitive.${r}`),s=e.forwardRef((e,n)=>{const{asChild:s,...o}=e,a=s?i:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),t.jsx(a,{...o,ref:n})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{});function Qe(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}function Xe(e){const n=e+"CollectionProvider",[r,s]=$e(n),[o,a]=r(n,{collectionRef:{current:null},itemMap:new Map}),c=e=>{const{scope:n,children:r}=e,s=i.useRef(null),a=i.useRef(new Map).current;return t.jsx(o,{scope:n,itemMap:a,collectionRef:s,children:r})};c.displayName=n;const u=e+"CollectionSlot",l=M(u),h=i.forwardRef((e,n)=>{const{scope:r,children:i}=e,s=O(n,a(u,r).collectionRef);return t.jsx(l,{ref:s,children:i})});h.displayName=u;const d=e+"CollectionItemSlot",f="data-radix-collection-item",p=M(d),m=i.forwardRef((e,n)=>{const{scope:r,children:s,...o}=e,c=i.useRef(null),u=O(n,c),l=a(d,r);return i.useEffect(()=>(l.itemMap.set(c,{ref:c,...o}),()=>{l.itemMap.delete(c)})),t.jsx(p,{[f]:"",ref:u,children:s})});return m.displayName=d,[{Provider:c,Slot:h,ItemSlot:m},function(t){const n=a(e+"CollectionConsumer",t);return i.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},s]}var Ye=e.createContext(void 0);function Je(t){const n=e.useContext(Ye);return t||n||"ltr"}function Ze(t){const n=e.useRef(t);return e.useEffect(()=>{n.current=t}),e.useMemo(()=>(...e)=>n.current?.(...e),[])}var et,tt="dismissableLayer.update",nt="dismissableLayer.pointerDownOutside",rt="dismissableLayer.focusOutside",it=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),st=e.forwardRef((n,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...l}=n,h=e.useContext(it),[d,f]=e.useState(null),p=d?.ownerDocument??globalThis?.document,[,m]=e.useState({}),g=O(r,e=>f(e)),y=Array.from(h.layers),[v]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(v),b=d?y.indexOf(d):-1,_=h.layersWithOutsidePointerEventsDisabled.size>0,E=b>=w,I=function(t,n=globalThis?.document){const r=Ze(t),i=e.useRef(!1),s=e.useRef(()=>{});return e.useEffect(()=>{const e=e=>{if(e.target&&!i.current){let t=function(){at(nt,r,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",s.current),s.current=t,n.addEventListener("click",s.current,{once:!0})):t()}else n.removeEventListener("click",s.current);i.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",s.current)}},[n,r]),{onPointerDownCapture:()=>i.current=!0}}(e=>{const t=e.target,n=[...h.branches].some(e=>e.contains(t));E&&!n&&(o?.(e),c?.(e),e.defaultPrevented||u?.())},p),T=function(t,n=globalThis?.document){const r=Ze(t),i=e.useRef(!1);return e.useEffect(()=>{const e=e=>{if(e.target&&!i.current){at(rt,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{const t=e.target;[...h.branches].some(e=>e.contains(t))||(a?.(e),c?.(e),e.defaultPrevented||u?.())},p);return function(t,n=globalThis?.document){const r=Ze(t);e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})},[r,n])}(e=>{b===h.layers.size-1&&(s?.(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))},p),e.useEffect(()=>{if(d)return i&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(et=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),ot(),()=>{i&&1===h.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=et)}},[d,p,i,h]),e.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),ot())},[d,h]),e.useEffect(()=>{const e=()=>m({});return document.addEventListener(tt,e),()=>document.removeEventListener(tt,e)},[]),t.jsx(We.div,{...l,ref:g,style:{pointerEvents:_?E?"auto":"none":void 0,...n.style},onFocusCapture:Be(n.onFocusCapture,T.onFocusCapture),onBlurCapture:Be(n.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Be(n.onPointerDownCapture,I.onPointerDownCapture)})});st.displayName="DismissableLayer";function ot(){const e=new CustomEvent(tt);document.dispatchEvent(e)}function at(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Qe(i,s):i.dispatchEvent(s)}e.forwardRef((n,r)=>{const i=e.useContext(it),s=e.useRef(null),o=O(r,s);return e.useEffect(()=>{const e=s.current;if(e)return i.branches.add(e),()=>{i.branches.delete(e)}},[i.branches]),t.jsx(We.div,{...n,ref:o})}).displayName="DismissableLayerBranch";var ct=0;function ut(){e.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lt()),document.body.insertAdjacentElement("beforeend",e[1]??lt()),ct++,()=>{1===ct&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ct--}},[])}function lt(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ht="focusScope.autoFocusOnMount",dt="focusScope.autoFocusOnUnmount",ft={bubbles:!1,cancelable:!0},pt=e.forwardRef((n,r)=>{const{loop:i=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...c}=n,[u,l]=e.useState(null),h=Ze(o),d=Ze(a),f=e.useRef(null),p=O(r,e=>l(e)),m=e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;e.useEffect(()=>{if(s){let e=function(e){if(m.paused||!u)return;const t=e.target;u.contains(t)?f.current=t:vt(f.current,{select:!0})},t=function(e){if(m.paused||!u)return;const t=e.relatedTarget;null!==t&&(u.contains(t)||vt(f.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&vt(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[s,u,m.paused]),e.useEffect(()=>{if(u){wt.add(m);const t=document.activeElement;if(!u.contains(t)){const n=new CustomEvent(ht,ft);u.addEventListener(ht,h),u.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(vt(r,{select:t}),document.activeElement!==n)return}((e=mt(u),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&vt(u))}return()=>{u.removeEventListener(ht,h),setTimeout(()=>{const e=new CustomEvent(dt,ft);u.addEventListener(dt,d),u.dispatchEvent(e),e.defaultPrevented||vt(t??document.body,{select:!0}),u.removeEventListener(dt,d),wt.remove(m)},0)}}var e},[u,h,d,m]);const g=e.useCallback(e=>{if(!i&&!s)return;if(m.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[r,s]=function(e){const t=mt(e),n=gt(t,e),r=gt(t.reverse(),e);return[n,r]}(t);r&&s?e.shiftKey||n!==s?e.shiftKey&&n===r&&(e.preventDefault(),i&&vt(s,{select:!0})):(e.preventDefault(),i&&vt(r,{select:!0})):n===t&&e.preventDefault()}},[i,s,m.paused]);return t.jsx(We.div,{tabIndex:-1,...c,ref:p,onKeyDown:g})});function mt(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gt(e,t){for(const n of e)if(!yt(n,{upTo:t}))return n}function yt(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function vt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}pt.displayName="FocusScope";var wt=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=bt(e,t),e.unshift(t)},remove(t){e=bt(e,t),e[0]?.resume()}}}();function bt(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var _t=n[" useId ".trim().toString()]||(()=>{}),Et=0;function It(t){const[n,r]=e.useState(_t());return He(()=>{r(e=>e??String(Et++))},[t]),t||(n?`radix-${n}`:"")}const Tt=["top","right","bottom","left"],St=Math.min,Ct=Math.max,kt=Math.round,At=Math.floor,xt=e=>({x:e,y:e}),Rt={left:"right",right:"left",bottom:"top",top:"bottom"},Nt={start:"end",end:"start"};function Dt(e,t,n){return Ct(e,St(t,n))}function Pt(e,t){return"function"==typeof e?e(t):e}function Ot(e){return e.split("-")[0]}function Mt(e){return e.split("-")[1]}function Lt(e){return"x"===e?"y":"x"}function Ut(e){return"y"===e?"height":"width"}const Ft=new Set(["top","bottom"]);function Vt(e){return Ft.has(Ot(e))?"y":"x"}function jt(e){return Lt(Vt(e))}function Bt(e){return e.replace(/start|end/g,e=>Nt[e])}const zt=["left","right"],$t=["right","left"],qt=["top","bottom"],Ht=["bottom","top"];function Kt(e,t,n,r){const i=Mt(e);let s=function(e,t,n){switch(e){case"top":case"bottom":return n?t?$t:zt:t?zt:$t;case"left":case"right":return t?qt:Ht;default:return[]}}(Ot(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(Bt)))),s}function Gt(e){return e.replace(/left|right|bottom|top/g,e=>Rt[e])}function Wt(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Qt(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Xt(e,t,n){let{reference:r,floating:i}=e;const s=Vt(t),o=jt(t),a=Ut(o),c=Ot(t),u="y"===s,l=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(c){case"top":f={x:l,y:r.y-i.height};break;case"bottom":f={x:l,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Mt(t)){case"start":f[o]-=d*(n&&u?-1:1);break;case"end":f[o]+=d*(n&&u?-1:1)}return f}async function Yt(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Pt(t,e),p=Wt(f),m=a[d?"floating"===h?"reference":"floating":h],g=Qt(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),y="floating"===h?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),w=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},b=Qt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:c}):y);return{top:(g.top-b.top+p.top)/w.y,bottom:(b.bottom-g.bottom+p.bottom)/w.y,left:(g.left-b.left+p.left)/w.x,right:(b.right-g.right+p.right)/w.x}}function Jt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Zt(e){return Tt.some(t=>e[t]>=0)}const en=new Set(["left","top"]);function tn(){return"undefined"!=typeof window}function nn(e){return on(e)?(e.nodeName||"").toLowerCase():"#document"}function rn(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function sn(e){var t;return null==(t=(on(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function on(e){return!!tn()&&(e instanceof Node||e instanceof rn(e).Node)}function an(e){return!!tn()&&(e instanceof Element||e instanceof rn(e).Element)}function cn(e){return!!tn()&&(e instanceof HTMLElement||e instanceof rn(e).HTMLElement)}function un(e){return!(!tn()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof rn(e).ShadowRoot)}const ln=new Set(["inline","contents"]);function hn(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=In(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ln.has(i)}const dn=new Set(["table","td","th"]);function fn(e){return dn.has(nn(e))}const pn=[":popover-open",":modal"];function mn(e){return pn.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const gn=["transform","translate","scale","rotate","perspective"],yn=["transform","translate","scale","rotate","perspective","filter"],vn=["paint","layout","strict","content"];function wn(e){const t=bn(),n=an(e)?In(e):e;return gn.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||yn.some(e=>(n.willChange||"").includes(e))||vn.some(e=>(n.contain||"").includes(e))}function bn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const _n=new Set(["html","body","#document"]);function En(e){return _n.has(nn(e))}function In(e){return rn(e).getComputedStyle(e)}function Tn(e){return an(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Sn(e){if("html"===nn(e))return e;const t=e.assignedSlot||e.parentNode||un(e)&&e.host||sn(e);return un(t)?t.host:t}function Cn(e){const t=Sn(e);return En(t)?e.ownerDocument?e.ownerDocument.body:e.body:cn(t)&&hn(t)?t:Cn(t)}function kn(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Cn(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=rn(i);if(s){const e=An(o);return t.concat(o,o.visualViewport||[],hn(i)?i:[],e&&n?kn(e):[])}return t.concat(i,kn(i,[],n))}function An(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xn(e){const t=In(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=cn(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=kt(n)!==s||kt(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Rn(e){return an(e)?e:e.contextElement}function Nn(e){const t=Rn(e);if(!cn(t))return xt(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=xn(t);let o=(s?kt(n.width):n.width)/r,a=(s?kt(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Dn=xt(0);function Pn(e){const t=rn(e);return bn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Dn}function On(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=Rn(e);let o=xt(1);t&&(r?an(r)&&(o=Nn(r)):o=Nn(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==rn(e))&&t}(s,n,r)?Pn(s):xt(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,l=i.width/o.x,h=i.height/o.y;if(s){const e=rn(s),t=r&&an(r)?rn(r):r;let n=e,i=An(n);for(;i&&r&&t!==n;){const e=Nn(i),t=i.getBoundingClientRect(),r=In(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,u*=e.y,l*=e.x,h*=e.y,c+=s,u+=o,n=rn(i),i=An(n)}}return Qt({width:l,height:h,x:c,y:u})}function Mn(e,t){const n=Tn(e).scrollLeft;return t?t.left+n:On(sn(e)).left+n}function Ln(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Mn(e,n),y:n.top+t.scrollTop}}const Un=new Set(["absolute","fixed"]);function Fn(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=rn(e),r=sn(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const e=bn();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}const u=Mn(r);if(u<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=25&&(s-=o)}else u<=25&&(s+=u);return{width:s,height:o,x:a,y:c}}(e,n);else if("document"===t)r=function(e){const t=sn(e),n=Tn(e),r=e.ownerDocument.body,i=Ct(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ct(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Mn(e);const a=-n.scrollTop;return"rtl"===In(r).direction&&(o+=Ct(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(sn(e));else if(an(t))r=function(e,t){const n=On(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=cn(e)?Nn(e):xt(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=Pn(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Qt(r)}function Vn(e,t){const n=Sn(e);return!(n===t||!an(n)||En(n))&&("fixed"===In(n).position||Vn(n,t))}function jn(e,t,n){const r=cn(t),i=sn(t),s="fixed"===n,o=On(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=xt(0);function u(){c.x=Mn(i)}if(r||!r&&!s)if(("body"!==nn(t)||hn(i))&&(a=Tn(t)),r){const e=On(t,!0,s,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&u();s&&!r&&i&&u();const l=!i||r||s?xt(0):Ln(i,a);return{x:o.left+a.scrollLeft-c.x-l.x,y:o.top+a.scrollTop-c.y-l.y,width:o.width,height:o.height}}function Bn(e){return"static"===In(e).position}function zn(e,t){if(!cn(e)||"fixed"===In(e).position)return null;if(t)return t(e);let n=e.offsetParent;return sn(e)===n&&(n=n.ownerDocument.body),n}function $n(e,t){const n=rn(e);if(mn(e))return n;if(!cn(e)){let t=Sn(e);for(;t&&!En(t);){if(an(t)&&!Bn(t))return t;t=Sn(t)}return n}let r=zn(e,t);for(;r&&fn(r)&&Bn(r);)r=zn(r,t);return r&&En(r)&&Bn(r)&&!wn(r)?n:r||function(e){let t=Sn(e);for(;cn(t)&&!En(t);){if(wn(t))return t;if(mn(t))return null;t=Sn(t)}return null}(e)||n}const qn={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=sn(r),a=!!t&&mn(t.floating);if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},u=xt(1);const l=xt(0),h=cn(r);if((h||!h&&!s)&&(("body"!==nn(r)||hn(o))&&(c=Tn(r)),cn(r))){const e=On(r);u=Nn(r),l.x=e.x+r.clientLeft,l.y=e.y+r.clientTop}const d=!o||h||s?xt(0):Ln(o,c);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x+d.x,y:n.y*u.y-c.scrollTop*u.y+l.y+d.y}},getDocumentElement:sn,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?mn(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=kn(e,[],!1).filter(e=>an(e)&&"body"!==nn(e)),i=null;const s="fixed"===In(e).position;let o=s?Sn(e):e;for(;an(o)&&!En(o);){const t=In(o),n=wn(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&Un.has(i.position)||hn(o)&&!n&&Vn(e,o))?r=r.filter(e=>e!==o):i=t,o=Sn(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=s[0],a=s.reduce((e,n)=>{const r=Fn(t,n,i);return e.top=Ct(r.top,e.top),e.right=St(r.right,e.right),e.bottom=St(r.bottom,e.bottom),e.left=Ct(r.left,e.left),e},Fn(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:$n,getElementRects:async function(e){const t=this.getOffsetParent||$n,n=this.getDimensions,r=await n(e.floating);return{reference:jn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=xn(e);return{width:t,height:n}},getScale:Nn,isElement:an,isRTL:function(e){return"rtl"===In(e).direction}};function Hn(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Kn(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,u=Rn(e),l=i||s?[...u?kn(u):[],...kn(t)]:[];l.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});const h=u&&a?function(e,t){let n,r=null;const i=sn(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),s();const u=e.getBoundingClientRect(),{left:l,top:h,width:d,height:f}=u;if(a||t(),!d||!f)return;const p={rootMargin:-At(h)+"px "+-At(i.clientWidth-(l+d))+"px "+-At(i.clientHeight-(h+f))+"px "+-At(l)+"px",threshold:Ct(0,St(1,c))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==c){if(!m)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==r||Hn(u,e.getBoundingClientRect())||o(),m=!1}try{r=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(y){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),s}(u,n):null;let d,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let m=c?On(e):null;return c&&function t(){const r=On(e);m&&!Hn(m,r)&&n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;l.forEach(e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(d)}}const Gn=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,c=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=Ot(n),a=Mt(n),c="y"===Vt(n),u=en.has(o)?-1:1,l=s&&c?-1:1,h=Pt(t,e);let{mainAxis:d,crossAxis:f,alignmentAxis:p}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),c?{x:f*l,y:d*u}:{x:d*u,y:f*l}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Wn=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=Pt(e,t),u={x:n,y:r},l=await Yt(t,c),h=Vt(Ot(i)),d=Lt(h);let f=u[d],p=u[h];if(s){const e="y"===d?"bottom":"right";f=Dt(f+l["y"===d?"top":"left"],f,f-l[e])}if(o){const e="y"===h?"bottom":"right";p=Dt(p+l["y"===h?"top":"left"],p,p-l[e])}const m=a.fn({...t,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[d]:s,[h]:o}}}}}},Qn=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:l=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Pt(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const y=Ot(i),v=Vt(a),w=Ot(a)===a,b=await(null==c.isRTL?void 0:c.isRTL(u.floating)),_=d||(w||!m?[Gt(a)]:function(e){const t=Gt(e);return[Bt(e),t,Bt(t)]}(a)),E="none"!==p;!d&&E&&_.push(...Kt(a,m,p,b));const I=[a,..._],T=await Yt(t,g),S=[];let C=(null==(r=s.flip)?void 0:r.overflows)||[];if(l&&S.push(T[y]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Mt(e),i=jt(e),s=Ut(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Gt(o)),[o,Gt(o)]}(i,o,b);S.push(T[e[0]],T[e[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(e=>e<=0)){var k,A;const e=((null==(k=s.flip)?void 0:k.index)||0)+1,t=I[e];if(t){if(!("alignment"===h&&v!==Vt(t))||C.every(e=>Vt(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:C},reset:{placement:t}}}let n=null==(A=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(f){case"bestFit":{var x;const e=null==(x=C.filter(e=>{if(E){const t=Vt(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:x[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},Xn=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:c=()=>{},...u}=Pt(e,t),l=await Yt(t,u),h=Ot(i),d=Mt(i),f="y"===Vt(i),{width:p,height:m}=s.floating;let g,y;"top"===h||"bottom"===h?(g=h,y=d===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,g="end"===d?"top":"bottom");const v=m-l.top-l.bottom,w=p-l.left-l.right,b=St(m-l[g],v),_=St(p-l[y],w),E=!t.middlewareData.shift;let I=b,T=_;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(T=w),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(I=v),E&&!d){const e=Ct(l.left,0),t=Ct(l.right,0),n=Ct(l.top,0),r=Ct(l.bottom,0);f?T=p-2*(0!==e||0!==t?e+t:Ct(l.left,l.right)):I=m-2*(0!==n||0!==r?n+r:Ct(l.top,l.bottom))}await c({...t,availableWidth:T,availableHeight:I});const S=await o.getDimensions(a.floating);return p!==S.width||m!==S.height?{reset:{rects:!0}}:{}}}},Yn=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Pt(e,t);switch(r){case"referenceHidden":{const e=Jt(await Yt(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Zt(e)}}}case"escaped":{const e=Jt(await Yt(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Zt(e)}}}default:return{}}}}},Jn=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:l=0}=Pt(e,t)||{};if(null==u)return{};const h=Wt(l),d={x:n,y:r},f=jt(i),p=Ut(f),m=await o.getDimensions(u),g="y"===f,y=g?"top":"left",v=g?"bottom":"right",w=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[f]-d[f]-s.floating[p],_=d[f]-s.reference[f],E=await(null==o.getOffsetParent?void 0:o.getOffsetParent(u));let I=E?E[w]:0;I&&await(null==o.isElement?void 0:o.isElement(E))||(I=a.floating[w]||s.floating[p]);const T=b/2-_/2,S=I/2-m[p]/2-1,C=St(h[y],S),k=St(h[v],S),A=C,x=I-m[p]-k,R=I/2-m[p]/2+T,N=Dt(A,R,x),D=!c.arrow&&null!=Mt(i)&&R!==N&&s.reference[p]/2-(R<A?C:k)-m[p]/2<0,P=D?R<A?R-A:R-x:0;return{[f]:d[f]+P,data:{[f]:N,centerOffset:R-N-P,...D&&{alignmentOffset:P}},reset:D}}}),Zn=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Pt(e,t),l={x:n,y:r},h=Vt(i),d=Lt(h);let f=l[d],p=l[h];const m=Pt(a,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const e="y"===d?"height":"width",t=s.reference[d]-s.floating[e]+g.mainAxis,n=s.reference[d]+s.reference[e]-g.mainAxis;f<t?f=t:f>n&&(f=n)}if(u){var y,v;const e="y"===d?"width":"height",t=en.has(Ot(i)),n=s.reference[h]-s.floating[e]+(t&&(null==(y=o.offset)?void 0:y[h])||0)+(t?0:g.crossAxis),r=s.reference[h]+s.reference[e]+(t?0:(null==(v=o.offset)?void 0:v[h])||0)-(t?g.crossAxis:0);p<n?p=n:p>r&&(p=r)}return{[d]:f,[h]:p}}}},er=(e,t,n)=>{const r=new Map,i={platform:qn,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:l,y:h}=Xt(u,r,c),d=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:s}=a[m],{x:g,y:y,data:v,reset:w}=await s({x:l,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});l=null!=g?g:l,h=null!=y?y:h,f={...f,[n]:{...f[n],...v}},w&&p<=50&&(p++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(u=!0===w.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:l,y:h}=Xt(u,d,c))),m=-1)}return{x:l,y:h,placement:d,strategy:i,middlewareData:f}})(e,t,{...i,platform:s})};var tr="undefined"!=typeof document?e.useLayoutEffect:function(){};function nr(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!nr(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!nr(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function rr(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ir(e,t){const n=rr(e);return Math.round(t*n)/n}function sr(t){const n=e.useRef(t);return tr(()=>{n.current=t}),n}const or=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Jn({element:n.current,padding:r}).fn(t):{}:n?Jn({element:n,padding:r}).fn(t):{};var i}}),ar=(e,t)=>({...Gn(e),options:[e,t]}),cr=(e,t)=>({...Wn(e),options:[e,t]}),ur=(e,t)=>({...Zn(e),options:[e,t]}),lr=(e,t)=>({...Qn(e),options:[e,t]}),hr=(e,t)=>({...Xn(e),options:[e,t]}),dr=(e,t)=>({...Yn(e),options:[e,t]}),fr=(e,t)=>({...or(e),options:[e,t]});var pr=e.forwardRef((e,n)=>{const{children:r,width:i=10,height:s=5,...o}=e;return t.jsx(We.svg,{...o,ref:n,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});pr.displayName="Arrow";var mr=pr;function gr(t){const[n,r]=e.useState(void 0);return He(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver(e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let i,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=t.offsetWidth,s=t.offsetHeight;r({width:i,height:s})});return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}r(void 0)},[t]),n}var yr="Popper",[vr,wr]=$e(yr),[br,_r]=vr(yr),Er=n=>{const{__scopePopper:r,children:i}=n,[s,o]=e.useState(null);return t.jsx(br,{scope:r,anchor:s,onAnchorChange:o,children:i})};Er.displayName=yr;var Ir="PopperAnchor",Tr=e.forwardRef((n,r)=>{const{__scopePopper:i,virtualRef:s,...o}=n,a=_r(Ir,i),c=e.useRef(null),u=O(r,c),l=e.useRef(null);return e.useEffect(()=>{const e=l.current;l.current=s?.current||c.current,e!==l.current&&a.onAnchorChange(l.current)}),s?null:t.jsx(We.div,{...o,ref:u})});Tr.displayName=Ir;var Sr="PopperContent",[Cr,kr]=vr(Sr),Ar=e.forwardRef((n,i)=>{const{__scopePopper:s,side:o="bottom",sideOffset:a=0,align:c="center",alignOffset:u=0,arrowPadding:l=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=n,w=_r(Sr,s),[b,_]=e.useState(null),E=O(i,e=>_(e)),[I,T]=e.useState(null),S=gr(I),C=S?.width??0,k=S?.height??0,A=o+("center"!==c?"-"+c:""),x="number"==typeof f?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(d)?d:[d],N=R.length>0,D={padding:x,boundary:R.filter(Dr),altBoundary:N},{refs:P,floatingStyles:M,placement:L,isPositioned:U,middlewareData:F}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:l,open:h}=t,[d,f]=e.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=e.useState(s);nr(p,s)||m(s);const[g,y]=e.useState(null),[v,w]=e.useState(null),b=e.useCallback(e=>{e!==T.current&&(T.current=e,y(e))},[]),_=e.useCallback(e=>{e!==S.current&&(S.current=e,w(e))},[]),E=a||g,I=c||v,T=e.useRef(null),S=e.useRef(null),C=e.useRef(d),k=null!=l,A=sr(l),x=sr(o),R=sr(h),N=e.useCallback(()=>{if(!T.current||!S.current)return;const e={placement:n,strategy:i,middleware:p};x.current&&(e.platform=x.current),er(T.current,S.current,e).then(e=>{const t={...e,isPositioned:!1!==R.current};D.current&&!nr(C.current,t)&&(C.current=t,r.flushSync(()=>{f(t)}))})},[p,n,i,x,R]);tr(()=>{!1===h&&C.current.isPositioned&&(C.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[h]);const D=e.useRef(!1);tr(()=>(D.current=!0,()=>{D.current=!1}),[]),tr(()=>{if(E&&(T.current=E),I&&(S.current=I),E&&I){if(A.current)return A.current(E,I,N);N()}},[E,I,N,A,k]);const P=e.useMemo(()=>({reference:T,floating:S,setReference:b,setFloating:_}),[b,_]),O=e.useMemo(()=>({reference:E,floating:I}),[E,I]),M=e.useMemo(()=>{const e={position:i,left:0,top:0};if(!O.floating)return e;const t=ir(O.floating,d.x),n=ir(O.floating,d.y);return u?{...e,transform:"translate("+t+"px, "+n+"px)",...rr(O.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:t,top:n}},[i,u,O.floating,d.x,d.y]);return e.useMemo(()=>({...d,update:N,refs:P,elements:O,floatingStyles:M}),[d,N,P,O,M])}({strategy:"fixed",placement:A,whileElementsMounted:(...e)=>Kn(...e,{animationFrame:"always"===g}),elements:{reference:w.anchor},middleware:[ar({mainAxis:a+k,alignmentAxis:u}),h&&cr({mainAxis:!0,crossAxis:!1,limiter:"partial"===p?ur():void 0,...D}),h&&lr({...D}),hr({...D,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${r}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}}),I&&fr({element:I,padding:l}),Pr({arrowWidth:C,arrowHeight:k}),m&&dr({strategy:"referenceHidden",...D})]}),[V,j]=Or(L),B=Ze(y);He(()=>{U&&B?.()},[U,B]);const z=F.arrow?.x,$=F.arrow?.y,q=0!==F.arrow?.centerOffset,[H,K]=e.useState();return He(()=>{b&&K(window.getComputedStyle(b).zIndex)},[b]),t.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:U?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:t.jsx(Cr,{scope:s,placedSide:V,onArrowChange:T,arrowX:z,arrowY:$,shouldHideArrow:q,children:t.jsx(We.div,{"data-side":V,"data-align":j,...v,ref:E,style:{...v.style,animation:U?void 0:"none"}})})})});Ar.displayName=Sr;var xr="PopperArrow",Rr={top:"bottom",right:"left",bottom:"top",left:"right"},Nr=e.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=kr(xr,r),o=Rr[s.placedSide];return t.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:t.jsx(mr,{...i,ref:n,style:{...i.style,display:"block"}})})});function Dr(e){return null!==e}Nr.displayName=xr;var Pr=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=0!==i.arrow?.centerOffset,o=s?0:e.arrowWidth,a=s?0:e.arrowHeight,[c,u]=Or(n),l={start:"0%",center:"50%",end:"100%"}[u],h=(i.arrow?.x??0)+o/2,d=(i.arrow?.y??0)+a/2;let f="",p="";return"bottom"===c?(f=s?l:`${h}px`,p=-a+"px"):"top"===c?(f=s?l:`${h}px`,p=`${r.floating.height+a}px`):"right"===c?(f=-a+"px",p=s?l:`${d}px`):"left"===c&&(f=`${r.floating.width+a}px`,p=s?l:`${d}px`),{data:{x:f,y:p}}}});function Or(e){const[t,n="center"]=e.split("-");return[t,n]}var Mr=Er,Lr=Tr,Ur=Ar,Fr=Nr,Vr=e.forwardRef((n,r)=>{const{container:i,...o}=n,[a,c]=e.useState(!1);He(()=>c(!0),[]);const u=i||a&&globalThis?.document?.body;return u?s.createPortal(t.jsx(We.div,{...o,ref:r}),u):null});Vr.displayName="Portal";var jr=t=>{const{present:n,children:r}=t,i=function(t){const[n,r]=e.useState(),i=e.useRef(null),s=e.useRef(t),o=e.useRef("none"),a=t?"mounted":"unmounted",[c,u]=function(t,n){return e.useReducer((e,t)=>n[e][t]??e,t)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect(()=>{const e=Br(i.current);o.current="mounted"===c?e:"none"},[c]),He(()=>{const e=i.current,n=s.current;if(n!==t){const r=o.current,i=Br(e);if(t)u("MOUNT");else if("none"===i||"none"===e?.display)u("UNMOUNT");else{u(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=t}},[t,u]),He(()=>{if(n){let e;const t=n.ownerDocument.defaultView??window,r=r=>{const o=Br(i.current).includes(CSS.escape(r.animationName));if(r.target===n&&o&&(u("ANIMATION_END"),!s.current)){const r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},a=e=>{e.target===n&&(o.current=Br(i.current))};return n.addEventListener("animationstart",a),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",a),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:e.useCallback(e=>{i.current=e?getComputedStyle(e):null,r(e)},[])}}(n),s="function"==typeof r?r({present:i.isPresent}):e.Children.only(r),o=O(i.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof r||i.isPresent?e.cloneElement(s,{ref:o}):null};function Br(e){return e?.animationName||"none"}jr.displayName="Presence";var zr="rovingFocusGroup.onEntryFocus",$r={bubbles:!1,cancelable:!0},qr="RovingFocusGroup",[Hr,Kr,Gr]=Xe(qr),[Wr,Qr]=$e(qr,[Gr]),[Xr,Yr]=Wr(qr),Jr=e.forwardRef((e,n)=>t.jsx(Hr.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Hr.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Zr,{...e,ref:n})})}));Jr.displayName=qr;var Zr=e.forwardRef((n,r)=>{const{__scopeRovingFocusGroup:i,orientation:s,loop:o=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:l,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...f}=n,p=e.useRef(null),m=O(r,p),g=Je(a),[y,v]=Ge({prop:c,defaultProp:u??null,onChange:l,caller:qr}),[w,b]=e.useState(!1),_=Ze(h),E=Kr(i),I=e.useRef(!1),[T,S]=e.useState(0);return e.useEffect(()=>{const e=p.current;if(e)return e.addEventListener(zr,_),()=>e.removeEventListener(zr,_)},[_]),t.jsx(Xr,{scope:i,orientation:s,dir:g,loop:o,currentTabStopId:y,onItemFocus:e.useCallback(e=>v(e),[v]),onItemShiftTab:e.useCallback(()=>b(!0),[]),onFocusableItemAdd:e.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>S(e=>e-1),[]),children:t.jsx(We.div,{tabIndex:w||0===T?-1:0,"data-orientation":s,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:Be(n.onMouseDown,()=>{I.current=!0}),onFocus:Be(n.onFocus,e=>{const t=!I.current;if(e.target===e.currentTarget&&t&&!w){const t=new CustomEvent(zr,$r);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=E().filter(e=>e.focusable);ri([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),d)}}I.current=!1}),onBlur:Be(n.onBlur,()=>b(!1))})})}),ei="RovingFocusGroupItem",ti=e.forwardRef((n,r)=>{const{__scopeRovingFocusGroup:i,focusable:s=!0,active:o=!1,tabStopId:a,children:c,...u}=n,l=It(),h=a||l,d=Yr(ei,i),f=d.currentTabStopId===h,p=Kr(i),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:y}=d;return e.useEffect(()=>{if(s)return m(),()=>g()},[s,m,g]),t.jsx(Hr.ItemSlot,{scope:i,id:h,focusable:s,active:o,children:t.jsx(We.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...u,ref:r,onMouseDown:Be(n.onMouseDown,e=>{s?d.onItemFocus(h):e.preventDefault()}),onFocus:Be(n.onFocus,()=>d.onItemFocus(h)),onKeyDown:Be(n.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:ni[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=d.loop?(r=s+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(s+1)}setTimeout(()=>ri(i))}var n,r}),children:"function"==typeof c?c({isCurrentTabStop:f,hasTabStop:null!=y}):c})})});ti.displayName=ei;var ni={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ri(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var ii=Jr,si=ti,oi=new WeakMap,ai=new WeakMap,ci={},ui=0,li=function(e){return e&&(e.host||li(e.parentNode))},hi=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=li(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);ci[n]||(ci[n]=new WeakMap);var s=ci[n],o=[],a=new Set,c=new Set(i),u=function(e){e&&!a.has(e)&&(a.add(e),u(e.parentNode))};i.forEach(u);var l=function(e){e&&!c.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))l(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,c=(oi.get(e)||0)+1,u=(s.get(e)||0)+1;oi.set(e,c),s.set(e,u),o.push(e),1===c&&i&&ai.set(e,!0),1===u&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(h){}})};return l(t),a.clear(),ui++,function(){o.forEach(function(e){var t=oi.get(e)-1,i=s.get(e)-1;oi.set(e,t),s.set(e,i),t||(ai.has(e)||e.removeAttribute(r),ai.delete(e)),i||e.removeAttribute(n)}),--ui||(oi=new WeakMap,oi=new WeakMap,ai=new WeakMap,ci={})}},di=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),hi(r,i,n,"aria-hidden")):function(){return null}},fi=function(){return fi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fi.apply(this,arguments)};function pi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var mi="right-scroll-bar-position",gi="width-before-scroll-bar";function yi(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var vi="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,wi=new WeakMap;function bi(t,n){var r,i,s,o=(r=null,i=function(e){return t.forEach(function(t){return yi(t,e)})},(s=e.useState(function(){return{value:r,callback:i,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0]).callback=i,s.facade);return vi(function(){var e=wi.get(o);if(e){var n=new Set(e),r=new Set(t),i=o.current;n.forEach(function(e){r.has(e)||yi(e,null)}),r.forEach(function(e){n.has(e)||yi(e,i)})}wi.set(o,t)},[t]),o}function _i(e){return e}var Ei=function(t){var n=t.sideCar,r=pi(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return e.createElement(i,fi({},r))};Ei.isSideCarExport=!0;var Ii=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=_i);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=fi({async:!0,ssr:!1},e),t}(),Ti=function(){},Si=e.forwardRef(function(t,n){var r=e.useRef(null),i=e.useState({onScrollCapture:Ti,onWheelCapture:Ti,onTouchMoveCapture:Ti}),s=i[0],o=i[1],a=t.forwardProps,c=t.children,u=t.className,l=t.removeScrollBar,h=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,w=void 0===v?"div":v,b=t.gapMode,_=pi(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,I=bi([r,n]),T=fi(fi({},_),s);return e.createElement(e.Fragment,null,h&&e.createElement(E,{sideCar:Ii,removeScrollBar:l,shards:d,noRelative:p,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!y,lockRef:r,gapMode:b}),a?e.cloneElement(e.Children.only(c),fi(fi({},T),{ref:I})):e.createElement(w,fi({},T,{className:u,ref:I}),c))});Si.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Si.classNames={fullWidth:gi,zeroRight:mi};function Ci(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var ki=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Ci())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ai=function(){var t,n=(t=ki(),function(n,r){e.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])});return function(e){var t=e.styles,r=e.dynamic;return n(t,r),null}},xi={left:0,top:0,right:0,gap:0},Ri=function(e){return parseInt(e||"",10)||0},Ni=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return xi;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Ri(n),Ri(r),Ri(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Di=Ai(),Pi="data-scroll-locked",Oi=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body[").concat(Pi,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(mi," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(gi," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(mi," .").concat(mi," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(gi," .").concat(gi," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Pi,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Mi=function(){var e=parseInt(document.body.getAttribute(Pi)||"0",10);return isFinite(e)?e:0},Li=function(t){var n=t.noRelative,r=t.noImportant,i=t.gapMode,s=void 0===i?"margin":i;e.useEffect(function(){return document.body.setAttribute(Pi,(Mi()+1).toString()),function(){var e=Mi()-1;e<=0?document.body.removeAttribute(Pi):document.body.setAttribute(Pi,e.toString())}},[]);var o=e.useMemo(function(){return Ni(s)},[s]);return e.createElement(Di,{styles:Oi(o,!n,s,r?"":"!important")})},Ui=!1;if("undefined"!=typeof window)try{var Fi=Object.defineProperty({},"passive",{get:function(){return Ui=!0,!0}});window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch(uT){Ui=!1}var Vi=!!Ui&&{passive:!1},ji=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Bi=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),zi(e,r)){var i=$i(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zi=function(e,t){return"v"===e?function(e){return ji(e,"overflowY")}(t):function(e){return ji(e,"overflowX")}(t)},$i=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},qi=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Hi=function(e){return[e.deltaX,e.deltaY]},Ki=function(e){return e&&"current"in e?e.current:e},Gi=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Wi=0,Qi=[];function Xi(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Yi=(Ji=function(t){var n=e.useRef([]),r=e.useRef([0,0]),i=e.useRef(),s=e.useState(Wi++)[0],o=e.useState(Ai)[0],a=e.useRef(t);e.useEffect(function(){a.current=t},[t]),e.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var e=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([t.lockRef.current],(t.shards||[]).map(Ki),!0).filter(Boolean);return e.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),e.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var c=e.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var n,s=qi(e),o=r.current,c="deltaX"in e?e.deltaX:o[0]-s[0],u="deltaY"in e?e.deltaY:o[1]-s[1],l=e.target,h=Math.abs(c)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===h&&"range"===l.type)return!1;var d=Bi(h,l);if(!d)return!0;if(d?n=h:(n="v"===h?"h":"v",d=Bi(h,l)),!d)return!1;if(!i.current&&"changedTouches"in e&&(c||u)&&(i.current=n),!n)return!0;var f=i.current||n;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,a=t.contains(o),c=!1,u=s>0,l=0,h=0;do{if(!o)break;var d=$i(e,o),f=d[0],p=d[1]-d[2]-i*f;(f||p)&&zi(e,o)&&(l+=p,h+=f);var m=o.parentNode;o=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!a&&o!==document.body||a&&(t.contains(o)||t===o));return(u&&Math.abs(l)<1||!u&&Math.abs(h)<1)&&(c=!0),c}(f,t,e,"h"===f?c:u)},[]),u=e.useCallback(function(e){var t=e;if(Qi.length&&Qi[Qi.length-1]===o){var r="deltaY"in t?Hi(t):qi(t),i=n.current.filter(function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&(n=e.delta,i=r,n[0]===i[0]&&n[1]===i[1]);var n,i})[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var s=(a.current.shards||[]).map(Ki).filter(Boolean).filter(function(e){return e.contains(t.target)});(s.length>0?c(t,s[0]):!a.current.noIsolation)&&t.cancelable&&t.preventDefault()}}},[]),l=e.useCallback(function(e,t,r,i){var s={name:e,delta:t,target:r,should:i,shadowParent:Xi(r)};n.current.push(s),setTimeout(function(){n.current=n.current.filter(function(e){return e!==s})},1)},[]),h=e.useCallback(function(e){r.current=qi(e),i.current=void 0},[]),d=e.useCallback(function(e){l(e.type,Hi(e),e.target,c(e,t.lockRef.current))},[]),f=e.useCallback(function(e){l(e.type,qi(e),e.target,c(e,t.lockRef.current))},[]);e.useEffect(function(){return Qi.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,Vi),document.addEventListener("touchmove",u,Vi),document.addEventListener("touchstart",h,Vi),function(){Qi=Qi.filter(function(e){return e!==o}),document.removeEventListener("wheel",u,Vi),document.removeEventListener("touchmove",u,Vi),document.removeEventListener("touchstart",h,Vi)}},[]);var p=t.removeScrollBar,m=t.inert;return e.createElement(e.Fragment,null,m?e.createElement(o,{styles:Gi(s)}):null,p?e.createElement(Li,{noRelative:t.noRelative,gapMode:t.gapMode}):null)},Ii.useMedium(Ji),Ei);var Ji,Zi=e.forwardRef(function(t,n){return e.createElement(Si,fi({},t,{ref:n,sideCar:Yi}))});Zi.classNames=Si.classNames;var es=["Enter"," "],ts=["ArrowUp","PageDown","End"],ns=["ArrowDown","PageUp","Home",...ts],rs={ltr:[...es,"ArrowRight"],rtl:[...es,"ArrowLeft"]},is={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ss="Menu",[os,as,cs]=Xe(ss),[us,ls]=$e(ss,[cs,wr,Qr]),hs=wr(),ds=Qr(),[fs,ps]=us(ss),[ms,gs]=us(ss),ys=n=>{const{__scopeMenu:r,open:i=!1,children:s,dir:o,onOpenChange:a,modal:c=!0}=n,u=hs(r),[l,h]=e.useState(null),d=e.useRef(!1),f=Ze(a),p=Je(o);return e.useEffect(()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),t.jsx(Mr,{...u,children:t.jsx(fs,{scope:r,open:i,onOpenChange:f,content:l,onContentChange:h,children:t.jsx(ms,{scope:r,onClose:e.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:c,children:s})})})};ys.displayName=ss;var vs=e.forwardRef((e,n)=>{const{__scopeMenu:r,...i}=e,s=hs(r);return t.jsx(Lr,{...s,...i,ref:n})});vs.displayName="MenuAnchor";var ws="MenuPortal",[bs,_s]=us(ws,{forceMount:void 0}),Es=e=>{const{__scopeMenu:n,forceMount:r,children:i,container:s}=e,o=ps(ws,n);return t.jsx(bs,{scope:n,forceMount:r,children:t.jsx(jr,{present:r||o.open,children:t.jsx(Vr,{asChild:!0,container:s,children:i})})})};Es.displayName=ws;var Is="MenuContent",[Ts,Ss]=us(Is),Cs=e.forwardRef((e,n)=>{const r=_s(Is,e.__scopeMenu),{forceMount:i=r.forceMount,...s}=e,o=ps(Is,e.__scopeMenu),a=gs(Is,e.__scopeMenu);return t.jsx(os.Provider,{scope:e.__scopeMenu,children:t.jsx(jr,{present:i||o.open,children:t.jsx(os.Slot,{scope:e.__scopeMenu,children:a.modal?t.jsx(ks,{...s,ref:n}):t.jsx(As,{...s,ref:n})})})})}),ks=e.forwardRef((n,r)=>{const i=ps(Is,n.__scopeMenu),s=e.useRef(null),o=O(r,s);return e.useEffect(()=>{const e=s.current;if(e)return di(e)},[]),t.jsx(Rs,{...n,ref:o,trapFocus:i.open,disableOutsidePointerEvents:i.open,disableOutsideScroll:!0,onFocusOutside:Be(n.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>i.onOpenChange(!1)})}),As=e.forwardRef((e,n)=>{const r=ps(Is,e.__scopeMenu);return t.jsx(Rs,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),xs=M("MenuContent.ScrollLock"),Rs=e.forwardRef((n,r)=>{const{__scopeMenu:i,loop:s=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:l,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:g,...y}=n,v=ps(Is,i),w=gs(Is,i),b=hs(i),_=ds(i),E=as(i),[I,T]=e.useState(null),S=e.useRef(null),C=O(r,S,v.onContentChange),k=e.useRef(0),A=e.useRef(""),x=e.useRef(0),R=e.useRef(null),N=e.useRef("right"),D=e.useRef(0),P=g?Zi:e.Fragment,M=g?{as:xs,allowPinchZoom:!0}:void 0,L=e=>{const t=A.current+e,n=E().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,s=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,s=n?e.indexOf(n):-1;let o=(a=e,c=Math.max(s,0),a.map((e,t)=>a[(c+t)%a.length]));var a,c;1===i.length&&(o=o.filter(e=>e!==n));const u=o.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}(n.map(e=>e.textValue),t,i),o=n.find(e=>e.textValue===s)?.ref.current;!function e(t){A.current=t,window.clearTimeout(k.current),""!==t&&(k.current=window.setTimeout(()=>e(""),1e3))}(t),o&&setTimeout(()=>o.focus())};e.useEffect(()=>()=>window.clearTimeout(k.current),[]),ut();const U=e.useCallback(e=>N.current===R.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],c=e.x,u=e.y,l=a.x,h=a.y;u>r!=h>r&&n<(l-c)*(r-u)/(h-u)+c&&(i=!i)}return i}(n,t)}(e,R.current?.area),[]);return t.jsx(Ts,{scope:i,searchRef:A,onItemEnter:e.useCallback(e=>{U(e)&&e.preventDefault()},[U]),onItemLeave:e.useCallback(e=>{U(e)||(S.current?.focus(),T(null))},[U]),onTriggerLeave:e.useCallback(e=>{U(e)&&e.preventDefault()},[U]),pointerGraceTimerRef:x,onPointerGraceIntentChange:e.useCallback(e=>{R.current=e},[]),children:t.jsx(P,{...M,children:t.jsx(pt,{asChild:!0,trapped:o,onMountAutoFocus:Be(a,e=>{e.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:t.jsx(st,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:t.jsx(ii,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:I,onCurrentTabStopIdChange:T,onEntryFocus:Be(l,e=>{w.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(Ur,{role:"menu","aria-orientation":"vertical","data-state":no(v.open),"data-radix-menu-content":"",dir:w.dir,...b,...y,ref:C,style:{outline:"none",...y.style},onKeyDown:Be(y.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&L(e.key));const i=S.current;if(e.target!==i)return;if(!ns.includes(e.key))return;e.preventDefault();const s=E().filter(e=>!e.disabled).map(e=>e.ref.current);ts.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)}),onBlur:Be(n.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(k.current),A.current="")}),onPointerMove:Be(n.onPointerMove,so(e=>{const t=e.target,n=D.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>D.current?"right":"left";N.current=t,D.current=e.clientX}}))})})})})})})});Cs.displayName=Is;var Ns=e.forwardRef((e,n)=>{const{__scopeMenu:r,...i}=e;return t.jsx(We.div,{role:"group",...i,ref:n})});Ns.displayName="MenuGroup";var Ds=e.forwardRef((e,n)=>{const{__scopeMenu:r,...i}=e;return t.jsx(We.div,{...i,ref:n})});Ds.displayName="MenuLabel";var Ps="MenuItem",Os="menu.itemSelect",Ms=e.forwardRef((n,r)=>{const{disabled:i=!1,onSelect:s,...o}=n,a=e.useRef(null),c=gs(Ps,n.__scopeMenu),u=Ss(Ps,n.__scopeMenu),l=O(r,a),h=e.useRef(!1);return t.jsx(Ls,{...o,ref:l,disabled:i,onClick:Be(n.onClick,()=>{const e=a.current;if(!i&&e){const t=new CustomEvent(Os,{bubbles:!0,cancelable:!0});e.addEventListener(Os,e=>s?.(e),{once:!0}),Qe(e,t),t.defaultPrevented?h.current=!1:c.onClose()}}),onPointerDown:e=>{n.onPointerDown?.(e),h.current=!0},onPointerUp:Be(n.onPointerUp,e=>{h.current||e.currentTarget?.click()}),onKeyDown:Be(n.onKeyDown,e=>{const t=""!==u.searchRef.current;i||t&&" "===e.key||es.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Ms.displayName=Ps;var Ls=e.forwardRef((n,r)=>{const{__scopeMenu:i,disabled:s=!1,textValue:o,...a}=n,c=Ss(Ps,i),u=ds(i),l=e.useRef(null),h=O(r,l),[d,f]=e.useState(!1),[p,m]=e.useState("");return e.useEffect(()=>{const e=l.current;e&&m((e.textContent??"").trim())},[a.children]),t.jsx(os.ItemSlot,{scope:i,disabled:s,textValue:o??p,children:t.jsx(si,{asChild:!0,...u,focusable:!s,children:t.jsx(We.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:h,onPointerMove:Be(n.onPointerMove,so(e=>{if(s)c.onItemLeave(e);else if(c.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Be(n.onPointerLeave,so(e=>c.onItemLeave(e))),onFocus:Be(n.onFocus,()=>f(!0)),onBlur:Be(n.onBlur,()=>f(!1))})})})}),Us=e.forwardRef((e,n)=>{const{checked:r=!1,onCheckedChange:i,...s}=e;return t.jsx(Hs,{scope:e.__scopeMenu,checked:r,children:t.jsx(Ms,{role:"menuitemcheckbox","aria-checked":ro(r)?"mixed":r,...s,ref:n,"data-state":io(r),onSelect:Be(s.onSelect,()=>i?.(!!ro(r)||!r),{checkForDefaultPrevented:!1})})})});Us.displayName="MenuCheckboxItem";var Fs="MenuRadioGroup",[Vs,js]=us(Fs,{value:void 0,onValueChange:()=>{}}),Bs=e.forwardRef((e,n)=>{const{value:r,onValueChange:i,...s}=e,o=Ze(i);return t.jsx(Vs,{scope:e.__scopeMenu,value:r,onValueChange:o,children:t.jsx(Ns,{...s,ref:n})})});Bs.displayName=Fs;var zs="MenuRadioItem",$s=e.forwardRef((e,n)=>{const{value:r,...i}=e,s=js(zs,e.__scopeMenu),o=r===s.value;return t.jsx(Hs,{scope:e.__scopeMenu,checked:o,children:t.jsx(Ms,{role:"menuitemradio","aria-checked":o,...i,ref:n,"data-state":io(o),onSelect:Be(i.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});$s.displayName=zs;var qs="MenuItemIndicator",[Hs,Ks]=us(qs,{checked:!1}),Gs=e.forwardRef((e,n)=>{const{__scopeMenu:r,forceMount:i,...s}=e,o=Ks(qs,r);return t.jsx(jr,{present:i||ro(o.checked)||!0===o.checked,children:t.jsx(We.span,{...s,ref:n,"data-state":io(o.checked)})})});Gs.displayName=qs;var Ws=e.forwardRef((e,n)=>{const{__scopeMenu:r,...i}=e;return t.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...i,ref:n})});Ws.displayName="MenuSeparator";var Qs=e.forwardRef((e,n)=>{const{__scopeMenu:r,...i}=e,s=hs(r);return t.jsx(Fr,{...s,...i,ref:n})});Qs.displayName="MenuArrow";var[Xs,Ys]=us("MenuSub"),Js="MenuSubTrigger",Zs=e.forwardRef((n,r)=>{const i=ps(Js,n.__scopeMenu),s=gs(Js,n.__scopeMenu),o=Ys(Js,n.__scopeMenu),a=Ss(Js,n.__scopeMenu),c=e.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:l}=a,h={__scopeMenu:n.__scopeMenu},d=e.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return e.useEffect(()=>d,[d]),e.useEffect(()=>{const e=u.current;return()=>{window.clearTimeout(e),l(null)}},[u,l]),t.jsx(vs,{asChild:!0,...h,children:t.jsx(Ls,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":o.contentId,"data-state":no(i.open),...n,ref:P(r,o.onTriggerChange),onClick:e=>{n.onClick?.(e),n.disabled||e.defaultPrevented||(e.currentTarget.focus(),i.open||i.onOpenChange(!0))},onPointerMove:Be(n.onPointerMove,so(e=>{a.onItemEnter(e),e.defaultPrevented||n.disabled||i.open||c.current||(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{i.onOpenChange(!0),d()},100))})),onPointerLeave:Be(n.onPointerLeave,so(e=>{d();const t=i.content?.getBoundingClientRect();if(t){const n=i.content?.dataset.side,r="right"===n,s=r?-5:5,o=t[r?"left":"right"],c=t[r?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:o,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:o,y:t.bottom}],side:n}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Be(n.onKeyDown,e=>{const t=""!==a.searchRef.current;n.disabled||t&&" "===e.key||rs[s.dir].includes(e.key)&&(i.onOpenChange(!0),i.content?.focus(),e.preventDefault())})})})});Zs.displayName=Js;var eo="MenuSubContent",to=e.forwardRef((n,r)=>{const i=_s(Is,n.__scopeMenu),{forceMount:s=i.forceMount,...o}=n,a=ps(Is,n.__scopeMenu),c=gs(Is,n.__scopeMenu),u=Ys(eo,n.__scopeMenu),l=e.useRef(null),h=O(r,l);return t.jsx(os.Provider,{scope:n.__scopeMenu,children:t.jsx(jr,{present:s||a.open,children:t.jsx(os.Slot,{scope:n.__scopeMenu,children:t.jsx(Rs,{id:u.contentId,"aria-labelledby":u.triggerId,...o,ref:h,align:"start",side:"rtl"===c.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{c.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Be(n.onFocusOutside,e=>{e.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Be(n.onEscapeKeyDown,e=>{c.onClose(),e.preventDefault()}),onKeyDown:Be(n.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),n=is[c.dir].includes(e.key);t&&n&&(a.onOpenChange(!1),u.trigger?.focus(),e.preventDefault())})})})})})});function no(e){return e?"open":"closed"}function ro(e){return"indeterminate"===e}function io(e){return ro(e)?"indeterminate":e?"checked":"unchecked"}function so(e){return t=>"mouse"===t.pointerType?e(t):void 0}to.displayName=eo;var oo=ys,ao=vs,co=Es,uo=Cs,lo=Ns,ho=Ds,fo=Ms,po=Us,mo=Bs,go=$s,yo=Gs,vo=Ws,wo=Qs,bo=Zs,_o=to,Eo="DropdownMenu",[Io,To]=$e(Eo,[ls]),So=ls(),[Co,ko]=Io(Eo),Ao=n=>{const{__scopeDropdownMenu:r,children:i,dir:s,open:o,defaultOpen:a,onOpenChange:c,modal:u=!0}=n,l=So(r),h=e.useRef(null),[d,f]=Ge({prop:o,defaultProp:a??!1,onChange:c,caller:Eo});return t.jsx(Co,{scope:r,triggerId:It(),triggerRef:h,contentId:It(),open:d,onOpenChange:f,onOpenToggle:e.useCallback(()=>f(e=>!e),[f]),modal:u,children:t.jsx(oo,{...l,open:d,onOpenChange:f,dir:s,modal:u,children:i})})};Ao.displayName=Eo;var xo="DropdownMenuTrigger",Ro=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,disabled:i=!1,...s}=e,o=ko(xo,r),a=So(r);return t.jsx(ao,{asChild:!0,...a,children:t.jsx(We.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...s,ref:P(n,o.triggerRef),onPointerDown:Be(e.onPointerDown,e=>{i||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:Be(e.onKeyDown,e=>{i||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Ro.displayName=xo;var No=e=>{const{__scopeDropdownMenu:n,...r}=e,i=So(n);return t.jsx(co,{...i,...r})};No.displayName="DropdownMenuPortal";var Do="DropdownMenuContent",Po=e.forwardRef((n,r)=>{const{__scopeDropdownMenu:i,...s}=n,o=ko(Do,i),a=So(i),c=e.useRef(!1);return t.jsx(uo,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...s,ref:r,onCloseAutoFocus:Be(n.onCloseAutoFocus,e=>{c.current||o.triggerRef.current?.focus(),c.current=!1,e.preventDefault()}),onInteractOutside:Be(n.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.modal&&!r||(c.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Po.displayName=Do;e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(lo,{...s,...i,ref:n})}).displayName="DropdownMenuGroup";var Oo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(ho,{...s,...i,ref:n})});Oo.displayName="DropdownMenuLabel";var Mo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(fo,{...s,...i,ref:n})});Mo.displayName="DropdownMenuItem";var Lo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(po,{...s,...i,ref:n})});Lo.displayName="DropdownMenuCheckboxItem";e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(mo,{...s,...i,ref:n})}).displayName="DropdownMenuRadioGroup";var Uo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(go,{...s,...i,ref:n})});Uo.displayName="DropdownMenuRadioItem";var Fo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(yo,{...s,...i,ref:n})});Fo.displayName="DropdownMenuItemIndicator";var Vo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(vo,{...s,...i,ref:n})});Vo.displayName="DropdownMenuSeparator";e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(wo,{...s,...i,ref:n})}).displayName="DropdownMenuArrow";var jo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(bo,{...s,...i,ref:n})});jo.displayName="DropdownMenuSubTrigger";var Bo=e.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...i}=e,s=So(r);return t.jsx(_o,{...s,...i,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Bo.displayName="DropdownMenuSubContent";var zo=No,$o=Po,qo=Oo,Ho=Mo,Ko=Lo,Go=Uo,Wo=Fo,Qo=Vo,Xo=jo,Yo=Bo;const Jo=Ao,Zo=Ro;e.forwardRef(({className:e,inset:n,children:r,...i},s)=>t.jsxs(Xo,{ref:s,className:Fe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",e),...i,children:[r,t.jsx(p,{className:"ml-auto h-4 w-4"})]})).displayName=Xo.displayName;e.forwardRef(({className:e,...n},r)=>t.jsx(Yo,{ref:r,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})).displayName=Yo.displayName;const ea=e.forwardRef(({className:e,sideOffset:n=4,...r},i)=>t.jsx(zo,{children:t.jsx($o,{ref:i,sideOffset:n,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ea.displayName=$o.displayName;const ta=e.forwardRef(({className:e,inset:n,...r},i)=>t.jsx(Ho,{ref:i,className:Fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",e),...r}));ta.displayName=Ho.displayName;const na=e.forwardRef(({className:e,children:n,checked:r,...i},s)=>t.jsxs(Ko,{ref:s,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...i,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Wo,{children:t.jsx(d,{className:"h-4 w-4"})})}),n]}));na.displayName=Ko.displayName;e.forwardRef(({className:e,children:n,...r},i)=>t.jsxs(Go,{ref:i,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Wo,{children:t.jsx(g,{className:"h-2 w-2 fill-current"})})}),n]})).displayName=Go.displayName;const ra=e.forwardRef(({className:e,inset:n,...r},i)=>t.jsx(qo,{ref:i,className:Fe("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...r}));ra.displayName=qo.displayName;const ia=e.forwardRef(({className:e,...n},r)=>t.jsx(Qo,{ref:r,className:Fe("-mx-1 my-1 h-px bg-muted",e),...n}));ia.displayName=Qo.displayName;const sa=H("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function oa({className:e,variant:n,...r}){return t.jsx("div",{className:Fe(sa({variant:n}),e),...r})}const aa=e.forwardRef(({className:e,...n},r)=>t.jsx("div",{ref:r,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...n}));aa.displayName="Card";const ca=e.forwardRef(({className:e,...n},r)=>t.jsx("div",{ref:r,className:Fe("flex flex-col space-y-1.5 p-6",e),...n}));ca.displayName="CardHeader";const ua=e.forwardRef(({className:e,...n},r)=>t.jsx("h3",{ref:r,className:Fe("text-2xl font-semibold leading-none tracking-tight",e),...n}));ua.displayName="CardTitle";const la=e.forwardRef(({className:e,...n},r)=>t.jsx("p",{ref:r,className:Fe("text-sm text-muted-foreground",e),...n}));la.displayName="CardDescription";const ha=e.forwardRef(({className:e,...n},r)=>t.jsx("div",{ref:r,className:Fe("p-6 pt-0",e),...n}));ha.displayName="CardContent";e.forwardRef(({className:e,...n},r)=>t.jsx("div",{ref:r,className:Fe("flex items-center p-6 pt-0",e),...n})).displayName="CardFooter";var da={};const fa=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},pa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fa(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ma;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ma extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ga=function(e){return function(e){const t=fa(e);return pa.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ya=function(e){try{return pa.decodeString(e,!0)}catch(t){}return null};const va=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wa=()=>{try{return va()||(()=>{if("undefined"==typeof process)return;const e=da.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ya(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},ba=e=>wa()?.emulatorHosts?.[e],_a=e=>{const t=ba(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ea=()=>wa()?.config,Ia=e=>wa()?.[`_${e}`];class Ta{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Sa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ca(e){return(await fetch(e,{credentials:"include"})).ok}function ka(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ga(JSON.stringify({alg:"none",type:"JWT"})),ga(JSON.stringify(s)),""].join(".")}const Aa={};let xa=!1;function Ra(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Sa(window.location.host)||Aa[e]===t||Aa[e]||xa)return;function n(e){return`__firebase__banner__${e}`}Aa[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Aa))Aa[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{xa=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),c=document.getElementById(a)||document.createElement("a"),u=n("preprendIcon"),l=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(l,u),t.append(l,o,c,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",l.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(l.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Na(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Da(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Pa(){return!function(){const e=wa()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oa(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Ma(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}class La extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,La.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ua.prototype.create)}}class Ua{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Fa,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new La(r,o,n)}}const Fa=/\{\$([^}]+)}/g;function Va(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ja(n)&&ja(s)){if(!Va(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ja(e){return null!==e&&"object"==typeof e}function Ba(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function za(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function $a(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class qa{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ha),void 0===r.error&&(r.error=Ha),void 0===r.complete&&(r.complete=Ha);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ha(){}function Ka(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Ga(e){return e&&e._delegate?e._delegate:e}class Wa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qa="[DEFAULT]";class Xa{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ta;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Qa?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ya{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xa(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ja,Za;(Za=Ja||(Ja={}))[Za.DEBUG=0]="DEBUG",Za[Za.VERBOSE=1]="VERBOSE",Za[Za.INFO=2]="INFO",Za[Za.WARN=3]="WARN",Za[Za.ERROR=4]="ERROR",Za[Za.SILENT=5]="SILENT";const ec={debug:Ja.DEBUG,verbose:Ja.VERBOSE,info:Ja.INFO,warn:Ja.WARN,error:Ja.ERROR,silent:Ja.SILENT},tc=Ja.INFO,nc={[Ja.DEBUG]:"log",[Ja.VERBOSE]:"log",[Ja.INFO]:"info",[Ja.WARN]:"warn",[Ja.ERROR]:"error"},rc=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!nc[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ic{constructor(e){this.name=e,this._logLevel=tc,this._logHandler=rc,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ja))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ec[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ja.DEBUG,...e),this._logHandler(this,Ja.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ja.VERBOSE,...e),this._logHandler(this,Ja.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ja.INFO,...e),this._logHandler(this,Ja.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ja.WARN,...e),this._logHandler(this,Ja.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ja.ERROR,...e),this._logHandler(this,Ja.ERROR,...e)}}let sc,oc;const ac=new WeakMap,cc=new WeakMap,uc=new WeakMap,lc=new WeakMap,hc=new WeakMap;let dc={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cc.get(e);if("objectStoreNames"===t)return e.objectStoreNames||uc.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mc(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function fc(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oc||(oc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(gc(this),t),mc(ac.get(this))}:function(...t){return mc(e.apply(gc(this),t))}:function(t,...n){const r=e.call(gc(this),t,...n);return uc.set(r,t.sort?t.sort():[t]),mc(r)}}function pc(e){return"function"==typeof e?fc(e):(e instanceof IDBTransaction&&function(e){if(cc.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});cc.set(e,t)}(e),t=e,(sc||(sc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,dc):e);var t}function mc(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(mc(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ac.set(t,e)}).catch(()=>{}),hc.set(t,e),t}(e);if(lc.has(e))return lc.get(e);const t=pc(e);return t!==e&&(lc.set(e,t),hc.set(t,e)),t}const gc=e=>hc.get(e);function yc(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=mc(o);return r&&o.addEventListener("upgradeneeded",e=>{r(mc(o.result),e.oldVersion,e.newVersion,mc(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}const vc=["get","getKey","getAll","getAllKeys","count"],wc=["put","add","delete","clear"],bc=new Map;function _c(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(bc.get(t))return bc.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=wc.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vc.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return bc.set(t,s),s}dc=(e=>({...e,get:(t,n,r)=>_c(t,n)||e.get(t,n,r),has:(t,n)=>!!_c(t,n)||e.has(t,n)}))(dc);class Ec{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Ic="@firebase/app",Tc="0.14.1",Sc=new ic("@firebase/app"),Cc="@firebase/app-compat",kc="@firebase/analytics-compat",Ac="@firebase/analytics",xc="@firebase/app-check-compat",Rc="@firebase/app-check",Nc="@firebase/auth",Dc="@firebase/auth-compat",Pc="@firebase/database",Oc="@firebase/data-connect",Mc="@firebase/database-compat",Lc="@firebase/functions",Uc="@firebase/functions-compat",Fc="@firebase/installations",Vc="@firebase/installations-compat",jc="@firebase/messaging",Bc="@firebase/messaging-compat",zc="@firebase/performance",$c="@firebase/performance-compat",qc="@firebase/remote-config",Hc="@firebase/remote-config-compat",Kc="@firebase/storage",Gc="@firebase/storage-compat",Wc="@firebase/firestore",Qc="@firebase/ai",Xc="@firebase/firestore-compat",Yc="firebase",Jc="[DEFAULT]",Zc={[Ic]:"fire-core",[Cc]:"fire-core-compat",[Ac]:"fire-analytics",[kc]:"fire-analytics-compat",[Rc]:"fire-app-check",[xc]:"fire-app-check-compat",[Nc]:"fire-auth",[Dc]:"fire-auth-compat",[Pc]:"fire-rtdb",[Oc]:"fire-data-connect",[Mc]:"fire-rtdb-compat",[Lc]:"fire-fn",[Uc]:"fire-fn-compat",[Fc]:"fire-iid",[Vc]:"fire-iid-compat",[jc]:"fire-fcm",[Bc]:"fire-fcm-compat",[zc]:"fire-perf",[$c]:"fire-perf-compat",[qc]:"fire-rc",[Hc]:"fire-rc-compat",[Kc]:"fire-gcs",[Gc]:"fire-gcs-compat",[Wc]:"fire-fst",[Xc]:"fire-fst-compat",[Qc]:"fire-vertex","fire-js":"fire-js",[Yc]:"fire-js-all"},eu=new Map,tu=new Map,nu=new Map;function ru(e,t){try{e.container.addComponent(t)}catch(n){Sc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function iu(e){const t=e.name;if(nu.has(t))return Sc.debug(`There were multiple attempts to register component ${t}.`),!1;nu.set(t,e);for(const n of eu.values())ru(n,e);for(const n of tu.values())ru(n,e);return!0}function su(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ou(e){return null!=e&&void 0!==e.settings}const au=new Ua("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class cu{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw au.create("app-deleted",{appName:this._name})}}const uu="12.1.0";function lu(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r={name:Jc,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!=typeof i||!i)throw au.create("bad-app-name",{appName:String(i)});if(n||(n=Ea()),!n)throw au.create("no-options");const s=eu.get(i);if(s){if(Va(n,s.options)&&Va(r,s.config))return s;throw au.create("duplicate-app",{appName:i})}const o=new Ya(i);for(const c of nu.values())o.addComponent(c);const a=new cu(n,r,o);return eu.set(i,a),a}function hu(e=Jc){const t=eu.get(e);if(!t&&e===Jc&&Ea())return lu();if(!t)throw au.create("no-app",{appName:e});return t}function du(){return Array.from(eu.values())}function fu(e,t,n){let r=Zc[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Sc.warn(e.join(" "))}iu(new Wa(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const pu="firebase-heartbeat-store";let mu=null;function gu(){return mu||(mu=yc("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pu)}catch(n){}}}).catch(e=>{throw au.create("idb-open",{originalErrorMessage:e.message})})),mu}async function yu(e,t){try{const n=(await gu()).transaction(pu,"readwrite"),r=n.objectStore(pu);await r.put(t,vu(e)),await n.done}catch(n){if(n instanceof La)Sc.warn(n.message);else{const e=au.create("idb-set",{originalErrorMessage:n?.message});Sc.warn(e.message)}}}function vu(e){return`${e.name}!${e.options.appId}`}class wu{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _u(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=bu();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sc.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=bu(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Eu(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Eu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ga(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Sc.warn(e),""}}}function bu(){return(new Date).toISOString().substring(0,10)}class _u{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Oa()&&Ma().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await gu()).transaction(pu),n=await t.objectStore(pu).get(vu(e));return await t.done,n}catch(t){if(t instanceof La)Sc.warn(t.message);else{const e=au.create("idb-get",{originalErrorMessage:t?.message});Sc.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return yu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return yu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Eu(e){return ga(JSON.stringify({version:2,heartbeats:e})).length}var Iu;Iu="",iu(new Wa("platform-logger",e=>new Ec(e),"PRIVATE")),iu(new Wa("heartbeat",e=>new wu(e),"PRIVATE")),fu(Ic,Tc,Iu),fu(Ic,Tc,"esm2020"),fu("fire-js","");var Tu,Su,Cu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),c=s(1),u=s(16777216);function l(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(l(t))throw Error("division by zero");if(l(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!l(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);l(s)&&(s=c),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(l(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(l(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:l(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(l(this)||l(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=c*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Su=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),i=i.j(c).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},Tu=r}).apply(void 0!==Cu?Cu:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ku,Au,xu,Ru,Nu,Du,Pu,Ou,Mu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Mu&&Mu];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout(()=>{throw e},0)}function T(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,A=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(N)}};var N=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){I(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,P);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=Z(n),e&&e[U]?e.K(t,n,!!o(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,c=Y(e);if(c||(e[q]=c=new B(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(j(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&W(n))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):j(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Y(e){return(e=e[q])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){D.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ne(o,r,!0,t)&&i}if(i=ne(o=t.g=e,r,!0,t)&&i,i=ne(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(o=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,D),ee.prototype[U]=!0,ee.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){D.call(this),this.h=e,this.g={}}h(oe,D);var ae=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=i.JSON.stringify,le=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){P.call(this,"d")}function ye(){P.call(this,"c")}h(ge,P),h(ye,P);var ve={},we=null;function be(){return we=we||new ee}function _e(e){P.call(this,ve.La,e)}function Ee(e){const t=be();te(t,new _e(t))}function Ie(e,t){P.call(this,ve.STAT_EVENT,e),this.stat=t}function Te(e){const t=be();te(t,new Ie(t,e))}function Se(e,t){P.call(this,ve.Ma,e),this.size=t}function Ce(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ue(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",h(_e,P),ve.STAT_EVENT="statevent",h(Ie,P),ve.Ma="timingevent",h(Se,P),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var xe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(De,de),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},xe=new De;var Me={},Le={};function Ue(e,t,n){e.L=1,e.v=ut(it(t)),e.m=n,e.P=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),Be(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=ln(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ae[0]=i.toString()),i=ae);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(u(e.ba,e),t)}function $e(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function He(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ye(n.h,e)))if(!e.K&&Ye(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Gt(n)}en(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(u(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(l){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&($e(a),Be(a)),r.g=o}else Zt(r);0<n.i.length&&Qt(n)}else"stop"!=u[0]&&"close"!=u[0]||an(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?an(n,7):Kt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ee()}catch(l){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=d||7==t||Ee(),$e(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=$t(this.g);e="";var s=r.length,o=4==zt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),qe(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var l=c;break t}}l=null}if(!(n=l)){this.o=!1,this.s=3,Te(12),He(this),qe(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=je(this,a),e==Le){4==d&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ke(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),qe(this)}else Ae(this.i,this.l,a,null),Ke(this,a);4==d&&He(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),He(this),qe(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,He(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),He(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}We.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=lt(t[2]||""),this.g=lt(t[3]||"",!0),ot(this,t[4]),this.l=lt(t[5]||"",!0),at(this,t[6]||"",!0),this.m=lt(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?lt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(bt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,gt)),e.i=new vt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ut(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function lt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){wt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return wt(e),t=It(e,t),e.g.has(t)}function Et(e,t,n){bt(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new he}function Ct(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;o(e)&&(i=ue(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function kt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function xt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ot(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){wt(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)_t(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,_t(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(kt,de),kt.prototype.g=function(){return new At(this.l,this.j)},kt.prototype.i=function(e){return function(){return e}}({}),h(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Nt(this),3==this.readyState&&xt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ot,ee);var Mt=/^https?$/i,Lt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),jt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Vt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(nt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Mt.test(o?o.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<zt(e)?e.g.statusText:""}catch(c){a=""}e.l=a+" ["+e.Z()+"]",Ft(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){Bt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new We(e&&e.concurrentRequestLimit),this.Da=new St,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Wt(e),3==e.G){var t=e.U++,n=it(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Yt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ut(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=ln(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}cn(e)}function Gt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Wt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||R(),A||(k(),A=!0),x.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Yt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Ue(n,r,t)}function Yt(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&tt({},function(e,n){ct(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const c=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ct(c,e,"req"+n+"_")}catch(s){r&&r(c)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||R(),A||(k(),A=!0),x.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(u(e.Fa,e),on(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Yt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(it(t)),n.m=null,n.P=!0,Fe(n,e)}function rn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=be(),new Se(r,n)),Qt(e)}else Zt(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ce(u(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ut(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=l(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),cn(e),Wt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new rt(null);r&&st(o,r),t&&(o.g=t),s&&ot(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Yt(e,r),r}function ln(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new kt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xe.g(),this.v=this.o?fe(this.o):fe(xe),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Lt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),le(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,i,t),ct(n=it(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Yt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dt(s)))+"&"+t:this.m&&Pt(n,this.m,s)),Je(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Qe(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Gt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),en(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Kt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,fn.aa.N.call(this)},h(pn,ge),h(mn,ye),h(gn,hn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Ou=function(){return new dn},Pu=function(){return be()},Du=ve,Nu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Ru=Re,Ne.COMPLETE="complete",xu=Ne,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Au=pe,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,ku=Ot}).apply(void 0!==Mu?Mu:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Lu="@firebase/firestore",Uu="4.9.0";class Fu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fu.UNAUTHENTICATED=new Fu(null),Fu.GOOGLE_CREDENTIALS=new Fu("google-credentials-uid"),Fu.FIRST_PARTY=new Fu("first-party-uid"),Fu.MOCK_USER=new Fu("mock-user");let Vu="12.0.0";const ju=new ic("@firebase/firestore");function Bu(){return ju.logLevel}function zu(e,...t){if(ju.logLevel<=Ja.DEBUG){const n=t.map(Hu);ju.debug(`Firestore (${Vu}): ${e}`,...n)}}function $u(e,...t){if(ju.logLevel<=Ja.ERROR){const n=t.map(Hu);ju.error(`Firestore (${Vu}): ${e}`,...n)}}function qu(e,...t){if(ju.logLevel<=Ja.WARN){const n=t.map(Hu);ju.warn(`Firestore (${Vu}): ${e}`,...n)}}function Hu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}function Ku(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Gu(e,r,n)}function Gu(e,t,n){let r=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(i){r+=" CONTEXT: "+n}throw $u(r),new Error(r)}function Wu(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Gu(t,i,r)}function Qu(e,t){return e}const Xu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yu extends La{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ju{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class el{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fu.UNAUTHENTICATED))}shutdown(){}}class tl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nl{constructor(e){this.t=e,this.currentUser=Fu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Wu(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ju;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ju,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{zu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(zu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ju)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Wu("string"==typeof t.accessToken,31837,{l:t}),new Zu(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wu(null===e||"string"==typeof e,2055,{h:e}),new Fu(e)}}class rl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Fu.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class il{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new rl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Fu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ol{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ou(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Wu(void 0===this.o,3512);const n=e=>{null!=e.error&&zu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,zu("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):zu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Wu("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new sl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function al(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=al(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ul(e,t){return e<t?-1:e>t?1:0}function ll(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return fl(n)===fl(i)?ul(n,i):fl(n)?1:-1}return ul(e.length,t.length)}const hl=55296,dl=57343;function fl(e){const t=e.charCodeAt(0);return t>=hl&&t<=dl}function pl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ml="__name__";class gl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ku(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ku(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===gl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=gl.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ul(e.length,t.length)}static compareSegments(e,t){const n=gl.isNumericId(e),r=gl.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?gl.extractNumericId(e).compare(gl.extractNumericId(t)):ll(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tu.fromString(e.substring(4,e.length-2))}}class yl extends gl{construct(e,t,n){return new yl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Yu(Xu.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new yl(t)}static emptyPath(){return new yl([])}}const vl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wl extends gl{construct(e,t,n){return new wl(e,t,n)}static isValidIdentifier(e){return vl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ml}static keyField(){return new wl([ml])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Yu(Xu.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Yu(Xu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Yu(Xu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Yu(Xu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wl(t)}static emptyPath(){return new wl([])}}class bl{constructor(e){this.path=e}static fromPath(e){return new bl(yl.fromString(e))}static fromName(e){return new bl(yl.fromString(e).popFirst(5))}static empty(){return new bl(yl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bl(new yl(e.slice()))}}function _l(e,t,n){if(!n)throw new Yu(Xu.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function El(e){if(!bl.isDocumentKey(e))throw new Yu(Xu.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Il(e){if(bl.isDocumentKey(e))throw new Yu(Xu.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Tl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Sl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Ku(12329,{type:typeof e})}function Cl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yu(Xu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sl(e);throw new Yu(Xu.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function kl(e,t){const n={typeString:e};return t&&(n.value=t),n}function Al(e,t){if(!Tl(e))throw new Yu(Xu.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Yu(Xu.INVALID_ARGUMENT,n);return!0}const xl=-62135596800,Rl=1e6;class Nl{static now(){return Nl.fromMillis(Date.now())}static fromDate(e){return Nl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Rl);return new Nl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Yu(Xu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Yu(Xu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xl)throw new Yu(Xu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Yu(Xu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rl}_compareTo(e){return this.seconds===e.seconds?ul(this.nanoseconds,e.nanoseconds):ul(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Al(e,Nl._jsonSchema))return new Nl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nl._jsonSchemaVersion="firestore/timestamp/1.0",Nl._jsonSchema={type:kl("string",Nl._jsonSchemaVersion),seconds:kl("number"),nanoseconds:kl("number")};class Dl{static fromTimestamp(e){return new Dl(e)}static min(){return new Dl(new Nl(0,0))}static max(){return new Dl(new Nl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Pl(e){return new Ol(e.readTime,e.key,-1)}class Ol{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ol(Dl.min(),bl.empty(),-1)}static max(){return new Ol(Dl.max(),bl.empty(),-1)}}function Ml(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=bl.comparator(e.documentKey,t.documentKey),0!==n?n:ul(e.largestBatchId,t.largestBatchId))}class Ll{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ul(e){if(e.code!==Xu.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;zu("LocalStore","Unexpectedly lost primary lease")}class Fl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ku(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fl?t:Fl.resolve(t)}catch(t){return Fl.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fl.reject(t)}static resolve(e){return new Fl((t,n)=>{t(e)})}static reject(e){return new Fl((t,n)=>{n(e)})}static waitFor(e){return new Fl((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Fl.resolve(!1);for(const n of e)t=t.next(e=>e?Fl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Fl((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next(e=>{s[c]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Fl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Vl(e){return"IndexedDbTransactionError"===e.name}class jl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jl.ce=-1;function Bl(e){return null==e}function zl(e){return 0===e&&1/e==-1/0}function $l(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function ql(e){return e+""}function Hl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Wl{constructor(e,t){this.comparator=e,this.root=t||Xl.EMPTY}insert(e,t){return new Wl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xl.BLACK,null,null))}remove(e){return new Wl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xl.RED,this.left=null!=r?r:Xl.EMPTY,this.right=null!=i?i:Xl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Xl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ku(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ku(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ku(27949);return e+(this.isRed()?0:1)}}Xl.EMPTY=null,Xl.RED=!0,Xl.BLACK=!1,Xl.EMPTY=new class{constructor(){this.size=0}get key(){throw Ku(57766)}get value(){throw Ku(16141)}get color(){throw Ku(16727)}get left(){throw Ku(29726)}get right(){throw Ku(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Xl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yl{constructor(e){this.comparator=e,this.data=new Wl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jl(this.data.getIterator())}getIteratorFrom(e){return new Jl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Yl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Yl(this.comparator);return t.data=e,t}}class Jl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zl{constructor(e){this.fields=e,e.sort(wl.comparator)}static empty(){return new Zl([])}unionWith(e){let t=new Yl(wl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Zl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class eh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class th{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new eh("Invalid base64 string: "+t):t}}(e);return new th(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new th(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ul(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}th.EMPTY_BYTE_STRING=new th("");const nh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rh(e){if(Wu(!!e,39018),"string"==typeof e){let t=0;const n=nh.exec(e);if(Wu(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ih(e.seconds),nanos:ih(e.nanos)}}function ih(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function sh(e){return"string"==typeof e?th.fromBase64String(e):th.fromUint8Array(e)}const oh="server_timestamp",ah="__type__",ch="__previous_value__",uh="__local_write_time__";function lh(e){const t=(e?.mapValue?.fields||{})[ah]?.stringValue;return t===oh}function hh(e){const t=e.mapValue.fields[ch];return lh(t)?hh(t):t}function dh(e){const t=rh(e.mapValue.fields[uh].timestampValue);return new Nl(t.seconds,t.nanos)}class fh{constructor(e,t,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=u}}const ph="(default)";class mh{constructor(e,t){this.projectId=e,this.database=t||ph}static empty(){return new mh("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof mh&&e.projectId===this.projectId&&e.database===this.database}}const gh="__type__",yh="__max__",vh={},wh="__vector__",bh="value";function _h(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lh(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===yh}(e)?9007199254740991:function(e){const t=(e?.mapValue?.fields||{})[gh]?.stringValue;return t===wh}(e)?10:11:Ku(28295,{value:e})}function Eh(e,t){if(e===t)return!0;const n=_h(e);if(n!==_h(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dh(e).isEqual(dh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=rh(e.timestampValue),r=rh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,sh(e.bytesValue).isEqual(sh(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ih(e.geoPointValue.latitude)===ih(t.geoPointValue.latitude)&&ih(e.geoPointValue.longitude)===ih(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ih(e.integerValue)===ih(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ih(e.doubleValue),r=ih(t.doubleValue);return n===r?zl(n)===zl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pl(e.arrayValue.values||[],t.arrayValue.values||[],Eh);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hl(n)!==Hl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Eh(n[i],r[i])))return!1;return!0}(e,t);default:return Ku(52216,{left:e})}var r}function Ih(e,t){return void 0!==(e.values||[]).find(e=>Eh(e,t))}function Th(e,t){if(e===t)return 0;const n=_h(e),r=_h(t);if(n!==r)return ul(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ul(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ih(e.integerValue||e.doubleValue),r=ih(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sh(e.timestampValue,t.timestampValue);case 4:return Sh(dh(e),dh(t));case 5:return ll(e.stringValue,t.stringValue);case 6:return function(e,t){const n=sh(e),r=sh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ul(n[i],r[i]);if(0!==e)return e}return ul(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ul(ih(e.latitude),ih(t.latitude));return 0!==n?n:ul(ih(e.longitude),ih(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ch(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[bh]?.arrayValue,s=r[bh]?.arrayValue,o=ul(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:Ch(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===vh&&t===vh)return 0;if(e===vh)return 1;if(t===vh)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ll(r[o],s[o]);if(0!==e)return e;const t=Th(n[r[o]],i[s[o]]);if(0!==t)return t}return ul(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ku(23264,{he:n})}}function Sh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ul(e,t);const n=rh(e),r=rh(t),i=ul(n.seconds,r.seconds);return 0!==i?i:ul(n.nanos,r.nanos)}function Ch(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Th(n[i],r[i]);if(e)return e}return ul(n.length,r.length)}function kh(e){return Ah(e)}function Ah(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=rh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?sh(e.bytesValue).toBase64():"referenceValue"in e?function(e){return bl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ah(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ah(e.fields[i])}`;return n+"}"}(e.mapValue):Ku(61005,{value:e})}function xh(e){switch(_h(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hh(e);return t?16+xh(t):16;case 5:return 2*e.stringValue.length;case 6:return sh(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+xh(t),0);case 10:case 11:return function(e){let t=0;return Kl(e.fields,(e,n)=>{t+=e.length+xh(n)}),t}(e.mapValue);default:throw Ku(13486,{value:e})}}function Rh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Nh(e){return!!e&&"integerValue"in e}function Dh(e){return!!e&&"arrayValue"in e}function Ph(e){return!!e&&"nullValue"in e}function Oh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mh(e){return!!e&&"mapValue"in e}function Lh(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Kl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Lh(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lh(e.arrayValue.values[n]);return t}return{...e}}class Uh{constructor(e){this.value=e}static empty(){return new Uh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=wl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Lh(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Kl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Uh(Lh(this.value))}}function Fh(e){const t=[];return Kl(e.fields,(e,n)=>{const r=new wl([e]);if(Mh(n)){const e=Fh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Zl(t)}class Vh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Vh(e,0,Dl.min(),Dl.min(),Dl.min(),Uh.empty(),0)}static newFoundDocument(e,t,n,r){return new Vh(e,1,t,Dl.min(),n,r,0)}static newNoDocument(e,t){return new Vh(e,2,t,Dl.min(),Dl.min(),Uh.empty(),0)}static newUnknownDocument(e,t){return new Vh(e,3,t,Dl.min(),Dl.min(),Uh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jh{constructor(e,t){this.position=e,this.inclusive=t}}function Bh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?bl.comparator(bl.fromName(o.referenceValue),n.key):Th(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Eh(e.position[n],t.position[n]))return!1;return!0}class $h{constructor(e,t="asc"){this.field=e,this.dir=t}}function qh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hh{}class Kh extends Hh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Zh(e,t,n):"array-contains"===t?new rd(e,n):"in"===t?new id(e,n):"not-in"===t?new sd(e,n):"array-contains-any"===t?new od(e,n):new Kh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ed(e,n):new td(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Th(t,this.value)):null!==t&&_h(this.value)===_h(t)&&this.matchesComparison(Th(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ku(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gh extends Hh{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gh(e,t)}matches(e){return Wh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wh(e){return"and"===e.op}function Qh(e){return function(e){for(const t of e.filters)if(t instanceof Gh)return!1;return!0}(e)&&Wh(e)}function Xh(e){if(e instanceof Kh)return e.field.canonicalString()+e.op.toString()+kh(e.value);if(Qh(e))return e.filters.map(e=>Xh(e)).join(",");{const t=e.filters.map(e=>Xh(e)).join(",");return`${e.op}(${t})`}}function Yh(e,t){return e instanceof Kh?(n=e,(r=t)instanceof Kh&&n.op===r.op&&n.field.isEqual(r.field)&&Eh(n.value,r.value)):e instanceof Gh?function(e,t){return t instanceof Gh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Yh(n,t.filters[r]),!0)}(e,t):void Ku(19439);var n,r}function Jh(e){return e instanceof Kh?`${(t=e).field.canonicalString()} ${t.op} ${kh(t.value)}`:e instanceof Gh?function(e){return e.op.toString()+" {"+e.getFilters().map(Jh).join(" ,")+"}"}(e):"Filter";var t}class Zh extends Kh{constructor(e,t,n){super(e,t,n),this.key=bl.fromName(n.referenceValue)}matches(e){const t=bl.comparator(e.key,this.key);return this.matchesComparison(t)}}class ed extends Kh{constructor(e,t){super(e,"in",t),this.keys=nd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class td extends Kh{constructor(e,t){super(e,"not-in",t),this.keys=nd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nd(e,t){return(t.arrayValue?.values||[]).map(e=>bl.fromName(e.referenceValue))}class rd extends Kh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dh(t)&&Ih(t.arrayValue,this.value)}}class id extends Kh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ih(this.value.arrayValue,t)}}class sd extends Kh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ih(this.value.arrayValue,t)}}class od extends Kh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ih(this.value.arrayValue,e))}}class ad{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function cd(e,t=null,n=[],r=[],i=null,s=null,o=null){return new ad(e,t,n,r,i,s,o)}function ud(e){const t=Qu(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xh(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Bl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>kh(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>kh(e)).join(",")),t.Te=e}return t.Te}function ld(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zh(e.startAt,t.startAt)&&zh(e.endAt,t.endAt)}function hd(e){return bl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class dd{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fd(e){return new dd(e)}function pd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function md(e){return null!==e.collectionGroup}function gd(e){const t=Qu(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Yl(wl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new $h(r,n))}),e.has(wl.keyField().canonicalString())||t.Ie.push(new $h(wl.keyField(),n))}return t.Ie}function yd(e){const t=Qu(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return cd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new $h(e.field,t)});const n=e.endAt?new jh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jh(e.startAt.position,e.startAt.inclusive):null;return cd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,gd(e))),t.Ee}function vd(e,t){const n=e.filters.concat([t]);return new dd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wd(e,t,n){return new dd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bd(e,t){return ld(yd(e),yd(t))&&e.limitType===t.limitType}function _d(e){return`${ud(yd(e))}|lt:${e.limitType}`}function Ed(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Jh(e)).join(", ")}]`),Bl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>kh(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>kh(e)).join(",")),`Target(${t})`}(yd(e))}; limitType=${e.limitType})`}function Id(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of gd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,gd(n),r)||n.endAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,gd(n),r)));var n,r}function Td(e){return(t,n)=>{let r=!1;for(const i of gd(e)){const e=Sd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Sd(e,t,n){const r=e.field.isKeyField()?bl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Th(r,i):Ku(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ku(19790,{direction:e.dir})}}class Cd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Gl(this.inner)}size(){return this.innerSize}}const kd=new Wl(bl.comparator);function Ad(){return kd}const xd=new Wl(bl.comparator);function Rd(...e){let t=xd;for(const n of e)t=t.insert(n.key,n);return t}function Nd(e){let t=xd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Dd(){return Od()}function Pd(){return Od()}function Od(){return new Cd(e=>e.toString(),(e,t)=>e.isEqual(t))}const Md=new Wl(bl.comparator),Ld=new Yl(bl.comparator);function Ud(...e){let t=Ld;for(const n of e)t=t.add(n);return t}const Fd=new Yl(ul);function Vd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(t)?"-0":t}}function jd(e){return{integerValue:""+e}}function Bd(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?jd(t):Vd(e,t)}class zd{constructor(){this._=void 0}}function $d(e,t,n){return e instanceof Kd?function(e,t){const n={fields:{[ah]:{stringValue:oh},[uh]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&lh(t)&&(t=hh(t)),t&&(n.fields[ch]=t),{mapValue:n}}(n,t):e instanceof Gd?Wd(e,t):e instanceof Qd?Xd(e,t):function(e,t){const n=Hd(e,t),r=Jd(n)+Jd(e.Ae);return Nh(n)&&Nh(e.Ae)?jd(r):Vd(e.serializer,r)}(e,t)}function qd(e,t,n){return e instanceof Gd?Wd(e,t):e instanceof Qd?Xd(e,t):n}function Hd(e,t){return e instanceof Yd?Nh(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Kd extends zd{}class Gd extends zd{constructor(e){super(),this.elements=e}}function Wd(e,t){const n=Zd(t);for(const r of e.elements)n.some(e=>Eh(e,r))||n.push(r);return{arrayValue:{values:n}}}class Qd extends zd{constructor(e){super(),this.elements=e}}function Xd(e,t){let n=Zd(t);for(const r of e.elements)n=n.filter(e=>!Eh(e,r));return{arrayValue:{values:n}}}class Yd extends zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Jd(e){return ih(e.integerValue||e.doubleValue)}function Zd(e){return Dh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ef{constructor(e,t){this.version=e,this.transformResults=t}}class tf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tf}static exists(e){return new tf(void 0,e)}static updateTime(e){return new tf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class rf{}function sf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new mf(e.key,tf.none()):new lf(e.key,e.data,tf.none());{const n=e.data,r=Uh.empty();let i=new Yl(wl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new hf(e.key,r,new Zl(i.toArray()),tf.none())}}function of(e,t,n){var r;e instanceof lf?function(e,t,n){const r=e.value.clone(),i=ff(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hf?function(e,t,n){if(!nf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ff(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(df(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function af(e,t,n,r){return e instanceof lf?function(e,t,n,r){if(!nf(e.precondition,t))return n;const i=e.value.clone(),s=pf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hf?function(e,t,n,r){if(!nf(e.precondition,t))return n;const i=pf(e.fieldTransforms,r,t),s=t.data;return s.setAll(df(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,nf(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function cf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Hd(r.transform,e||null);null!=i&&(null===n&&(n=Uh.empty()),n.set(r.field,i))}return n||null}function uf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&pl(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Gd&&r instanceof Gd||n instanceof Qd&&r instanceof Qd?pl(n.elements,r.elements,Eh):n instanceof Yd&&r instanceof Yd?Eh(n.Ae,r.Ae):n instanceof Kd&&r instanceof Kd);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class lf extends rf{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hf extends rf{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function df(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ff(e,t,n){const r=new Map;Wu(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,qd(o,a,n[i]))}return r}function pf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,$d(e,s,t))}return r}class mf extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gf extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&of(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=af(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=af(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Pd();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=sf(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Dl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ud())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(e,t)=>uf(e,t))&&pl(this.baseMutations,e.baseMutations,(e,t)=>uf(e,t))}}class vf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Wu(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=function(){return Md}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new vf(e,t,n,r)}}class wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bf{constructor(e,t){this.count=e,this.unchangedNames=t}}var _f,Ef;function If(e){if(void 0===e)return $u("GRPC error has no .code"),Xu.UNKNOWN;switch(e){case _f.OK:return Xu.OK;case _f.CANCELLED:return Xu.CANCELLED;case _f.UNKNOWN:return Xu.UNKNOWN;case _f.DEADLINE_EXCEEDED:return Xu.DEADLINE_EXCEEDED;case _f.RESOURCE_EXHAUSTED:return Xu.RESOURCE_EXHAUSTED;case _f.INTERNAL:return Xu.INTERNAL;case _f.UNAVAILABLE:return Xu.UNAVAILABLE;case _f.UNAUTHENTICATED:return Xu.UNAUTHENTICATED;case _f.INVALID_ARGUMENT:return Xu.INVALID_ARGUMENT;case _f.NOT_FOUND:return Xu.NOT_FOUND;case _f.ALREADY_EXISTS:return Xu.ALREADY_EXISTS;case _f.PERMISSION_DENIED:return Xu.PERMISSION_DENIED;case _f.FAILED_PRECONDITION:return Xu.FAILED_PRECONDITION;case _f.ABORTED:return Xu.ABORTED;case _f.OUT_OF_RANGE:return Xu.OUT_OF_RANGE;case _f.UNIMPLEMENTED:return Xu.UNIMPLEMENTED;case _f.DATA_LOSS:return Xu.DATA_LOSS;default:return Ku(39323,{code:e})}}(Ef=_f||(_f={}))[Ef.OK=0]="OK",Ef[Ef.CANCELLED=1]="CANCELLED",Ef[Ef.UNKNOWN=2]="UNKNOWN",Ef[Ef.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ef[Ef.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ef[Ef.NOT_FOUND=5]="NOT_FOUND",Ef[Ef.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ef[Ef.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ef[Ef.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ef[Ef.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ef[Ef.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ef[Ef.ABORTED=10]="ABORTED",Ef[Ef.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ef[Ef.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ef[Ef.INTERNAL=13]="INTERNAL",Ef[Ef.UNAVAILABLE=14]="UNAVAILABLE",Ef[Ef.DATA_LOSS=15]="DATA_LOSS";const Tf=new Tu([4294967295,4294967295],0);function Sf(e){const t=(new TextEncoder).encode(e),n=new Su;return n.update(t),new Uint8Array(n.digest())}function Cf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Tu([n,r],0),new Tu([i,s],0)]}class kf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Af(`Invalid padding: ${t}`);if(n<0)throw new Af(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Af(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Af(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Tu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Tu.fromNumber(n)));return 1===r.compare(Tf)&&(r=new Tu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Sf(e),[n,r]=Cf(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new kf(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Sf(e),[n,r]=Cf(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Af extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Rf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xf(Dl.min(),r,new Wl(ul),Ad(),Ud())}}class Rf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Rf(n,t,Ud(),Ud(),Ud())}}class Nf{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Df{constructor(e,t){this.targetId=e,this.Ce=t}}class Pf{constructor(e,t,n=th.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Of{constructor(){this.ve=0,this.Fe=Uf(),this.Me=th.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ud(),t=Ud(),n=Ud();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ku(38017,{changeType:i})}}),new Rf(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Uf()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Wu(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mf{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ad(),this.Je=Lf(),this.He=Lf(),this.Ye=new Wl(ul)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ku(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(hd(i))if(0===n){const e=new bl(i.path);this.et(t,e,Vh.newNoDocument(e,Dl.min()))}else Wu(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=sh(n).toUint8Array()}catch(a){if(a instanceof eh)return qu("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new kf(s,r,i)}catch(a){return qu(a instanceof Af?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&hd(i.target)){const t=new bl(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Vh.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Ud();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new xf(e,t,this.Ye,this.je,n);return this.je=Ad(),this.Je=Lf(),this.He=Lf(),this.Ye=new Wl(ul),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Of,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yl(ul),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yl(ul),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||zu("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Of),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lf(){return new Wl(bl.comparator)}function Uf(){return new Wl(bl.comparator)}const Ff=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Vf=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jf=(()=>({and:"AND",or:"OR"}))();class Bf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zf(e,t){return e.useProto3Json||Bl(t)?t:{value:t}}function $f(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hf(e,t){return $f(e,t.toTimestamp())}function Kf(e){return Wu(!!e,49232),Dl.fromTimestamp(function(e){const t=rh(e);return new Nl(t.seconds,t.nanos)}(e))}function Gf(e,t){return Wf(e,t).canonicalString()}function Wf(e,t){const n=(r=e,new yl(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Qf(e){const t=yl.fromString(e);return Wu(fp(t),10190,{key:t.toString()}),t}function Xf(e,t){return Gf(e.databaseId,t.path)}function Yf(e,t){const n=Qf(t);if(n.get(1)!==e.databaseId.projectId)throw new Yu(Xu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yu(Xu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bl(ep(n))}function Jf(e,t){return Gf(e.databaseId,t)}function Zf(e){return new yl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ep(e){return Wu(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function tp(e,t,n){return{name:Xf(e,t),fields:n.value.mapValue.fields}}function np(e,t){return{documents:[Jf(e,t.path)]}}function rp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jf(e,i);const s=function(e){if(0!==e.length)return hp(Gh.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:up((t=e).field),direction:op(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zf(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i};var c}function ip(e){let t=function(e){const t=Qf(e);return 4===t.length?yl.emptyPath():ep(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Wu(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=sp(e);return t instanceof Gh&&Qh(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new $h(lp((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Bl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new jh(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new jh(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new dd(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,u)}function sp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lp(e.unaryFilter.field);return Kh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=lp(e.unaryFilter.field);return Kh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lp(e.unaryFilter.field);return Kh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lp(e.unaryFilter.field);return Kh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ku(61313);default:return Ku(60726)}}(e):void 0!==e.fieldFilter?(t=e,Kh.create(lp(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ku(58110);default:return Ku(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Gh.create(e.compositeFilter.filters.map(e=>sp(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ku(1026)}}(e.compositeFilter.op))}(e):Ku(30097,{filter:e});var t}function op(e){return Ff[e]}function ap(e){return Vf[e]}function cp(e){return jf[e]}function up(e){return{fieldPath:e.canonicalString()}}function lp(e){return wl.fromServerFormat(e.fieldPath)}function hp(e){return e instanceof Kh?function(e){if("=="===e.op){if(Oh(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NAN"}};if(Ph(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Oh(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NAN"}};if(Ph(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:up(e.field),op:ap(e.op),value:e.value}}}(e):e instanceof Gh?function(e){const t=e.getFilters().map(e=>hp(e));return 1===t.length?t[0]:{compositeFilter:{op:cp(e.op),filters:t}}}(e):Ku(54877,{filter:e})}function dp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function fp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class pp{constructor(e,t,n,r,i=Dl.min(),s=Dl.min(),o=th.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new pp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mp{constructor(e){this.yt=e}}function gp(e){const t=ip({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wd(t,t.limit,"L"):t}class yp{constructor(){this.Cn=new vp}addToCollectionParentIndex(e,t){return this.Cn.add(t),Fl.resolve()}getCollectionParents(e,t){return Fl.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Fl.resolve()}deleteFieldIndex(e,t){return Fl.resolve()}deleteAllFieldIndexes(e){return Fl.resolve()}createTargetIndexes(e,t){return Fl.resolve()}getDocumentsMatchingTarget(e,t){return Fl.resolve(null)}getIndexType(e,t){return Fl.resolve(0)}getFieldIndexes(e,t){return Fl.resolve([])}getNextCollectionGroupToUpdate(e){return Fl.resolve(null)}getMinOffset(e,t){return Fl.resolve(Ol.min())}getMinOffsetFromCollectionGroup(e,t){return Fl.resolve(Ol.min())}updateCollectionGroup(e,t,n){return Fl.resolve()}updateIndexEntries(e,t){return Fl.resolve()}}class vp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Yl(yl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Yl(yl.comparator)).toArray()}}const wp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bp=41943040;class _p{static withCacheSize(e){return new _p(e,_p.DEFAULT_COLLECTION_PERCENTILE,_p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}_p.DEFAULT_COLLECTION_PERCENTILE=10,_p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_p.DEFAULT=new _p(bp,_p.DEFAULT_COLLECTION_PERCENTILE,_p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_p.DISABLED=new _p(-1,0,0);class Ep{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ep(0)}static cr(){return new Ep(-1)}}const Ip="LruGarbageCollector";function Tp([e,t],[n,r]){const i=ul(e,n);return 0===i?ul(t,r):i}class Sp{constructor(e){this.Ir=e,this.buffer=new Yl(Tp),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Tp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){zu(Ip,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vl(e)?zu(Ip,"Ignoring IndexedDB error during garbage collection: ",e):await Ul(e)}await this.Vr(3e5)})}}class kp{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Fl.resolve(jl.ce);const n=new Sp(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zu("LruGarbageCollector","Garbage collection skipped; disabled"),Fl.resolve(wp)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zu("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wp):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zu("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),Bu()<=Ja.DEBUG&&zu("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(c-a)+`ms\nTotal Duration: ${c-u}ms`),Fl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Ap{constructor(){this.changes=new Cd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&af(n.mutation,e,Zl.empty(),Nl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ud()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Ud()){const r=Dd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Rd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Dd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ud()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ad();const s=Od(),o=Od();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hf)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),af(o.mutation,t,o.mutation.getFieldMask(),Nl.now())):s.set(t.key,Zl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new xp(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=Od();let r=new Wl((e,t)=>e-t),i=Ud();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Zl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ud()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=Pd();c.forEach(e=>{if(!i.has(e)){const r=sf(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Fl.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,bl.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):md(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Fl.resolve(Dd());let o=-1,a=i;return s.next(t=>Fl.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Fl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Ud())).next(e=>({batchId:o,changes:Nd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bl(t)).next(e=>{let t=Rd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Rd();return this.indexManager.getCollectionParents(e,i).next(o=>Fl.forEach(o,o=>{const a=(c=t,u=o.child(i),new dd(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vh.newInvalidDocument(r)))});let n=Rd();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&af(s.mutation,r,Zl.empty(),Nl.now()),Id(t,r)&&(n=n.insert(e,r))}),n})}}class Np{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Fl.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(n=t).id,version:n.version,createTime:Kf(n.createTime)}),Fl.resolve();var n}getNamedQuery(e,t){return Fl.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(n=t).name,query:gp(n.bundledQuery),readTime:Kf(n.readTime)}),Fl.resolve();var n}}class Dp{constructor(){this.overlays=new Wl(bl.comparator),this.qr=new Map}getOverlay(e,t){return Fl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Dd();return Fl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Fl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Fl.resolve()}getOverlaysForCollection(e,t,n){const r=Dd(),i=t.length+1,s=new bl(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Wl((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Dd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Dd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Fl.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new wf(t,n));let i=this.qr.get(t);void 0===i&&(i=Ud(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Pp{constructor(){this.sessionToken=th.EMPTY_BYTE_STRING}getSessionToken(e){return Fl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Fl.resolve()}}class Op{constructor(){this.Qr=new Yl(Mp.$r),this.Ur=new Yl(Mp.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Mp(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Mp(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new bl(new yl([])),n=new Mp(t,e),r=new Mp(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new bl(new yl([])),n=new Mp(t,e),r=new Mp(t,e+1);let i=Ud();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Mp(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mp{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return bl.comparator(e.key,t.key)||ul(e.Yr,t.Yr)}static Kr(e,t){return ul(e.Yr,t.Yr)||bl.comparator(e.key,t.key)}}class Lp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yl(Mp.$r)}checkEmpty(e){return Fl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new yf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Mp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Fl.resolve(s)}lookupMutationBatch(e,t){return Fl.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Fl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fl.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return Fl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mp(t,0),r=new Mp(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Fl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yl(ul);return t.forEach(e=>{const t=new Mp(e,0),r=new Mp(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Fl.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;bl.isDocumentKey(i)||(i=i.child(""));const s=new Mp(new bl(i),0);let o=new Yl(ul);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Fl.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Wu(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Fl.forEach(t.mutations,r=>{const i=new Mp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Mp(t,0),r=this.Zr.firstAfterOrEqual(n);return Fl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fl.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Up{constructor(e){this.ri=e,this.docs=new Wl(bl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fl.resolve(n?n.document.mutableCopy():Vh.newInvalidDocument(t))}getEntries(e,t){let n=Ad();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vh.newInvalidDocument(e))}),Fl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ad();const s=t.path,o=new bl(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ml(Pl(o),n)<=0||(r.has(o.key)||Id(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Fl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ku(9500)}ii(e,t){return Fl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fp(this)}getSize(e){return Fl.resolve(this.size)}}class Fp extends Ap{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Fl.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Vp{constructor(e){this.persistence=e,this.si=new Cd(e=>ud(e),ld),this.lastRemoteSnapshotVersion=Dl.min(),this.highestTargetId=0,this.oi=0,this._i=new Op,this.targetCount=0,this.ai=Ep.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Fl.resolve()}getLastRemoteSnapshotVersion(e){return Fl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fl.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Fl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Fl.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ep(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Fl.resolve()}updateTargetData(e,t){return this.Pr(t),Fl.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Fl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Fl.waitFor(i).next(()=>r)}getTargetCount(e){return Fl.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Fl.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Fl.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Fl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Fl.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Fl.resolve(n)}containsKey(e,t){return Fl.resolve(this._i.containsKey(t))}}class jp{constructor(e,t){this.ui={},this.overlays={},this.ci=new jl(0),this.li=!1,this.li=!0,this.hi=new Pp,this.referenceDelegate=e(this),this.Pi=new Vp(this),this.indexManager=new yp,this.remoteDocumentCache=new Up(e=>this.referenceDelegate.Ti(e)),this.serializer=new mp(t),this.Ii=new Np(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Lp(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){zu("MemoryPersistence","Starting transaction:",e);const r=new Bp(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Fl.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Bp extends Ll{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Op,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw Ku(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Fl.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Fl.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Fl.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fl.forEach(this.fi,n=>{const r=bl.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Dl.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Fl.or([()=>Fl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $p{constructor(e,t){this.persistence=e,this.pi=new Cd(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ql(t)),t=$l(e.get(n),t);return ql(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new kp(e,t)}(this,t)}static mi(e,t){return new $p(e,t)}Ei(){}di(e){return Fl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Fl.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Fl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Dl.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Fl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Fl.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Fl.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Fl.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xh(e.data.value)),t}br(e,t,n){return Fl.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Fl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ud(),r=Ud();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qp(e,t.fromCache,n,r)}}class Hp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Kp{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Pa()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Na())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Hp;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Bu()<=Ja.DEBUG&&zu("QueryEngine","SDK will not create cache indexes for query:",Ed(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Fl.resolve()):(Bu()<=Ja.DEBUG&&zu("QueryEngine","Query:",Ed(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Bu()<=Ja.DEBUG&&zu("QueryEngine","The SDK decides to create cache indexes for query:",Ed(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yd(t))):Fl.resolve())}ys(e,t){if(pd(t))return Fl.resolve(null);let n=yd(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=wd(t,null,"F"),n=yd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ud(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,wd(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return pd(t)||r.isEqual(Dl.min())?Fl.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Fl.resolve(null):(Bu()<=Ja.DEBUG&&zu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ed(t)),this.vs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Dl.fromTimestamp(1e9===r?new Nl(n+1,0):new Nl(n,r));return new Ol(i,bl.empty(),t)}(r,-1)).next(e=>e))})}Ds(e,t){let n=new Yl(Td(e));return t.forEach((t,r)=>{Id(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Bu()<=Ja.DEBUG&&zu("QueryEngine","Using full collection scan to execute query:",Ed(t)),this.ps.getDocumentsMatchingQuery(e,t,Ol.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Gp="LocalStore";class Wp{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Wl(ul),this.xs=new Cd(e=>ud(e),ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rp(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function Qp(e,t){const n=Qu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Ud();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Xp(e){const t=Qu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Yp(e,t){const n=Qu(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(th.EMPTY_BYTE_STRING,Dl.min()).withLastLimboFreeSnapshotVersion(Dl.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Pi.updateTargetData(e,u))});let a=Ad(),c=Ud();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=Ud(),i=Ud();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ad();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Dl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):zu(Gp,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}(e,s,t.documentUpdates).next(e=>{a=e.ks,c=e.qs})),!r.isEqual(Dl.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Fl.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Ms=i,e))}function Jp(e,t){const n=Qu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Zp(e,t,n){const r=Qu(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(o){if(!Vl(o))throw o;zu(Gp,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function em(e,t,n){const r=Qu(e);let i=Dl.min(),s=Ud();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Qu(e),i=r.xs.get(n);return void 0!==i?Fl.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,yd(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Dl.min(),n?s:Ud())).next(e=>(function(e,t,n){let r=e.Os.get(t)||Dl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:s})))}class tm{constructor(){this.activeTargetIds=Fd}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nm{constructor(){this.Mo=new tm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rm{Oo(e){}shutdown(){}}const im="ConnectivityMonitor";class sm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){zu(im,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){zu(im,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let om=null;function am(){return null===om?om=268435456+Math.round(2147483648*Math.random()):om++,"0x"+om.toString(16)}const cm="RestConnection",um={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lm{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===ph?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=am(),o=this.zo(e,t.toUriEncodedString());zu(cm,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:c}=new URL(o),u=Sa(c);return this.Jo(e,o,a,n,u).then(t=>(zu(cm,`Received RPC '${e}' ${s}: `,t),t),t=>{throw qu(cm,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=um[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class hm{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dm="WebChannelConnection";class fm extends lm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=am();return new Promise((i,o)=>{const a=new ku;a.setWithCredentials(!0),a.listenOnce(xu.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ru.NO_ERROR:const t=a.getResponseJson();zu(dm,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Ru.TIMEOUT:zu(dm,`RPC '${e}' ${s} timed out`),o(new Yu(Xu.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const n=a.getStatus();if(zu(dm,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xu).indexOf(t)>=0?t:Xu.UNKNOWN}(t.status);o(new Yu(e,t.message))}else o(new Yu(Xu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Yu(Xu.UNAVAILABLE,"Connection failed."));break;default:Ku(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{zu(dm,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);zu(dm,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",c,n,15)})}T_(e,t,n){const r=am(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ou(),o=Pu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");zu(dm,`Creating RPC '${e}' stream ${r}: ${u}`,a);const l=s.createWebChannel(u,a);this.I_(l);let h=!1,d=!1;const f=new hm({Yo:t=>{d?zu(dm,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(zu(dm,`Opening RPC '${e}' stream ${r} transport.`),l.open(),h=!0),zu(dm,`RPC '${e}' stream ${r} sending:`,t),l.send(t))},Zo:()=>l.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(l,Au.EventType.OPEN,()=>{d||(zu(dm,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(l,Au.EventType.CLOSE,()=>{d||(d=!0,zu(dm,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(l))}),p(l,Au.EventType.ERROR,t=>{d||(d=!0,qu(dm,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new Yu(Xu.UNAVAILABLE,"The operation could not be completed")))}),p(l,Au.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];Wu(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){zu(dm,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=_f[e];if(void 0!==t)return If(t)}(t),i=s.message;void 0===n&&(n=Xu.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.a_(new Yu(n,i)),l.close()}else zu(dm,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(o,Du.STAT_EVENT,t=>{t.stat===Nu.PROXY?zu(dm,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Nu.NOPROXY&&zu(dm,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function pm(){return"undefined"!=typeof document?document:null}function mm(e){return new Bf(e,!0)}class gm{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&zu("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ym="PersistentStream";class vm{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gm(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Xu.RESOURCE_EXHAUSTED?($u(t.toString()),$u("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Xu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new Yu(Xu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return zu(ym,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(zu(ym,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wm extends vm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Ku(39313,{state:r}),s=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Wu(void 0===t||"string"==typeof t,58123),th.fromBase64String(t||"")):(Wu(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),th.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(e){const t=void 0===e.code?Xu.UNKNOWN:If(e.code);return new Yu(t,e.message||"")}(a);n=new Pf(i,s,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yf(e,r.document.name),s=Kf(r.document.updateTime),o=r.document.createTime?Kf(r.document.createTime):Dl.min(),a=new Uh({mapValue:{fields:r.document.fields}}),c=Vh.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Nf(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Yf(e,r.document),s=r.readTime?Kf(r.readTime):Dl.min(),o=Vh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Yf(e,r.document),s=r.removedTargetIds||[];n=new Nf([],s,i,null)}else{if(!("filter"in t))return Ku(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new bf(r,i),o=e.targetId;n=new Df(o,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Dl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Dl.min():t.readTime?Kf(t.readTime):Dl.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Zf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=hd(r)?{documents:np(e,r)}:{query:rp(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=qf(e,t.resumeToken);const r=zf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Dl.min())>0){n.readTime=$f(e,t.snapshotVersion.toTimestamp());const r=zf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ku(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Zf(this.serializer),t.removeTarget=e,this.q_(t)}}class bm extends vm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Wu(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wu(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Wu(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Wu(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Kf(e.updateTime):Kf(t);return n.isEqual(Dl.min())&&(n=Kf(t)),new ef(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Kf(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Zf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof lf)n={update:tp(e,t.key,t.value)};else if(t instanceof mf)n={delete:Xf(e,t.key)};else if(t instanceof hf)n={update:tp(e,t.key,t.data),updateMask:dp(t.fieldMask)};else{if(!(t instanceof gf))return Ku(16599,{Vt:t.type});n={verify:Xf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Kd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yd)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ku(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Hf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ku(27497))),n;var r,i}(this.serializer,e))};this.q_(t)}}class _m{}class Em extends _m{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Yu(Xu.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,Wf(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Xu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yu(Xu.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,Wf(t,n),r,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Xu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yu(Xu.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Im{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($u(t),this.aa=!1):zu("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Tm="RemoteStore";class Sm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Om(this)&&(zu(Tm,"Restarting streams for network reachability change."),await async function(e){const t=Qu(e);t.Ea.add(4),await km(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Cm(t)}(this))})}),this.Ra=new Im(n,r)}}async function Cm(e){if(Om(e))for(const t of e.da)await t(!0)}async function km(e){for(const t of e.da)await t(!1)}function Am(e,t){const n=Qu(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Pm(n)?Dm(n):Jm(n).O_()&&Rm(n,t))}function xm(e,t){const n=Qu(e),r=Jm(n);n.Ia.delete(t),r.O_()&&Nm(n,t),0===n.Ia.size&&(r.O_()?r.L_():Om(n)&&n.Ra.set("Unknown"))}function Rm(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jm(e).Y_(t)}function Nm(e,t){e.Va.Ue(t),Jm(e).Z_(t)}function Dm(e){e.Va=new Mf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Jm(e).start(),e.Ra.ua()}function Pm(e){return Om(e)&&!Jm(e).x_()&&e.Ia.size>0}function Om(e){return 0===Qu(e).Ea.size}function Mm(e){e.Va=void 0}async function Lm(e){e.Ra.set("Online")}async function Um(e){e.Ia.forEach((t,n)=>{Rm(e,t)})}async function Fm(e,t){Mm(e),Pm(e)?(e.Ra.ha(t),Dm(e)):e.Ra.set("Unknown")}async function Vm(e,t,n){if(e.Ra.set("Online"),t instanceof Pf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(r){zu(Tm,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await jm(e,r)}else if(t instanceof Nf?e.Va.Ze(t):t instanceof Df?e.Va.st(t):e.Va.tt(t),!n.isEqual(Dl.min()))try{const t=await Xp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(th.EMPTY_BYTE_STRING,r.snapshotVersion)),Nm(e,t);const i=new pp(r.target,t,n,r.sequenceNumber);Rm(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){zu(Tm,"Failed to raise snapshot:",i),await jm(e,i)}}async function jm(e,t,n){if(!Vl(t))throw t;e.Ea.add(1),await km(e),e.Ra.set("Offline"),n||(n=()=>Xp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zu(Tm,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Cm(e)})}function Bm(e,t){return t().catch(n=>jm(e,n,t))}async function zm(e){const t=Qu(e),n=Zm(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;$m(t);)try{const e=await Jp(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,qm(t,e)}catch(i){await jm(t,i)}Hm(t)&&Km(t)}function $m(e){return Om(e)&&e.Ta.length<10}function qm(e,t){e.Ta.push(t);const n=Zm(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Hm(e){return Om(e)&&!Zm(e).x_()&&e.Ta.length>0}function Km(e){Zm(e).start()}async function Gm(e){Zm(e).ra()}async function Wm(e){const t=Zm(e);for(const n of e.Ta)t.ea(n.mutations)}async function Qm(e,t,n){const r=e.Ta.shift(),i=vf.from(r,t,n);await Bm(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await zm(e)}async function Xm(e,t){t&&Zm(e).X_&&await async function(e,t){if(function(e){switch(e){case Xu.OK:return Ku(64938);case Xu.CANCELLED:case Xu.UNKNOWN:case Xu.DEADLINE_EXCEEDED:case Xu.RESOURCE_EXHAUSTED:case Xu.INTERNAL:case Xu.UNAVAILABLE:case Xu.UNAUTHENTICATED:return!1;case Xu.INVALID_ARGUMENT:case Xu.NOT_FOUND:case Xu.ALREADY_EXISTS:case Xu.PERMISSION_DENIED:case Xu.FAILED_PRECONDITION:case Xu.ABORTED:case Xu.OUT_OF_RANGE:case Xu.UNIMPLEMENTED:case Xu.DATA_LOSS:return!0;default:return Ku(15467,{code:e})}}(n=t.code)&&n!==Xu.ABORTED){const n=e.Ta.shift();Zm(e).B_(),await Bm(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await zm(e)}var n}(e,t),Hm(e)&&Km(e)}async function Ym(e,t){const n=Qu(e);n.asyncQueue.verifyOperationInProgress(),zu(Tm,"RemoteStore received new credentials");const r=Om(n);n.Ea.add(3),await km(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Cm(n)}function Jm(e){return e.ma||(e.ma=function(e,t,n){const r=Qu(e);return r.sa(),new wm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Lm.bind(null,e),t_:Um.bind(null,e),r_:Fm.bind(null,e),H_:Vm.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Pm(e)?Dm(e):e.Ra.set("Unknown")):(await e.ma.stop(),Mm(e))})),e.ma}function Zm(e){return e.fa||(e.fa=function(e,t,n){const r=Qu(e);return r.sa(),new bm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gm.bind(null,e),r_:Xm.bind(null,e),ta:Wm.bind(null,e),na:Qm.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await zm(e)):(await e.fa.stop(),e.Ta.length>0&&(zu(Tm,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class eg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ju,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new eg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yu(Xu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(e,t){if($u("AsyncQueue",`${t}: ${e}`),Vl(e))return new Yu(Xu.UNAVAILABLE,`${t}: ${e}`);throw e}class ng{static emptySet(e){return new ng(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||bl.comparator(t.key,n.key):(e,t)=>bl.comparator(e.key,t.key),this.keyedMap=Rd(),this.sortedSet=new Wl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ng))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ng;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class rg{constructor(){this.ga=new Wl(bl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ku(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class ig{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ig(e,t,ng.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class sg{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class og{constructor(){this.queries=ag(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Qu(e),r=n.queries;n.queries=ag(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Yu(Xu.ABORTED,"Firestore shutting down"))}}function ag(){return new Cd(e=>_d(e),bd)}async function cg(e,t){const n=Qu(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new sg,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const e=tg(o,`Initialization of query '${Ed(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&dg(n)}async function ug(e,t){const n=Qu(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lg(e,t){const n=Qu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&dg(n)}function hg(e,t,n){const r=Qu(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function dg(e){e.Ca.forEach(e=>{e.next()})}var fg,pg;(pg=fg||(fg={})).Ma="default",pg.Cache="cache";class mg{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ig(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=ig.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fg.Cache}}class gg{constructor(e){this.key=e}}class yg{constructor(e){this.key=e}}class vg{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ud(),this.mutatedKeys=Ud(),this.eu=Td(e),this.tu=new ng(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new rg,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=Id(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.su(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.eu(l,a)>0||c&&this.eu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ku(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,c=a!==this.Za;return this.Za=a,0!==s.length||c?{snapshot:new ig(this.query,e.tu,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ud(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new yg(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new gg(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ud();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ig.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const wg="SyncEngine";class bg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _g{constructor(e){this.key=e,this.hu=!1}}class Eg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Cd(e=>_d(e),bd),this.Iu=new Map,this.Eu=new Set,this.du=new Wl(bl.comparator),this.Au=new Map,this.Ru=new Op,this.Vu={},this.mu=new Map,this.fu=Ep.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Ig(e,t,n=!0){const r=qg(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Sg(r,t,n,!0),i}async function Tg(e,t){const n=qg(e);await Sg(n,t,!0,!1)}async function Sg(e,t,n,r){const i=await function(e,t){const n=Qu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Fl.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new pp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}(e.localStore,yd(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await async function(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await em(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Fg(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await em(e.localStore,t,!0),o=new vg(t,s.Qs),a=o.ru(s.documents),c=Rf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);Fg(e,n,u.au);const l=new bg(t,n,o);return e.Tu.set(t,l),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Am(e.remoteStore,i),a}async function Cg(e,t,n){const r=Qu(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!bd(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xm(r.remoteStore,i.targetId),Lg(r,i.targetId)}).catch(Ul)):(Lg(r,i.targetId),await Zp(r.localStore,i.targetId,!0))}async function kg(e,t){const n=Qu(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xm(n.remoteStore,r.targetId))}async function Ag(e,t,n){const r=function(e){const t=Qu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Pg.bind(null,t),t}(e);try{const e=await function(e,t){const n=Qu(e),r=Nl.now(),i=t.reduce((e,t)=>e.add(t.key),Ud());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ad(),c=Ud();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=cf(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new hf(e.key,t,Fh(t.value.mapValue),tf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Nd(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Wl(ul)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Bg(r,e.changes),await zm(r.remoteStore)}catch(i){const e=tg(i,"Failed to persist write");n.reject(e)}}async function xg(e,t){const n=Qu(e);try{const e=await Yp(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Wu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Wu(r.hu,14607):e.removedDocuments.size>0&&(Wu(r.hu,42227),r.hu=!1))}),await Bg(n,e,t)}catch(r){await Ul(r)}}function Rg(e,t,n){const r=Qu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Qu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&dg(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ng(e,t,n){const r=Qu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Wl(bl.comparator);e=e.insert(s,Vh.newNoDocument(s,Dl.min()));const n=Ud().add(s),i=new xf(Dl.min(),new Map,new Wl(ul),e,n);await xg(r,i),r.du=r.du.remove(s),r.Au.delete(t),jg(r)}else await Zp(r.localStore,t,!1).then(()=>Lg(r,t,n)).catch(Ul)}async function Dg(e,t){const n=Qu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Qu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Fl.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Wu(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ud();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Mg(n,r,null),Og(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bg(n,e)}catch(i){await Ul(i)}}async function Pg(e,t,n){const r=Qu(e);try{const e=await function(e,t){const n=Qu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Wu(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Mg(r,t,n),Og(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Bg(r,e)}catch(i){await Ul(i)}}function Og(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Mg(e,t,n){const r=Qu(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Lg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Ug(e,t)})}function Ug(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(xm(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),jg(e))}function Fg(e,t,n){for(const r of n)r instanceof gg?(e.Ru.addReference(r.key,t),Vg(e,r)):r instanceof yg?(zu(wg,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Ug(e,r.key)):Ku(19791,{wu:r})}function Vg(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(zu(wg,"New document in limbo: "+n),e.Eu.add(r),jg(e))}function jg(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new bl(yl.fromString(t)),r=e.fu.next();e.Au.set(r,new _g(n)),e.du=e.du.insert(n,r),Am(e.remoteStore,new pp(yd(fd(n.path)),r,"TargetPurposeLimboResolution",jl.ce))}}async function Bg(e,t,n){const r=Qu(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=qp.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Qu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Fl.forEach(t,t=>Fl.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Fl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!Vl(r))throw r;zu(Gp,"Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function zg(e,t){const n=Qu(e);if(!n.currentUser.isEqual(t)){zu(wg,"User change. New user:",t.toKey());const e=await Qp(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).mu.forEach(e=>{e.forEach(e=>{e.reject(new Yu(Xu.CANCELLED,i))})}),r.mu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Bg(n,e.Ls)}var r,i}function $g(e,t){const n=Qu(e),r=n.Au.get(t);if(r&&r.hu)return Ud().add(r.key);{let e=Ud();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function qg(e){const t=Qu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$g.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ng.bind(null,t),t.Pu.H_=lg.bind(null,t.eventManager),t.Pu.yu=hg.bind(null,t.eventManager),t}class Hg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,n,r){return new Wp(e,t,n,r)}(this.persistence,new Kp,e.initialUser,this.serializer)}Cu(e){return new jp(zp.mi,this.serializer)}Du(e){return new nm}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hg.provider={build:()=>new Hg};class Kg extends Hg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Wu(this.persistence.referenceDelegate instanceof $p,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Cp(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?_p.withCacheSize(this.cacheSizeBytes):_p.DEFAULT;return new jp(e=>$p.mi(e,t),this.serializer)}}class Gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Rg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zg.bind(null,this.syncEngine),await async function(e,t){const n=Qu(e);t?(n.Ea.delete(2),await Cm(n)):t||(n.Ea.add(2),await km(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new og}createDatastore(e){const t=mm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new fm(r));var r;return function(e,t,n,r){return new Em(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Rg(this.syncEngine,e,0),s=sm.v()?new sm:new rm,new Sm(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Eg(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=Qu(e);zu(Tm,"RemoteStore shutting down."),t.Ea.add(5),await km(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gg.provider={build:()=>new Gg};class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$u("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Qg="FirestoreClient";class Xg{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Fu.UNAUTHENTICATED,this.clientId=cl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{zu(Qg,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zu(Qg,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ju;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=tg(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Yg(e,t){e.asyncQueue.verifyOperationInProgress(),zu(Qg,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Qp(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Jg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zu(Qg,"Using user provided OfflineComponentProvider");try{await Yg(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===Xu.FAILED_PRECONDITION||n.code===Xu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;qu("Error using user provided cache. Falling back to memory cache: "+i),await Yg(e,new Hg)}}else zu(Qg,"Using default OfflineComponentProvider"),await Yg(e,new Kg(void 0));var n;return e._offlineComponents}(e);zu(Qg,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ym(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ym(t.remoteStore,n)),e._onlineComponents=t}async function Zg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zu(Qg,"Using user provided OnlineComponentProvider"),await Jg(e,e._uninitializedComponentsProvider._online)):(zu(Qg,"Using default OnlineComponentProvider"),await Jg(e,new Gg))),e._onlineComponents}async function ey(e){const t=await Zg(e),n=t.eventManager;return n.onListen=Ig.bind(null,t.syncEngine),n.onUnlisten=Cg.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tg.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kg.bind(null,t.syncEngine),n}function ty(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ny=new Map,ry="firestore.googleapis.com",iy=!0;class sy{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Yu(Xu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ry,this.ssl=iy}else this.host=e.host,this.ssl=e.ssl??iy;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=bp;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Yu(Xu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Yu(Xu.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ty(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Yu(Xu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Yu(Xu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Yu(Xu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class oy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Yu(Xu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Yu(Xu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sy(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new el;switch(e.type){case"firstParty":return new il(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Yu(Xu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ny.get(e);t&&(zu("ComponentProvider","Removing Datastore"),ny.delete(e),t.terminate())}(this),Promise.resolve()}}class ay{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ay(this.firestore,e,this._query)}}class cy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cy(this.firestore,e,this._key)}toJSON(){return{type:cy._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Al(t,cy._jsonSchema))return new cy(e,n||null,new bl(yl.fromString(t.referencePath)))}}cy._jsonSchemaVersion="firestore/documentReference/1.0",cy._jsonSchema={type:kl("string",cy._jsonSchemaVersion),referencePath:kl("string")};class uy extends ay{constructor(e,t,n){super(e,t,fd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cy(this.firestore,null,new bl(e))}withConverter(e){return new uy(this.firestore,e,this._path)}}function ly(e,t,...n){if(e=Ga(e),_l("collection","path",t),e instanceof oy){const r=yl.fromString(t,...n);return Il(r),new uy(e,null,r)}{if(!(e instanceof cy||e instanceof uy))throw new Yu(Xu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yl.fromString(t,...n));return Il(r),new uy(e.firestore,null,r)}}function hy(e,t,...n){if(e=Ga(e),1===arguments.length&&(t=cl.newId()),_l("doc","path",t),e instanceof oy){const r=yl.fromString(t,...n);return El(r),new cy(e,null,new bl(r))}{if(!(e instanceof cy||e instanceof uy))throw new Yu(Xu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yl.fromString(t,...n));return El(r),new cy(e.firestore,e instanceof uy?e.converter:null,new bl(r))}}const dy="AsyncQueue";class fy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gm(this,"async_queue_retry"),this._c=()=>{const e=pm();e&&zu(dy,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=pm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ju;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vl(e))throw e;zu(dy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,$u("INTERNAL UNHANDLED ERROR: ",py(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=eg.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ku(47125,{Pc:py(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function py(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function my(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class gy extends oy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new fy,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fy(e),this._firestoreClient=void 0,await e}}}function yy(e){if(e._terminated)throw new Yu(Xu.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){const t=e._freezeSettings(),n=(r=e._databaseId,i=e._app?.options.appId||"",s=e._persistenceKey,o=t,new fh(r,i,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,ty(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator));var r,i,s,o;e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Xg(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class vy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vy(th.fromBase64String(e))}catch(t){throw new Yu(Xu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vy(th.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vy._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Al(e,vy._jsonSchema))return vy.fromBase64String(e.bytes)}}vy._jsonSchemaVersion="firestore/bytes/1.0",vy._jsonSchema={type:kl("string",vy._jsonSchemaVersion),bytes:kl("string")};class wy{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Yu(Xu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class by{constructor(e){this._methodName=e}}class _y{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Yu(Xu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Yu(Xu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ul(this._lat,e._lat)||ul(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_y._jsonSchemaVersion}}static fromJSON(e){if(Al(e,_y._jsonSchema))return new _y(e.latitude,e.longitude)}}_y._jsonSchemaVersion="firestore/geoPoint/1.0",_y._jsonSchema={type:kl("string",_y._jsonSchemaVersion),latitude:kl("number"),longitude:kl("number")};class Ey{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ey._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Al(e,Ey._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Ey(e.vectorValues);throw new Yu(Xu.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ey._jsonSchemaVersion="firestore/vectorValue/1.0",Ey._jsonSchema={type:kl("string",Ey._jsonSchemaVersion),vectorValues:kl("object")};const Iy=/^__.*__$/;class Ty{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new hf(e,this.data,this.fieldMask,t,this.fieldTransforms):new lf(e,this.data,t,this.fieldTransforms)}}class Sy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ku(40011,{Ac:e})}}class ky{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ky({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return By(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Cy(this.Ac)&&Iy.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ay{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mm(e)}Cc(e,t,n,r=!1){return new ky({Ac:e,methodName:t,Dc:n,path:wl.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xy(e){const t=e._freezeSettings(),n=mm(e._databaseId);return new Ay(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ry(e,t,n,r,i,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Uy("Data must be an object, but it was:",o,r);const a=My(r,o);let c,u;if(s.merge)c=new Zl(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Fy(t,r,n);if(!o.contains(i))throw new Yu(Xu.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);zy(e,i)||e.push(i)}c=new Zl(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new Ty(new Uh(a),c,u)}class Ny extends by{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ny}}function Dy(e,t,n,r){const i=e.Cc(1,t,n);Uy("Data must be an object, but it was:",i,r);const s=[],o=Uh.empty();Kl(r,(e,r)=>{const a=jy(t,e,n);r=Ga(r);const c=i.yc(a);if(r instanceof Ny)s.push(a);else{const e=Oy(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new Zl(s);return new Sy(o,a,i.fieldTransforms)}function Py(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[Fy(t,r,n)],c=[i];if(s.length%2!=0)throw new Yu(Xu.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Fy(t,s[d])),c.push(s[d+1]);const u=[],l=Uh.empty();for(let d=a.length-1;d>=0;--d)if(!zy(u,a[d])){const e=a[d];let t=c[d];t=Ga(t);const n=o.yc(e);if(t instanceof Ny)u.push(e);else{const r=Oy(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new Zl(u);return new Sy(l,h,o.fieldTransforms)}function Oy(e,t){if(Ly(e=Ga(e)))return Uy("Unsupported field value:",t,e),My(e,t);if(e instanceof by)return function(e,t){if(!Cy(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Oy(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ga(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Nl.fromDate(e);return{timestampValue:$f(t.serializer,n)}}if(e instanceof Nl){const n=new Nl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$f(t.serializer,n)}}if(e instanceof _y)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vy)return{bytesValue:qf(t.serializer,e._byteString)};if(e instanceof cy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Gf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ey)return n=e,r=t,{mapValue:{fields:{[gh]:{stringValue:wh},[bh]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.Sc("VectorValues must only contain numeric values.");return Vd(r.serializer,e)})}}}}};var n,r;throw t.Sc(`Unsupported field value: ${Sl(e)}`)}(e,t)}function My(e,t){const n={};return Gl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kl(e,(e,r)=>{const i=Oy(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ly(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Nl||e instanceof _y||e instanceof vy||e instanceof cy||e instanceof by||e instanceof Ey)}function Uy(e,t,n){if(!Ly(n)||!Tl(n)){const r=Sl(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Fy(e,t,n){if((t=Ga(t))instanceof wy)return t._internalPath;if("string"==typeof t)return jy(e,t);throw By("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vy=new RegExp("[~\\*/\\[\\]]");function jy(e,t,n){if(t.search(Vy)>=0)throw By(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wy(...t.split("."))._internalPath}catch(r){throw By(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function By(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Yu(Xu.INVALID_ARGUMENT,a+e+c)}function zy(e,t){return e.some(e=>e.isEqual(t))}class $y{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qy extends $y{data(){return super.data()}}function Hy(e,t){return"string"==typeof t?jy(e,t):t instanceof wy?t._internalPath:t._delegate._internalPath}function Ky(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Yu(Xu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class Wy extends Gy{}function Qy(e,t,...n){let r=[];t instanceof Gy&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Jy).length,n=e.filter(e=>e instanceof Xy).length;if(t>1||t>0&&n>0)throw new Yu(Xu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Xy extends Wy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xy(e,t,n)}_apply(e){const t=this._parse(e);return rv(e._query,t),new ay(e.firestore,e.converter,vd(e._query,t))}_parse(e){const t=xy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Yu(Xu.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){nv(o,s);const t=[];for(const n of o)t.push(tv(r,e,n));a={arrayValue:{values:t}}}else a=tv(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||nv(o,s),a=function(e,t,n,r=!1){return Oy(n,e.Cc(r?4:3,t))}(n,t,o,"in"===s||"not-in"===s);return Kh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Yy(e,t,n){const r=t,i=Hy("where",e);return Xy._create(i,r,n)}class Jy extends Gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Gh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)rv(n,i),n=vd(n,i)}(e._query,t),new ay(e.firestore,e.converter,vd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zy extends Wy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Yu(Xu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Yu(Xu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $h(t,n)}(e._query,this._field,this._direction);return new ay(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new dd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ev(e,t="asc"){const n=t,r=Hy("orderBy",e);return Zy._create(r,n)}function tv(e,t,n){if("string"==typeof(n=Ga(n))){if(""===n)throw new Yu(Xu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!md(t)&&-1!==n.indexOf("/"))throw new Yu(Xu.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(yl.fromString(n));if(!bl.isDocumentKey(r))throw new Yu(Xu.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rh(e,new bl(r))}if(n instanceof cy)return Rh(e,n._key);throw new Yu(Xu.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sl(n)}.`)}function nv(e,t){if(!Array.isArray(e)||0===e.length)throw new Yu(Xu.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Yu(Xu.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Yu(Xu.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class iv{convertValue(e,t="none"){switch(_h(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ih(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ku(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Kl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[bh].arrayValue?.values?.map(e=>ih(e.doubleValue));return new Ey(t)}convertGeoPoint(e){return new _y(ih(e.latitude),ih(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=rh(e);return new Nl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=yl.fromString(e);Wu(fp(n),9688,{name:e});const r=new mh(n.get(1),n.get(3)),i=new bl(n.popFirst(5));return r.isEqual(t)||$u(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function sv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ov{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class av extends $y{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Hy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Yu(Xu.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=av._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}av._jsonSchemaVersion="firestore/documentSnapshot/1.0",av._jsonSchema={type:kl("string",av._jsonSchemaVersion),bundleSource:kl("string","DocumentSnapshot"),bundleName:kl("string"),bundle:kl("string")};class cv extends av{data(e={}){return super.data(e)}}class uv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ov(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new cv(this._firestore,this._userDataWriter,n.key,n,new ov(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Yu(Xu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new cv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ov(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new cv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ov(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:lv(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Yu(Xu.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ku(61501,{type:e})}}function hv(e){e=Cl(e,cy);const t=Cl(e.firestore,gy);return function(e,t,n={}){const r=new Ju;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Wg({next:a=>{s.Nu(),t.enqueueAndForget(()=>ug(e,o));const c=a.docs.has(n);!c&&a.fromCache?i.reject(new Yu(Xu.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?i.reject(new Yu(Xu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new mg(fd(n.path),s,{includeMetadataChanges:!0,qa:!0});return cg(e,o)}(await ey(e),e.asyncQueue,t,n,r)),r.promise}(yy(t),e._key).then(n=>wv(t,e,n))}uv._jsonSchemaVersion="firestore/querySnapshot/1.0",uv._jsonSchema={type:kl("string",uv._jsonSchemaVersion),bundleSource:kl("string","QuerySnapshot"),bundleName:kl("string"),bundle:kl("string")};class dv extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new vy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cy(this.firestore,null,t)}}function fv(e){e=Cl(e,ay);const t=Cl(e.firestore,gy),n=yy(t),r=new dv(t);return Ky(e._query),function(e,t,n={}){const r=new Ju;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Wg({next:n=>{s.Nu(),t.enqueueAndForget(()=>ug(e,o)),n.fromCache&&"server"===r.source?i.reject(new Yu(Xu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new mg(n,s,{includeMetadataChanges:!0,qa:!0});return cg(e,o)}(await ey(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new uv(t,r,e,n))}function pv(e,t,n,...r){e=Cl(e,cy);const i=Cl(e.firestore,gy),s=xy(i);let o;return o="string"==typeof(t=Ga(t))||t instanceof wy?Py(s,"updateDoc",e._key,t,n,r):Dy(s,"updateDoc",e._key,t),vv(i,[o.toMutation(e._key,tf.exists(!0))])}function mv(e){return vv(Cl(e.firestore,gy),[new mf(e._key,tf.none())])}function gv(e,t){const n=Cl(e.firestore,gy),r=hy(e),i=sv(e.converter,t);return vv(n,[Ry(xy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tf.exists(!1))]).then(()=>r)}function yv(e,...t){e=Ga(e);let n={includeMetadataChanges:!1,source:"default"},r=0;"object"!=typeof t[r]||my(t[r])||(n=t[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(my(t[r])){const e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let s,o,a;if(e instanceof cy)o=Cl(e.firestore,gy),a=fd(e._key.path),s={next:n=>{t[r]&&t[r](wv(o,e,n))},error:t[r+1],complete:t[r+2]};else{const n=Cl(e,ay);o=Cl(n.firestore,gy),a=n._query;const i=new dv(o);s={next:e=>{t[r]&&t[r](new uv(o,i,n,e))},error:t[r+1],complete:t[r+2]},Ky(e._query)}return function(e,t,n,r){const i=new Wg(r),s=new mg(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>cg(await ey(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>ug(await ey(e),s))}}(yy(o),a,i,s)}function vv(e,t){return function(e,t){const n=new Ju;return e.asyncQueue.enqueueAndForget(async()=>Ag(await function(e){return Zg(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(yy(e),t)}function wv(e,t,n){const r=n.docs.get(t._key),i=new dv(e);return new av(e,i,t._key,r,new ov(n.hasPendingWrites,n.fromCache),t.converter)}class bv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xy(e)}set(e,t,n){this._verifyNotCommitted();const r=_v(e,this._firestore),i=sv(r.converter,t,n),s=Ry(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,tf.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=_v(e,this._firestore);let s;return s="string"==typeof(t=Ga(t))||t instanceof wy?Py(this._dataReader,"WriteBatch.update",i._key,t,n,r):Dy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,tf.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_v(e,this._firestore);return this._mutations=this._mutations.concat(new mf(t._key,tf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yu(Xu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _v(e,t){if((e=Ga(e)).firestore!==t)throw new Yu(Xu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ev(e){return yy(e=Cl(e,gy)),new bv(e,t=>vv(e,t))}!function(e,t=!0){Vu=uu,iu(new Wa("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new gy(new nl(e.getProvider("auth-internal")),new ol(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yu(Xu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),fu(Lu,Uu,e),fu(Lu,Uu,"esm2020")}();const Iv="firebasestorage.googleapis.com",Tv="storageBucket";class Sv extends La{constructor(e,t,n=0){super(Rv(e),`Firebase Storage: ${t} (${Rv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cv,kv,Av,xv;function Rv(e){return"storage/"+e}function Nv(){return new Sv(Cv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dv(e){return new Sv(Cv.INVALID_ARGUMENT,e)}function Pv(){return new Sv(Cv.APP_DELETED,"The Firebase app was deleted.")}function Ov(e,t){return new Sv(Cv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Mv(e){throw new Sv(Cv.INTERNAL_ERROR,"Internal error: "+e)}(kv=Cv||(Cv={})).UNKNOWN="unknown",kv.OBJECT_NOT_FOUND="object-not-found",kv.BUCKET_NOT_FOUND="bucket-not-found",kv.PROJECT_NOT_FOUND="project-not-found",kv.QUOTA_EXCEEDED="quota-exceeded",kv.UNAUTHENTICATED="unauthenticated",kv.UNAUTHORIZED="unauthorized",kv.UNAUTHORIZED_APP="unauthorized-app",kv.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",kv.INVALID_CHECKSUM="invalid-checksum",kv.CANCELED="canceled",kv.INVALID_EVENT_NAME="invalid-event-name",kv.INVALID_URL="invalid-url",kv.INVALID_DEFAULT_BUCKET="invalid-default-bucket",kv.NO_DEFAULT_BUCKET="no-default-bucket",kv.CANNOT_SLICE_BLOB="cannot-slice-blob",kv.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",kv.NO_DOWNLOAD_URL="no-download-url",kv.INVALID_ARGUMENT="invalid-argument",kv.INVALID_ARGUMENT_COUNT="invalid-argument-count",kv.APP_DELETED="app-deleted",kv.INVALID_ROOT_OPERATION="invalid-root-operation",kv.INVALID_FORMAT="invalid-format",kv.INTERNAL_ERROR="internal-error",kv.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class Lv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Lv.makeFromUrl(e,t)}catch(i){return new Lv(e,"")}if(""===n.path)return n;throw r=e,new Sv(Cv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Iv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Lv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Sv(Cv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Uv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Fv(e){return"string"==typeof e||e instanceof String}function Vv(e){return jv()&&e instanceof Blob}function jv(){return"undefined"!=typeof Blob}function Bv(e,t,n,r){if(r<t)throw Dv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Dv(`Invalid value for '${e}'. Expected ${n} or less.`)}function zv(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function $v(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}(xv=Av||(Av={}))[xv.NO_ERROR=0]="NO_ERROR",xv[xv.NETWORK_ERROR=1]="NETWORK_ERROR",xv[xv.ABORT=2]="ABORT";class qv{constructor(e,t,n,r,i,s,o,a,c,u,l,h=!0,d=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=l,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Hv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Av.NO_ERROR,i=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Av.ABORT;return void e(!1,new Hv(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Hv(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=Nv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Pv():new Sv(Cv.CANCELED,"User canceled the upload/download."))}else{r(new Sv(Cv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Hv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function l(...e){u||(u=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(f,c())},t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(u)return void d();if(e)return d(),void l.call(null,e,...t);if(c()||o)return d(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Hv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Kv(...e){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(jv())return new Blob(e);throw new Sv(Cv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Gv(e){if("undefined"==typeof atob)throw t="base-64",new Sv(Cv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const Wv="raw",Qv="base64",Xv="base64url",Yv="data_url";class Jv{constructor(e,t){this.data=e,this.contentType=t||null}}function Zv(e,t){switch(e){case Wv:return new Jv(ew(t));case Qv:case Xv:return new Jv(tw(e,t));case Yv:return new Jv(function(e){const t=new nw(e);return t.base64?tw(Qv,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Ov(Yv,"Malformed data URL.")}return ew(t)}(t.rest)}(t),new nw(t).contentType)}throw Nv()}function ew(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function tw(e,t){switch(e){case Qv:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Ov(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Xv:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Ov(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Gv(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw Ov(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class nw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ov(Yv,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class rw{constructor(e,t){let n=0,r="";Vv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vv(this.data_)){const s=this.data_,o=(r=e,i=t,(n=s).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===o?null:new rw(o)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new rw(n,!0)}var n,r,i}static getBlob(...e){if(jv()){const t=e.map(e=>e instanceof rw?e.data_:e);return new rw(Kv.apply(null,t))}{const t=e.map(e=>Fv(e)?Zv(Wv,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new rw(r,!0)}}uploadData(){return this.data_}}function iw(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function sw(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ow(e,t){return t}class aw{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ow}}let cw=null;function uw(){if(cw)return cw;const e=[];e.push(new aw("bucket")),e.push(new aw("generation")),e.push(new aw("metageneration")),e.push(new aw("name","fullPath",!0));const t=new aw("name");t.xform=function(e,t){return function(e){return!Fv(e)||e.length<2?e:sw(e)}(t)},e.push(t);const n=new aw("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new aw("timeCreated")),e.push(new aw("updated")),e.push(new aw("md5Hash",null,!0)),e.push(new aw("cacheControl",null,!0)),e.push(new aw("contentDisposition",null,!0)),e.push(new aw("contentEncoding",null,!0)),e.push(new aw("contentLanguage",null,!0)),e.push(new aw("contentType",null,!0)),e.push(new aw("metadata","customMetadata",!0)),cw=e,cw}function lw(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Lv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function hw(e,t,n){const r=iw(t);if(null===r)return null;return lw(e,r,n)}class dw{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fw(e){if(!e)throw Nv()}function pw(e,t){return function(n,r){const i=hw(e,r,t);return fw(null!==i),function(e,t,n,r){const i=iw(t);if(null===i)return null;if(!Fv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return zv("/b/"+o(i)+"/o/"+o(s),n,r)+$v({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function mw(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Sv(Cv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Sv(Cv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Sv(Cv.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Sv(Cv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function gw(e){const t=mw(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Sv(Cv.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function yw(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}(t,r,i),u=function(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}(c,n),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",h="\r\n--"+a+"--",d=rw.getBlob(l,r,h);if(null===d)throw new Sv(Cv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const f={name:c.fullPath},p=zv(s,e.host,e._protocol),m=e.maxUploadRetryTime,g=new dw(p,"POST",function(e,t){return function(n,r){const i=hw(e,r,t);return fw(null!==i),i}}(e,n),m);return g.urlParams=f,g.headers=o,g.body=d.uploadData(),g.errorHandler=mw(t),g}class vw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Av.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Av.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Av.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw Mv("cannot .send() more than once");if(Sa(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Mv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ww extends vw{initXhr(){this.xhr_.responseType="text"}}function bw(){return new ww}class _w{constructor(e,t){this._service=e,this._location=t instanceof Lv?t:Lv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _w(e,t)}get root(){const e=new Lv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sw(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Lv(this._location.bucket,e);return new _w(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Sv(Cv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ew(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=zv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new dw(r,"GET",pw(e,n),i);return s.errorHandler=gw(t),s}(e.storage,e._location,uw());return e.storage.makeRequestWithTokens(t,bw).then(e=>{if(null===e)throw new Sv(Cv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Iw(e,t){if(e instanceof Cw){const n=e;if(null==n._bucket)throw new Sv(Cv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tv+"' property when initializing the app?");const r=new _w(n,n._bucket);return null!=t?Iw(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Lv(e._location.bucket,n);return new _w(e.storage,r)}(e,t):e}function Tw(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Cw)return new _w(e,t);throw Dv("To use ref(service, url), the first argument must be a Storage instance.")}return Iw(e,t)}function Sw(e,t){const n=t?.[Tv];return null==n?null:Lv.makeFromBucketSpec(n,e)}class Cw{constructor(e,t,n,r,i,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Iv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Lv.makeFromBucketSpec(r,this._host):Sw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Lv.makeFromBucketSpec(this._url,e):this._bucket=Sw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(ou(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _w(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new Uv(Pv());{const s=function(e,t,n,r,i,s,o=!0,a=!1){const c=$v(e.urlParams),u=e.url+c,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new qv(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const kw="@firebase/storage",Aw="0.14.0",xw="storage";function Rw(e,t,n){return function(e,t,n){e._throwIfRoot("uploadBytes");const r=yw(e.storage,e._location,uw(),new rw(t,!0),n);return e.storage.makeRequestWithTokens(r,bw).then(t=>({metadata:t,ref:e}))}(e=Ga(e),t,n)}function Nw(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Cw(n,r,i,t,uu)}iu(new Wa(xw,Nw,"PUBLIC").setMultipleInstances(!0)),fu(kw,Aw,""),fu(kw,Aw,"esm2020");function Dw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}fu("firebase","12.1.0","app");const Pw=Dw,Ow=new Ua("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mw=new ic("@firebase/auth");function Lw(e,...t){Mw.logLevel<=Ja.ERROR&&Mw.error(`Auth (${uu}): ${e}`,...t)}function Uw(e,...t){throw Bw(e,...t)}function Fw(e,...t){return Bw(e,...t)}function Vw(e,t,n){const r={...Pw(),[t]:n};return new Ua("auth","Firebase",r).create(t,{appName:e.name})}function jw(e){return Vw(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bw(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Ow.create(e,...t)}function zw(e,t,...n){if(!e)throw Bw(t,...n)}function $w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Lw(t),new Error(t)}function qw(e,t){e||$w(t)}function Hw(){return"undefined"!=typeof self&&self.location?.href||""}function Kw(){return"undefined"!=typeof self&&self.location?.protocol||null}function Gw(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Kw()&&"https:"!==Kw()&&!Da()&&!("connection"in navigator)||navigator.onLine}class Ww{constructor(e,t){this.shortDelay=e,this.longDelay=t,qw(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Na())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Gw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qw(e,t){qw(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Xw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void $w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void $w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void $w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Jw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zw=new Ww(3e4,6e4);function eb(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function tb(e,t,n,r,i={}){return nb(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ba({key:e.config.apiKey,...s}).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:a,...i};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Sa(e.emulatorConfig.host)&&(c.credentials="include"),Xw.fetch()(await ib(e,e.config.apiHost,n,o),c)})}async function nb(e,t,n){e._canInitEmulator=!1;const r={...Yw,...t};try{const t=new ob(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ab(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ab(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ab(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ab(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Vw(e,a,o);Uw(e,a)}}catch(i){if(i instanceof La)throw i;Uw(e,"network-request-failed",{message:String(i)})}}async function rb(e,t,n,r,i={}){const s=await tb(e,t,n,r,i);return"mfaPendingCredential"in s&&Uw(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function ib(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Qw(e.config,i):`${e.config.apiScheme}://${i}`;if(Jw.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function sb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ob{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Fw(this.auth,"network-request-failed")),Zw.get())})}}function ab(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fw(e,t,r);return i.customData._tokenResponse=n,i}function cb(e){return void 0!==e&&void 0!==e.enterprise}class ub{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lb(e,t){return tb(e,"POST","/v1/accounts:lookup",t)}function hb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function db(e){return 1e3*Number(e)}function fb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Lw("JWT malformed, contained fewer than 3 sections"),null;try{const e=ya(n);return e?JSON.parse(e):(Lw("Failed to decode base64 JWT payload"),null)}catch(i){return Lw("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pb(e){const t=fb(e);return zw(t,"internal-error"),zw(void 0!==t.exp,"internal-error"),zw(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function mb(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof La&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class gb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class yb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hb(this.lastLoginAt),this.creationTime=hb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vb(e){const t=e.auth,n=await e.getIdToken(),r=await mb(e,lb(t,{idToken:n}));zw(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?wb(i.providerUserInfo):[],o=(a=e.providerData,c=s,[...a.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var a,c;const u=e.isAnonymous,l=!(e.email&&i.passwordHash||o?.length),h=!!u&&l,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yb(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,d)}function wb(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}class bb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zw(e.idToken,"internal-error"),zw(void 0!==e.idToken,"internal-error"),zw(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zw(0!==e.length,"internal-error");const t=pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(zw(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nb(e,{},async()=>{const n=Ba({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await ib(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Sa(e.emulatorConfig.host)&&(a.credentials="include"),Xw.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new bb;return n&&(zw("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(zw("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(zw("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bb,this.toJSON())}_performRefresh(){return $w("not implemented")}}function _b(e,t){zw("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Eb{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new gb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new yb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await mb(this,this.stsTokenManager.getToken(this.auth,e));return zw(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Ga(e),r=await n.getIdToken(t),i=fb(r);zw(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:hb(db(i.auth_time)),issuedAtTime:hb(db(i.iat)),expirationTime:hb(db(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=Ga(e);await vb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(zw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Eb({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){zw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ou(this.auth.app))return Promise.reject(jw(this.auth));const e=await this.getIdToken();return await mb(this,async function(e,t){return tb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:l,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=t;zw(l&&p,e,"internal-error");const m=bb.fromJSON(this.name,p);zw("string"==typeof l,e,"internal-error"),_b(n,e.name),_b(r,e.name),zw("boolean"==typeof h,e,"internal-error"),zw("boolean"==typeof d,e,"internal-error"),_b(i,e.name),_b(s,e.name),_b(o,e.name),_b(a,e.name),_b(c,e.name),_b(u,e.name);const g=new Eb({uid:l,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:c,lastLoginAt:u});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t,n=!1){const r=new bb;r.updateFromServerResponse(t);const i=new Eb({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vb(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];zw(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?wb(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||i?.length),o=new bb;o.updateFromIdToken(n);const a=new Eb({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new yb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||i?.length)};return Object.assign(a,c),a}}const Ib=new Map;function Tb(e){qw(e instanceof Function,"Expected a class definition");let t=Ib.get(e);return t?(qw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ib.set(e,t),t)}class Sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sb.type="NONE";const Cb=Sb;function kb(e,t,n){return`firebase:${e}:${t}:${n}`}class Ab{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kb(this.userKey,r.apiKey,i),this.fullPersistenceKey=kb("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await lb(this.auth,{idToken:e}).catch(()=>{});return t?Eb._fromGetAccountInfoResponse(this.auth,t,e):null}return Eb._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ab(Tb(Cb),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Tb(Cb);const s=kb(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"==typeof t){const r=await lb(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Eb._fromGetAccountInfoResponse(e,r,t)}else n=Eb._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new Ab(i,e,n)):new Ab(i,e,n)}}function xb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mb(t))return"Blackberry";if(Lb(t))return"Webos";if(Nb(t))return"Safari";if((t.includes("chrome/")||Db(t))&&!t.includes("edge/"))return"Chrome";if(Ob(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function Rb(e=Na()){return/firefox\//i.test(e)}function Nb(e=Na()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Db(e=Na()){return/crios\//i.test(e)}function Pb(e=Na()){return/iemobile/i.test(e)}function Ob(e=Na()){return/android/i.test(e)}function Mb(e=Na()){return/blackberry/i.test(e)}function Lb(e=Na()){return/webos/i.test(e)}function Ub(e=Na()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fb(){return function(){const e=Na();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Vb(e=Na()){return Ub(e)||Ob(e)||Lb(e)||Mb(e)||/windows phone/i.test(e)||Pb(e)}function jb(e,t=[]){let n;switch(e){case"Browser":n=xb(Na());break;case"Worker":n=`${xb(Na())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${uu}/${r}`}class Bb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class zb{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class $b{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hb(this),this.idTokenSubscription=new Hb(this),this.beforeStateQueue=new Bb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tb(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ab.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await lb(this,{idToken:e}),n=await Eb._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(uT){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ou(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==i||!s?.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return zw(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vb(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ou(this.app))return Promise.reject(jw(this));const t=e?Ga(e):null;return t&&zw(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&zw(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ou(this.app)?Promise.reject(jw(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ou(this.app)?Promise.reject(jw(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tb(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return tb(e,"GET","/v2/passwordPolicy",eb(e,t))}(this),t=new zb(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ua("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return tb(e,"POST","/v2/accounts:revokeToken",eb(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tb(e)||this._popupRedirectResolver;zw(t,this,"argument-error"),this.redirectPersistenceManager=await Ab.create(this,[Tb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(zw(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zw(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ou(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e,...t){Mw.logLevel<=Ja.WARN&&Mw.warn(`Auth (${uu}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qb(e){return Ga(e)}class Hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new qa(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return zw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gb(e){return Kb.loadJS(e)}class Wb{constructor(){this.enterprise=new Qb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Xb="NO_RECAPTCHA";class Yb{constructor(e){this.type="recaptcha-enterprise",this.auth=qb(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return tb(e,"GET","/v2/recaptchaConfig",eb(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ub(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;cb(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Xb)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Wb).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&cb(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Kb.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Gb(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Jb(e,t,n,r=!1,i=!1){const s=new Yb(e);let o;if(i)o=Xb;else try{o=await s.verify(n)}catch(c){o=await s.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Zb(e,t,n,r,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Jb(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){const i=await Jb(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function e_(e,t,n){const r=qb(e);zw(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=t_(t),{host:o,port:a}=function(e){const t=t_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:n_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:n_(t)}}}(t),c=null===a?"":`:${a}`,u={url:`${s}//${o}${c}/`},l=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return zw(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void zw(Va(u,r.config.emulator)&&Va(l,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,Sa(o)?(Ca(`${s}//${o}${c}`),Ra("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function t_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function n_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class r_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $w("not implemented")}_getIdTokenResponse(e){return $w("not implemented")}_linkToIdToken(e,t){return $w("not implemented")}_getReauthenticationResolver(e){return $w("not implemented")}}async function i_(e,t){return tb(e,"POST","/v1/accounts:signUp",t)}async function s_(e,t){return rb(e,"POST","/v1/accounts:signInWithPassword",eb(e,t))}class o_ extends r_{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new o_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new o_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zb(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",s_);case"emailLink":return async function(e,t){return rb(e,"POST","/v1/accounts:signInWithEmailLink",eb(e,t))}(e,{email:this._email,oobCode:this._password});default:Uw(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zb(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",i_);case"emailLink":return async function(e,t){return rb(e,"POST","/v1/accounts:signInWithEmailLink",eb(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Uw(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function a_(e,t){return rb(e,"POST","/v1/accounts:signInWithIdp",eb(e,t))}class c_ extends r_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new c_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Uw("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new c_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return a_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,a_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,a_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ba(t)}return e}}class u_{constructor(e){const t=za($a(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);zw(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=za($a(e)).link,n=t?za($a(t)).deep_link_id:null,r=za($a(e)).deep_link_id;return(r?za($a(r)).link:null)||r||n||t||e}(e);try{return new u_(t)}catch{return null}}}class l_{constructor(){this.providerId=l_.PROVIDER_ID}static credential(e,t){return o_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=u_.parseLink(t);return zw(n,"argument-error"),o_._fromEmailAndCode(e,n.code,n.tenantId)}}l_.PROVIDER_ID="password",l_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",l_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class h_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class d_ extends h_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class f_ extends d_{constructor(){super("facebook.com")}static credential(e){return c_._fromParams({providerId:f_.PROVIDER_ID,signInMethod:f_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return f_.credentialFromTaggedObject(e)}static credentialFromError(e){return f_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return f_.credential(e.oauthAccessToken)}catch{return null}}}f_.FACEBOOK_SIGN_IN_METHOD="facebook.com",f_.PROVIDER_ID="facebook.com";class p_ extends d_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return c_._fromParams({providerId:p_.PROVIDER_ID,signInMethod:p_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return p_.credentialFromTaggedObject(e)}static credentialFromError(e){return p_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return p_.credential(t,n)}catch{return null}}}p_.GOOGLE_SIGN_IN_METHOD="google.com",p_.PROVIDER_ID="google.com";class m_ extends d_{constructor(){super("github.com")}static credential(e){return c_._fromParams({providerId:m_.PROVIDER_ID,signInMethod:m_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return m_.credentialFromTaggedObject(e)}static credentialFromError(e){return m_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return m_.credential(e.oauthAccessToken)}catch{return null}}}m_.GITHUB_SIGN_IN_METHOD="github.com",m_.PROVIDER_ID="github.com";class g_ extends d_{constructor(){super("twitter.com")}static credential(e,t){return c_._fromParams({providerId:g_.PROVIDER_ID,signInMethod:g_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return g_.credentialFromTaggedObject(e)}static credentialFromError(e){return g_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return g_.credential(t,n)}catch{return null}}}g_.TWITTER_SIGN_IN_METHOD="twitter.com",g_.PROVIDER_ID="twitter.com";class y_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Eb._fromIdTokenResponse(e,n,r),s=v_(n);return new y_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=v_(n);return new y_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function v_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class w_ extends La{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,w_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new w_(e,t,n,r)}}function b_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw w_._fromErrorAndOperation(e,n,t,r);throw n})}async function __(e,t,n=!1){if(ou(e.app))return Promise.reject(jw(e));const r="signIn",i=await b_(e,r,t),s=await y_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function E_(e,t,n){return ou(e.app)?Promise.reject(jw(e)):async function(e,t){return __(qb(e),t)}(Ga(e),l_.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&async function(e){const t=qb(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}(e),t})}function I_(e,t,n,r){return Ga(e).onAuthStateChanged(t,n,r)}function T_(e){return Ga(e).signOut()}const S_="__sak";class C_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(S_,"1"),this.storage.removeItem(S_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class k_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const A_=k_;class x_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}x_.type="SESSION";const R_=x_;class N_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new N_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function D_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}N_.receivers=[];class P_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const c=D_("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function O_(){return window}function M_(){return void 0!==O_().WorkerGlobalScope&&"function"==typeof O_().importScripts}const L_="firebaseLocalStorageDb",U_="firebaseLocalStorage",F_="fbase_key";class V_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function j_(e,t){return e.transaction([U_],t?"readwrite":"readonly").objectStore(U_)}function B_(){const e=indexedDB.open(L_,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(U_,{keyPath:F_})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(U_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(L_);return new V_(e).toPromise()}(),t(await B_()))})})}async function z_(e,t,n){const r=j_(e,!0).put({[F_]:t,value:n});return new V_(r).toPromise()}function $_(e,t){const n=j_(e,!0).delete(t);return new V_(n).toPromise()}class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await B_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N_._getInstance(M_()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new P_(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B_();return await z_(e,S_,"1"),await $_(e,S_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>z_(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=j_(e,!1).get(t),r=await new V_(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=j_(e,!1).getAll();return new V_(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}q_.type="LOCAL";const H_=q_;new Ww(3e4,6e4);class K_ extends r_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return a_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return a_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return a_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function G_(e){return __(e.auth,new K_(e),e.bypassAuthState)}function W_(e){const{auth:t,user:n}=e;return zw(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(ou(r.app))return Promise.reject(jw(r));const i="reauthenticate";try{const s=await mb(e,b_(r,i,t,e),n);zw(s.idToken,r,"internal-error");const o=fb(s.idToken);zw(o,r,"internal-error");const{sub:a}=o;return zw(e.uid===a,r,"user-mismatch"),y_._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Uw(r,"user-mismatch"),s}}(n,new K_(e),e.bypassAuthState)}async function Q_(e){const{auth:t,user:n}=e;return zw(n,t,"internal-error"),async function(e,t,n=!1){const r=await mb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return y_._forOperation(e,"link",r)}(n,new K_(e),e.bypassAuthState)}class X_{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G_;case"linkViaPopup":case"linkViaRedirect":return Q_;case"reauthViaPopup":case"reauthViaRedirect":return W_;default:Uw(this.auth,"internal-error")}}resolve(e){qw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Y_=new Ww(2e3,1e4);class J_ extends X_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,J_.currentPopupAction&&J_.currentPopupAction.cancel(),J_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zw(e,this.auth,"internal-error"),e}async onExecution(){qw(1===this.filter.length,"Popup operations only handle one event");const e=D_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Fw(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fw(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,J_.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fw(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Y_.get())};e()}}J_.currentPopupAction=null;const Z_="pendingRedirect",eE=new Map;class tE extends X_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=eE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return kb(Z_,e.config.apiKey,e.name)}(t),r=function(e){return Tb(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}eE.set(this.auth._key(),e)}return this.bypassAuthState||eE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function nE(e,t){eE.set(e._key(),t)}async function rE(e,t,n=!1){if(ou(e.app))return Promise.reject(jw(e));const r=qb(e),i=function(e,t){return t?Tb(t):(zw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new tE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class iE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!oE(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fw(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sE(e))}saveEventToCache(e){this.cachedEventUids.add(sE(e)),this.lastProcessedEventTime=Date.now()}}function sE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function oE({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}const aE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cE=/^https?/;async function uE(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return tb(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(lE(n))return}catch{}Uw(e,"unauthorized-domain")}function lE(e){const t=Hw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!cE.test(n))return!1;if(aE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hE=new Ww(3e4,6e4);function dE(){const e=O_().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fE(e){return new Promise((t,n)=>{function r(){dE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dE(),n(Fw(e,"network-request-failed"))},timeout:hE.get()})}if(O_().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!O_().gapi?.load){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return O_()[t]=()=>{gapi.load?r():n(Fw(e,"network-request-failed"))},Gb(`${Kb.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw pE=null,e})}let pE=null;const mE=new Ww(5e3,15e3),gE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vE(e){const t=e.config;zw(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Qw(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:uu},i=yE.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ba(r).slice(1)}`}async function wE(e){const t=await function(e){return pE=pE||fE(e),pE}(e),n=O_().gapi;return zw(n,e,"internal-error"),t.open({where:document.body,url:vE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gE,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Fw(e,"network-request-failed"),s=O_().setTimeout(()=>{r(i)},mE.get());function o(){O_().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const bE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _E{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function EE(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...bE,width:r.toString(),height:i.toString(),top:s,left:o},u=Na().toLowerCase();n&&(a=Db(u)?"_blank":n),Rb(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Na()){return Ub(e)&&!!window.navigator?.standalone}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new _E(null);const h=window.open(t||"",a,l);zw(h,e,"popup-blocked");try{h.focus()}catch(d){}return new _E(h)}const IE="__/auth/handler",TE="emulator/auth/handler",SE=encodeURIComponent("fac");async function CE(e,t,n,r,i,s){zw(e.config.authDomain,e,"auth-domain-config-required"),zw(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:uu,eventId:i};if(t instanceof h_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof d_){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?`#${SE}=${encodeURIComponent(c)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${IE}`;return Qw(e,TE)}(e)}?${Ba(a).slice(1)}${u}`}const kE="webStorageSupport";const AE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=rE,this._overrideRedirectResult=nE}async _openPopup(e,t,n,r){qw(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return EE(e,await CE(e,t,n,Hw(),r),D_())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){O_().location.href=e}(await CE(e,t,n,Hw(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qw(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await wE(e),n=new iE(e);return t.register("authEvent",t=>{zw(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kE,{type:kE},n=>{const r=n?.[0]?.[kE];void 0!==r&&t(!!r),Uw(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vb()||Nb()||Ub()}};var xE="@firebase/auth",RE="1.11.0";class NE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const DE=Ia("authIdTokenMaxAge")||300;let PE=null;var OE;Kb={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Fw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},OE="Browser",iu(new Wa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;zw(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:OE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jb(OE)},c=new $b(n,r,i,a);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Tb);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),iu(new Wa("auth-internal",e=>{const t=qb(e.getProvider("auth").getImmediate());return new NE(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fu(xE,RE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(OE)),fu(xE,RE,"esm2020");const ME="@firebase/installations",LE="0.6.19",UE=1e4,FE=`w:${LE}`,VE="FIS_v2",jE=36e5,BE=new Ua("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function zE(e){return e instanceof La&&e.code.includes("request-failed")}function $E({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function qE(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function HE(e,t){const n=(await t.json()).error;return BE.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function KE({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function GE(e,{refreshToken:t}){const n=KE(e);return n.append("Authorization",function(e){return`${VE} ${e}`}(t)),n}async function WE(e){const t=await e();return t.status>=500&&t.status<600?e():t}function QE(e){return new Promise(t=>{setTimeout(t,e)})}const XE=/^[cdef][\w-]{21}$/;function YE(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return XE.test(t)?t:""}catch{return""}}function JE(e){return`${e.appName}!${e.appId}`}const ZE=new Map;function eI(e,t){const n=JE(e);tI(n,t),function(e,t){const n=function(){!nI&&"BroadcastChannel"in self&&(nI=new BroadcastChannel("[Firebase] FID Change"),nI.onmessage=e=>{tI(e.data.key,e.data.fid)});return nI}();n&&n.postMessage({key:e,fid:t});0===ZE.size&&nI&&(nI.close(),nI=null)}(n,t)}function tI(e,t){const n=ZE.get(e);if(n)for(const r of n)r(t)}let nI=null;const rI="firebase-installations-store";let iI=null;function sI(){return iI||(iI=yc("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(rI)}})),iI}async function oI(e,t){const n=JE(e),r=(await sI()).transaction(rI,"readwrite"),i=r.objectStore(rI),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||eI(e,t.fid),t}async function aI(e){const t=JE(e),n=(await sI()).transaction(rI,"readwrite");await n.objectStore(rI).delete(t),await n.done}async function cI(e,t){const n=JE(e),r=(await sI()).transaction(rI,"readwrite"),i=r.objectStore(rI),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||eI(e,o.fid),o}async function uI(e){let t;const n=await cI(e.appConfig,n=>{const r=function(e){const t=e||{fid:YE(),registrationStatus:0};return dI(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(BE.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=$E(e),i=KE(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:VE,appId:e.appId,sdkVersion:FE},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await WE(()=>fetch(r,a));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:qE(e.authToken)}}throw await HE("Create Installation",c)}(e,t);return oI(e.appConfig,n)}catch(n){throw zE(n)&&409===n.customData.serverCode?await aI(e.appConfig):await oI(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:lI(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function lI(e){let t=await hI(e.appConfig);for(;1===t.registrationStatus;)await QE(100),t=await hI(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await uI(e);return n||t}return t}function hI(e){return cI(e,e=>{if(!e)throw BE.create("installation-not-found");return dI(e)})}function dI(e){return 1===(t=e).registrationStatus&&t.registrationTime+UE<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function fI({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${$E(e)}/${t}/authTokens:generate`}(e,n),i=GE(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:FE,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await WE(()=>fetch(r,a));if(c.ok){return qE(await c.json())}throw await HE("Generate Auth Token",c)}async function pI(e,t=!1){let n;const r=await cI(e.appConfig,r=>{if(!gI(r))throw BE.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+jE}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await mI(e.appConfig);for(;1===n.authToken.requestStatus;)await QE(100),n=await mI(e.appConfig);const r=n.authToken;return 0===r.requestStatus?pI(e,t):r}(e,t),r;{if(!navigator.onLine)throw BE.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}(r);return n=async function(e,t){try{const n=await fI(e,t),r={...t,authToken:n};return await oI(e.appConfig,r),n}catch(n){if(!zE(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n={...t,authToken:{requestStatus:0}};await oI(e.appConfig,n)}else await aI(e.appConfig);throw n}}(e,t),t}});return n?await n:r.authToken}function mI(e){return cI(e,e=>{if(!gI(e))throw BE.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+UE<Date.now()?{...e,authToken:{requestStatus:0}}:e;var n})}function gI(e){return void 0!==e&&2===e.registrationStatus}async function yI(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await uI(e);t&&await t}(n);return(await pI(n,t)).token}function vI(e){return BE.create("missing-app-config-values",{valueName:e})}const wI="installations",bI=e=>{const t=su(e.getProvider("app").getImmediate(),wI).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await uI(t);return r?r.catch(console.error):pI(t).catch(console.error),n.fid}(t),getToken:e=>yI(t,e)}};iu(new Wa(wI,e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw vI("App Configuration");if(!e.name)throw vI("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw vI(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:su(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),iu(new Wa("installations-internal",bI,"PRIVATE")),fu(ME,LE),fu(ME,LE,"esm2020");const _I="analytics",EI="https://www.googletagmanager.com/gtag/js",II=new ic("@firebase/analytics"),TI=new Ua("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function SI(e){if(!e.startsWith(EI)){const t=TI.create("invalid-gtag-resource",{gtagURL:e});return II.warn(t.message),""}return e}function CI(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function kI(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:SI}),r=document.createElement("script"),i=`${EI}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function AI(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await CI(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){II.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await CI(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(a){II.error(a)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(o){II.error(o)}}}const xI=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function RI(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function NI(e,t=xI,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw TI.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw TI.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new PI;return setTimeout(async()=>{a.abort()},6e4),DI({appId:r,apiKey:i,measurementId:s},o,a,t)}async function DI(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=xI){const{appId:s,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(TI.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(a){if(o)return II.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:s,measurementId:o};throw a}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:RI(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(i,r);if(200!==s.status&&304!==s.status){let e="";try{const t=await s.json();t.error?.message&&(e=t.error.message)}catch(o){}throw TI.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return i.deleteThrottleMetadata(s),t}catch(a){const t=a;if(!function(e){if(!(e instanceof La&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(s),o)return II.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t?.message}]`),{appId:s,measurementId:o};throw a}const c=503===Number(t?.customData?.httpStatus)?Ka(n,i.intervalMillis,30):Ka(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(s,u),II.debug(`Calling attemptFetch again in ${c} millis`),DI(e,u,r,i)}}class PI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function OI(e,t,n,r,i,s,o){const a=NI(e);a.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&II.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>II.error(e)),t.push(a);const c=async function(){if(!Oa())return II.warn(TI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Ma()}catch(e){return II.warn(TI.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,l]=await Promise.all([a,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(EI)&&n.src.includes(e))return n;return null})(s)||kI(s,u.measurementId),i("js",new Date);const h=o?.config??{};return h.origin="firebase",h.update=!0,null!=l&&(h.firebase_id=l),i("config",u.measurementId,h),u.measurementId}class MI{constructor(e){this.app=e}_delete(){return delete LI[this.app.options.appId],Promise.resolve()}}let LI={},UI=[];const FI={};let VI,jI,BI="dataLayer",zI=!1;function $I(){const e=[];if(Da()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=TI.create("invalid-analytics-context",{errorInfo:t});II.warn(n.message)}}function qI(e,t,n){$I();const r=e.options.appId;if(!r)throw TI.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw TI.create("no-api-key");II.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=LI[r])throw TI.create("already-exists",{id:r});if(!zI){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(BI);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=AI(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(LI,UI,FI,BI,"gtag");jI=e,VI=t,zI=!0}LI[r]=OI(e,UI,FI,t,VI,BI,n);return new MI(e)}const HI="@firebase/analytics",KI="0.10.18";iu(new Wa(_I,(e,{options:t})=>qI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),iu(new Wa("analytics-internal",function(e){try{const t=e.getProvider(_I).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=Ga(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,{...r,send_to:i})}}(jI,LI[e.app.options.appId],t,n,r).catch(e=>II.error(e))}(t,e,n,r)}}catch(t){throw TI.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),fu(HI,KI),fu(HI,KI,"esm2020");const GI={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},WI=(()=>{Boolean(GI.apiKey&&GI.authDomain&&GI.projectId&&"mock-api-key-for-development"!==GI.apiKey&&!GI.apiKey.includes("demo"));return GI})();Boolean(WI.apiKey&&WI.authDomain&&WI.projectId);const QI=!0;let XI,YI,JI,ZI,eT;try{XI=du().length?du()[0]:lu(WI),YI=function(e){const t="object"==typeof e?e:hu(),n="string"==typeof e?e:ph,r=su(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=_a("firestore");e&&function(e,t,n,r={}){e=Cl(e,oy);const i=Sa(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(Ca(`https://${a}`),Ra("Firestore",!0)),s.host!==ry&&s.host!==a&&qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!Va(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Fu.MOCK_USER;else{t=ka(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Yu(Xu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Fu(i)}e._authCredentials=new tl(new Zu(t,n))}}(r,...e)}return r}(XI),JI=function(e=hu()){const t=su(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=su(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Va(n.getOptions(),t??{}))return e;Uw(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:AE,persistence:[H_,A_,R_]}),r=Ia("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>DE)return;const r=t?.token;PE!==r&&(PE=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Ga(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Ga(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ba("auth");return s&&e_(n,`http://${s}`),n}(XI),eT=function(e=hu(),t){const n=su(e=Ga(e),xw).getImmediate({identifier:t}),r=_a("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`;const i=Sa(t);i&&(Ca(`https://${e.host}/b`),Ra("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"==typeof s?s:ka(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(XI),"undefined"!=typeof window&&(ZI=function(e=hu()){const t=su(e=Ga(e),_I);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=su(e,_I);if(n.isInitialized()){const e=n.getImmediate();if(Va(t,n.getOptions()))return e;throw TI.create("already-initialized")}return n.initialize({options:t})}(e)}(XI))}catch(lT){XI=void 0,YI=void 0,JI=void 0,ZI=void 0,eT=void 0}const tT=[{title:"Odoo ERP Enterprise Implementation",description:"Full-scale Odoo ERP implementation for a manufacturing giant, integrating Inventory, Manufacturing, Accounting, and CRM modules.",longDescription:"Architected and deployed a comprehensive Odoo Enterprise solution for a multi-national manufacturing corporation. The system integrates complex manufacturing workflows (MRP II) with real-time inventory tracking, multi-currency accounting, and a custom CRM. Implemented automated quality control checkpoints and IoT integration for machine monitoring. The solution handles over 50,000 daily stock moves and synchronizes data across 12 global warehouses.",category:"ERP Solutions",status:"completed",achievements:["Unified 12 global warehouses","Reduced inventory discrepancy by 98%","Automated 85% of accounting entries","Integrated IoT sensors for real-time monitoring","Customized 20+ Odoo modules","Migrated 5M+ historical records","Achieved ROI in 8 months"],technologies:["Python","Odoo 17","PostgreSQL","Docker","Redis","Nginx","Linux","XML-RPC","React","AWS"],tags:["erp","odoo","python","enterprise","manufacturing","iot"],image:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop",logo:"/odoo-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!0,disabled:!1,priority:100,startDate:"2023-01-01",endDate:"2023-12-30",duration:"12 months",clientInfo:{name:"Global Manufacturing Corp",industry:"Manufacturing",size:"enterprise",location:"International",isPublic:!1},metrics:{usersReached:1200,performanceImprovement:"40% efficiency gain",revenueImpact:"$3M+ annual savings",customMetrics:{daily_stock_moves:5e4,warehouses_connected:12,modules_customized:20,data_records_migrated:"5M+"}},challenges:["Legacy system data fragmentation","Complex multi-currency consolidation","Real-time synchronization latency","User adoption across different cultures"],solutions:["Custom ETL pipeline for data migration","Distributed architecture with read replicas","Progressive Web App for warehouse staff","Automated testing suite for custom modules"],teamSize:12,role:"Lead ERP Architect",createdAt:17040672e5,updatedAt:17067456e5,version:1},{title:"Cegid Retail & POS Architecture",description:"Omnichannel retail management solution using Cegid Retail Y2, connecting physical stores with e-commerce platforms.",longDescription:"Designed and implemented a unified retail architecture for a luxury fashion retailer with 50+ stores. Leveraged Cegid Retail Y2 to synchronize POS data, inventory, and customer loyalty programs in real-time. Developed custom middleware to bridge Cegid with Shopify Plus, enabling Click & Collect, Ship from Store, and unified customer profiles. The system processes high-volume transactions with zero downtime during peak seasons.",category:"Retail Solutions",status:"completed",achievements:["Connected 50+ physical stores","Enabled real-time omnichannel inventory","Reduced stockouts by 60%","Unified customer loyalty program","Zero downtime during Black Friday","Automated replenishment workflows","Integrated mobile POS for staff"],technologies:["Cegid Retail Y2",".NET","SQL Server","Azure","Shopify API","Node.js","React Native","Redis"],tags:["retail","cegid","pos","omnichannel","ecommerce","integration"],image:"https://images.unsplash.com/photo-1556740738-b6a63e27c4df?w=800&h=600&fit=crop",logo:"/cegid-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!0,disabled:!1,priority:95,startDate:"2023-04-01",endDate:"2023-11-30",duration:"8 months",clientInfo:{name:"Luxury Fashion Brand",industry:"Retail",size:"enterprise",location:"Europe",isPublic:!1},metrics:{usersReached:500,performanceImprovement:"60% less stockouts",revenueImpact:"25% sales increase",customMetrics:{stores_connected:50,transactions_peak_hour:5e3,inventory_accuracy:"99.8%",omnichannel_orders:"30%"}},teamSize:8,role:"Technical Lead",createdAt:17014752e5,updatedAt:17058816e5,version:1},{title:"Otello Hotel Management System",description:"Next-gen Property Management System (PMS) for a hotel chain, featuring booking engine, housekeeping, and revenue management.",longDescription:"Deployed a customized Otello PMS for a boutique hotel chain, revolutionizing their guest experience and operational efficiency. The system features a custom booking engine with dynamic pricing, a mobile app for contactless check-in/out, and a housekeeping management module. Includes a state-of-the-art task management system and precise time-tracking utilities that streamline staff operations. The system is a perfect, awesome solution for modern hospitality management. Integrated with channel managers (Booking.com, Expedia) and payment gateways. The solution improved occupancy rates by 15% through AI-driven revenue management.",category:"Hospitality Solutions",status:"completed",achievements:["Increased occupancy by 15%","Enabled contactless check-in","Automated housekeeping schedules","Real-time channel synchronization","Integrated payment processing","AI-driven dynamic pricing","Reduced front-desk workload by 40%"],technologies:["Otello PMS","React","Node.js","GraphQL","PostgreSQL","AWS Lambda","Stripe","Twilio"],tags:["hospitality","pms","booking","hotel","saas","automation"],image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&h=600&fit=crop",logo:"/otello-logo.svg",icon:"hotel",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!0,disabled:!1,priority:90,startDate:"2023-06-01",endDate:"2024-01-15",duration:"7 months",clientInfo:{name:"Boutique Hotel Group",industry:"Hospitality",size:"medium",location:"Mediterranean",isPublic:!1},metrics:{usersReached:200,performanceImprovement:"40% efficiency boost",revenueImpact:"15% revenue growth",customMetrics:{rooms_managed:500,bookings_monthly:2e3,checkin_time_reduction:"70%",ota_sync_speed:"<2s"}},teamSize:6,role:"Solution Architect",createdAt:16988832e5,updatedAt:17061408e5,version:1},{title:"Moodle LMS & E-Learning Ecosystem",description:"Enterprise-grade Learning Management System serving 50,000+ students with custom modules and high-availability infrastructure.",longDescription:"Architected a scalable Moodle LMS environment for a major university. The solution includes a high-availability server cluster (Ubuntu/Nginx/PHP-FPM), custom plugin development for advanced grading and attendance, and integration with Microsoft Teams for live classes. Implemented a video streaming server for on-demand content and a gamification module to boost student engagement.",category:"Education Technology",status:"completed",achievements:["Supports 50,000+ concurrent users","Developed 5 custom Moodle plugins","99.99% uptime during exam periods","Integrated live video classrooms","Automated certificate generation","Optimized database for high load","Mobile-friendly responsive theme"],technologies:["Moodle","PHP","MariaDB","Redis","Linux (Ubuntu)","Nginx","JavaScript","SCORM","WebRTC"],tags:["edtech","moodle","lms","php","education","server-admin"],image:"https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=800&h=600&fit=crop",logo:"/moodle-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!0,disabled:!1,priority:88,startDate:"2022-09-01",endDate:"2023-03-30",duration:"7 months",clientInfo:{name:"National University",industry:"Education",size:"enterprise",location:"North Africa",isPublic:!1},metrics:{usersReached:5e4,performanceImprovement:"99.99% uptime",customMetrics:{concurrent_users:5e3,courses_hosted:1200,daily_logins:25e3,plugins_developed:5}},challenges:["High concurrency during exams","Complex gradebook calculations","Video bandwidth optimization","Legacy data migration"],solutions:["Redis caching layer implementation","Database sharding strategy","CDN integration for media","Custom import scripts"],teamSize:5,role:"Lead LMS Developer",createdAt:16881696e5,updatedAt:17039808e5,version:1},{title:"OpenProject Enterprise Management",description:"Customized OpenProject deployment for a construction firm, featuring Gantt charts, resource planning, and cost tracking.",longDescription:"Implemented a tailored OpenProject solution for a large-scale construction company. The platform manages complex multi-year projects with advanced Gantt charts, resource allocation, and budget tracking. Developed custom plugins for construction-specific workflows (RFIs, Submittals) and integrated with BIM software. The system ensures projects stay on schedule and within budget.",category:"Project Management",status:"completed",achievements:["Managed $500M+ in project value","Reduced project delays by 25%","Real-time budget tracking","Integrated BIM model viewer","Custom workflow automation","Mobile app for field reports","Automated stakeholder reporting"],technologies:["OpenProject","Ruby on Rails","Angular","PostgreSQL","Docker","Linux","BIM API"],tags:["project-management","openproject","construction","ruby","angular","enterprise"],image:"https://images.unsplash.com/photo-1507537297725-24a1c434c175?w=800&h=600&fit=crop",logo:"/openproject-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!1,disabled:!1,priority:85,startDate:"2023-02-01",endDate:"2023-08-30",duration:"7 months",clientInfo:{name:"Construction Giants Ltd",industry:"Construction",size:"large",location:"Middle East",isPublic:!1},metrics:{usersReached:300,performanceImprovement:"25% fewer delays",revenueImpact:"10% cost reduction",customMetrics:{projects_managed:45,budget_tracked:"$500M+",rfis_processed:5e3,field_reports_daily:150}},teamSize:4,role:"System Integrator",createdAt:16959456e5,updatedAt:17049312e5,version:1},{title:"Jira Service Management Enterprise",description:"Enterprise-wide Jira Service Management implementation for IT service delivery, automating incidents, changes, and problems.",longDescription:"Rolled out Jira Service Management (JSM) for a financial institution's IT department. Configured complex workflows for Incident, Problem, and Change Management following ITIL best practices. Implemented automation rules to triage tickets, SLA monitoring, and a self-service portal with a knowledge base. Integrated with Slack for notifications and monitoring tools for auto-ticket creation.",category:"ITSM Solutions",status:"completed",achievements:["Reduced MTTR by 50%","Automated 60% of ticket routing","Implemented ITIL best practices","Created 500+ knowledge articles","Integrated monitoring alerts","95% SLA compliance achieved","Seamless Slack integration"],technologies:["Jira Service Management","Groovy (ScriptRunner)","Automation for Jira","Slack API","Rest API"],tags:["jira","itsm","automation","itil","workflow","enterprise"],image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=600&fit=crop",logo:"/jira-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!1,disabled:!1,priority:82,startDate:"2023-08-01",endDate:"2024-02-01",duration:"6 months",clientInfo:{name:"FinTech Solutions",industry:"Finance",size:"large",location:"Remote",isPublic:!1},metrics:{usersReached:2e3,performanceImprovement:"50% faster resolution",customMetrics:{tickets_monthly:3e3,automation_rate:"60%",sla_compliance:"95%",kb_articles:500}},teamSize:3,role:"Atlassian Consultant",createdAt:17040672e5,updatedAt:17197056e5,version:1},{title:"Server Infrastructure & Cloud DevOps",description:"High-performance server infrastructure setup and management using Linux, Docker, and Kubernetes for scalable applications.",longDescription:"Designed and managed the complete server infrastructure for a SaaS platform. Migrated legacy monolithic applications to a microservices architecture using Docker and Kubernetes. Implemented CI/CD pipelines with GitHub Actions, automated backups, and comprehensive monitoring with Prometheus and Grafana. Hardened security with firewalls, VPNs, and regular audits.",category:"DevOps & Infrastructure",status:"active",achievements:["99.999% system availability","Automated CI/CD pipelines","Reduced server costs by 30%","Implemented zero-trust security","Scalable Kubernetes cluster","Real-time monitoring dashboard","Disaster recovery plan tested"],technologies:["Linux","Docker","Kubernetes","AWS","Terraform","Ansible","Nginx","Prometheus","Grafana","Bash"],tags:["devops","infrastructure","linux","cloud","security","kubernetes"],image:"https://images.unsplash.com/photo-1558494949-ef526b0042a0?w=800&h=600&fit=crop",logo:"/server-logo.svg",icon:"",liveUrl:"",githubUrl:"",demoUrl:"",caseStudyUrl:"",featured:!0,disabled:!1,priority:80,startDate:"2022-01-01",endDate:"2024-03-01",duration:"Ongoing",clientInfo:{name:"SaaS Tech Corp",industry:"Technology",size:"medium",location:"International",isPublic:!1},metrics:{performanceImprovement:"30% cost reduction",uptime:"99.999%",customMetrics:{containers_managed:200,deployments_daily:15,backup_success_rate:"100%",security_incidents:0}},teamSize:4,role:"Lead DevOps Engineer",createdAt:16752096e5,updatedAt:17013888e5,version:1}],nT="projects",rT={async getProjects(){if(!YI)return tT;try{const e=Qy(ly(YI,nT),ev("priority","desc")),t=await fv(e);return t.empty?(await this.seedProjects(),tT):t.docs.map(e=>({id:e.id,...e.data()}))}catch(lT){throw lT}},subscribeToProjects(e){if(!YI)return e(tT),()=>{};return yv(Qy(ly(YI,nT),ev("priority","desc")),t=>{const n=t.docs.map(e=>({id:e.id,...e.data()}));e(n)},t=>{e(tT)})},async getProject(e){if(!YI)return null;try{const t=hy(YI,nT,e),n=await hv(t);return n.exists()?{id:n.id,...n.data()}:null}catch(lT){throw lT}},async createProject(e){if(!YI)throw new Error("Firebase is not enabled");try{return(await gv(ly(YI,nT),{...e,createdAt:Date.now(),updatedAt:Date.now()})).id}catch(lT){throw lT}},async updateProject(e,t){if(!YI)throw new Error("Firebase is not enabled");try{const n=hy(YI,nT,e);await pv(n,{...t,updatedAt:Date.now()})}catch(lT){throw lT}},async deleteProject(e){if(!YI)throw new Error("Firebase is not enabled");try{await mv(hy(YI,nT,e))}catch(lT){throw lT}},async uploadImage(e,t="projects"){if(!eT)throw new Error("Firebase Storage is not enabled");try{const s=(r=eT,i=`${t}/${Date.now()}_${e.name}`,Tw(r=Ga(r),i)),o=await Rw(s,e);return await(n=o.ref,Ew(n=Ga(n)))}catch(lT){throw lT}var n,r,i},async seedProjects(){if(!YI)return;const e=Ev(YI);tT.forEach(t=>{const n=hy(ly(YI,nT)),{id:r,...i}=t;e.set(n,{...i,createdAt:Date.now(),updatedAt:Date.now()})}),await e.commit()}};function iT(){const[t,n]=e.useState(()=>"undefined"==typeof navigator||navigator.onLine);return e.useEffect(()=>{const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),t}const sT="projects";function oT(){const[t,n]=e.useState([]),[r,i]=e.useState(!0),[s,o]=e.useState(null),a=iT();e.useEffect(()=>{i(!0);const e=rT.subscribeToProjects(e=>{const t=e.filter(e=>e.title&&e.description&&e.category),r=new Set,s=[];for(const n of t){const e=`${n.title.trim().toLowerCase()}::${(n.category||"").trim().toLowerCase()}`;r.has(e)||(r.add(e),s.push(n))}s.sort((e,t)=>{if(!!t.featured!=!!e.featured)return t.featured?1:-1;const n="number"==typeof e.priority?e.priority:0;return("number"==typeof t.priority?t.priority:0)-n}),n(s),i(!1),o(null)});return()=>{e()}},[a]);const c=e.useMemo(()=>t.filter(e=>e.featured&&!e.disabled),[t]),u=e.useMemo(()=>t.filter(e=>!e.featured&&!e.disabled),[t]),l=e.useCallback(async e=>{try{return await rT.createProject(e)}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred";throw new Error(`Failed to add project: ${e}. Please try again.`)}},[]),h=e.useCallback(async(e,t)=>{try{await rT.updateProject(e,t)}catch(n){const e=n instanceof Error?n.message:"Unknown error occurred";throw new Error(`Failed to update project: ${e}. Please try again.`)}},[]),d=e.useCallback(async e=>{try{await rT.deleteProject(e)}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred";throw new Error(`Failed to delete project: ${e}. Please try again.`)}},[]);return{projects:t,featured:c,others:u,loading:r,error:s,addProject:l,updateProject:h,deleteProject:d,isOnline:a,refetch:()=>{}}}const aT=e.forwardRef(({className:e,type:n,variant:r="default",...i},s)=>t.jsx("input",{type:n,className:Fe("flex h-10 w-full rounded-md px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-all duration-200",{default:"border border-input bg-background hover:border-primary/50 focus-visible:border-primary",glass:"border border-border/50 bg-background/50 backdrop-blur-sm hover:bg-background/70 hover:border-primary/50 focus-visible:bg-background/80 focus-visible:border-primary shadow-sm",modern:"border-2 border-border bg-background/80 hover:border-primary/60 focus-visible:border-primary focus-visible:shadow-lg hover:shadow-md backdrop-blur-sm"}[r],e),ref:s,...i}));aT.displayName="Input";const cT=e.forwardRef(({className:e,variant:n="default",...r},i)=>t.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 resize-none",{default:"border border-input bg-background hover:border-primary/50 focus-visible:border-primary",glass:"border border-border/50 bg-background/50 backdrop-blur-sm hover:bg-background/70 hover:border-primary/50 focus-visible:bg-background/80 focus-visible:border-primary shadow-sm",modern:"border-2 border-border bg-background/80 hover:border-primary/60 focus-visible:border-primary focus-visible:shadow-lg hover:shadow-md backdrop-blur-sm"}[n],e),ref:i,...r}));cT.displayName="Textarea";export{He as $,l as A,je as B,aa as C,Jo as D,I as E,f as F,_ as G,H,aT as I,z as J,$e as K,E as L,O as M,Ge as N,Be as O,We as P,gr as Q,Xe as R,S,k as T,x as U,Je as V,wr as W,R as X,Mr as Y,N as Z,It as _,Zo as a,Lr as a0,Vr as a1,Ze as a2,di as a3,ut as a4,Zi as a5,M as a6,pt as a7,st as a8,Ur as a9,Qr as aA,ii as aB,si as aC,Fr as aa,d as ab,jr as ac,L as ad,rT as ae,p as af,V as ag,ia as ah,ze as ai,Ve as aj,Ev as ak,hy as al,sT as am,ra as an,na as ao,iT as ap,Qy as aq,Yy as ar,ev as as,yv as at,pv as au,mv as av,T_ as aw,JI as ax,I_ as ay,E_ as az,ea as b,u as c,ta as d,Fe as e,v as f,T as g,ca as h,ua as i,ha as j,oa as k,QI as l,YI as m,fv as n,ly as o,gv as p,C as q,la as r,b as s,A as t,oT as u,h as v,y as w,w as x,cT as y,m as z};
//# sourceMappingURL=textarea-DGT2iZYB.js.map
